{"version":3,"file":"hosted-credit-card-payment-method-802289e4.js","mappings":"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","sources":["webpack://checkout/./packages/hosted-credit-card-integration/src/HostedCreditCardPaymentMethod.tsx","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/not-initialized-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/standard-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/set-prototype-of.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/invalid-argument-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/order-finalization-not-required-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-argument-invalid-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/missing-data-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/credit-card-integration/src/credit-card-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-method-failed-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/is-request-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/request-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/payment/payment-status-types.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/cba-mpgs-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/is-cba-mpgs-payment-method-like.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/cba-mpgs.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/payment-method-client-unavailable-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/cba-mpgs-script-loader.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cba-mpgs-integration/src/create-cba-mpgs-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/to-resolvable-module.ts","webpack://checkout/@bigcommerce/checkout-sdk/webpack/bootstrap","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/payment/is-vaulted-instrument.ts","webpack://checkout/@bigcommerce/checkout-sdk/webpack/runtime/define property getters","webpack://checkout/@bigcommerce/checkout-sdk/webpack/runtime/hasOwnProperty shorthand","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cardinal-integration/src/cardinal-three-d-secure-flow.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cardinal-integration/src/cardinal.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cardinal-integration/src/cardinal-client.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cardinal-integration/src/cardinal-script-loader.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cybersource-integration/src/cybersource/cybersource-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cybersource-integration/src/cybersource/create-cybersource-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cardinal-integration/src/cardinal-three-d-secure-flow-v2.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/payment/is-credit-card-instrument.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cybersource-integration/src/cybersourcev2/cybersourcev2-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/cybersource-integration/src/cybersourcev2/create-cybersourcev2-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/common/browser-info/get-browser-info.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/sagepay-integration/src/sage-pay-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/sagepay-integration/src/create-sage-pay-payment-strategy.ts","webpack://checkout/./packages/core/src/app/payment/paymentMethod/HostedCreditCardPaymentMethod.tsx"],"sourcesContent":["import React, { type FunctionComponent } from 'react';\n\nimport {\n    type PaymentMethodProps,\n    type PaymentMethodResolveId,\n    toResolvableComponent,\n} from '@bigcommerce/checkout/payment-integration-api';\n\nimport { HostedCreditCardComponent } from './components';\n\nconst HostedCreditCardPaymentMethod: FunctionComponent<PaymentMethodProps> = ({\n    method,\n    checkoutService,\n    checkoutState,\n    paymentForm,\n    language,\n    onUnhandledError,\n}) => {\n    return (\n        <HostedCreditCardComponent\n            checkoutService={checkoutService}\n            checkoutState={checkoutState}\n            language={language}\n            method={method}\n            onUnhandledError={onUnhandledError}\n            paymentForm={paymentForm}\n        />\n    );\n};\n\nexport default toResolvableComponent<PaymentMethodProps, PaymentMethodResolveId>(\n    HostedCreditCardPaymentMethod,\n    [\n        {\n            id: 'hosted-credit-card',\n        },\n        { id: 'credit_card', gateway: 'bluesnapdirect' },\n        { id: 'credit_card', gateway: 'checkoutcom' },\n\n        { id: 'tdonlinemart' },\n    ],\n);\n","import StandardError from './standard-error';\n\nexport enum NotInitializedErrorType {\n    CheckoutButtonNotInitialized,\n    CustomerNotInitialized,\n    PaymentNotInitialized,\n    ShippingNotInitialized,\n    SpamProtectionNotInitialized,\n}\n\n/**\n * Throw this error if a method requires a certain initialization call to be\n * made first. Some objects can be constructed but they cannot be used until a\n * separate initialization call is made.\n */\nexport default class NotInitializedError extends StandardError {\n    constructor(public subtype: NotInitializedErrorType) {\n        super(getErrorMessage(subtype));\n\n        this.name = 'NotInitializedError';\n        this.type = 'not_initialized';\n    }\n}\n\nfunction getErrorMessage(type: NotInitializedErrorType): string {\n    switch (type) {\n        case NotInitializedErrorType.CustomerNotInitialized:\n            return 'Unable to proceed because the customer step of checkout has not been initialized.';\n\n        case NotInitializedErrorType.PaymentNotInitialized:\n            return 'Unable to proceed because the payment step of checkout has not been initialized.';\n\n        case NotInitializedErrorType.ShippingNotInitialized:\n            return 'Unable to proceed because the shipping step of checkout has not been initialized.';\n\n        case NotInitializedErrorType.SpamProtectionNotInitialized:\n            return 'Unable to proceed because the checkout spam protection has not been initialized.';\n\n        default:\n            return 'Unable to proceed because the required component has not been initialized.';\n    }\n}\n","import CustomError from './custom-error';\nimport setPrototypeOf from './set-prototype-of';\n\n/**\n * This error type should not be constructed directly. It is a base class for\n * all custom errors thrown in this library.\n */\nexport default abstract class StandardError extends Error implements CustomError {\n    name = 'StandardError';\n    type = 'standard';\n\n    constructor(message?: string) {\n        super(message || 'An unexpected error has occurred.');\n\n        setPrototypeOf(this, new.target.prototype);\n\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, new.target);\n        } else {\n            this.stack = new Error(this.message).stack;\n        }\n    }\n}\n","export default function setPrototypeOf(object: any, prototype: object) {\n    if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(object, prototype);\n    } else {\n        object.__proto__ = prototype;\n    }\n\n    return object;\n}\n","import StandardError from './standard-error';\n\n/**\n * This error should be thrown when a method is unable to proceed because the\n * caller has not provided all the arguments according to their requirements,\n * i.e.: if an argument is missing or it is not the expected data type.\n */\nexport default class InvalidArgumentError extends StandardError {\n    constructor(message?: string) {\n        super(message || 'Invalid arguments have been provided.');\n\n        this.name = 'InvalidArgumentError';\n        this.type = 'invalid_argument';\n    }\n}\n","import StandardError from './standard-error';\n\n/**\n * Throw this error if we are trying to make an order finalization request for a\n * payment method that does not require such procedure.\n */\nexport default class OrderFinalizationNotRequiredError extends StandardError {\n    constructor() {\n        super('The current order does not need to be finalized at this stage.');\n\n        this.name = 'OrderFinalizationNotRequiredError';\n        this.type = 'order_finalization_not_required';\n    }\n}\n","import InvalidArgumentError from './invalid-argument-error';\n\n/**\n * This error should be thrown when we are unable to submit a payment because\n * the caller has not provided all the required fields, i.e.: if an argument is\n * missing or it is not the expected data type.\n */\nexport default class PaymentArgumentInvalidError extends InvalidArgumentError {\n    constructor(invalidFields?: string[]) {\n        let message = 'Unable to submit payment for the order because the payload is invalid.';\n\n        if (invalidFields) {\n            message = `${message} Make sure the following fields are provided correctly: ${invalidFields.join(\n                ', ',\n            )}.`;\n        }\n\n        super(message);\n\n        this.name = 'PaymentArgumentInvalidError';\n    }\n}\n","import StandardError from './standard-error';\n\nexport enum MissingDataErrorType {\n    MissingBillingAddress,\n    MissingCart,\n    MissingCheckout,\n    MissingConsignments,\n    MissingCustomer,\n    MissingCheckoutConfig,\n    MissingOrder,\n    MissingOrderConfig,\n    MissingOrderId,\n    MissingPayment,\n    MissingPaymentId,\n    MissingPaymentInstrument,\n    MissingPaymentMethod,\n    MissingPaymentRedirectUrl,\n    MissingPaymentStatus,\n    MissingPaymentToken,\n    MissingShippingAddress,\n}\n\n/**\n * Throw this error when data that is expected to exist is missing. Usually it\n * is due to the fact that certain data has not been retrieved from or saved to\n * the server yet. And such data is required to perform certain actions.\n */\nexport default class MissingDataError extends StandardError {\n    constructor(public subtype: MissingDataErrorType) {\n        super(getErrorMessage(subtype));\n\n        this.name = 'MissingDataError';\n        this.type = 'missing_data';\n    }\n}\n\nfunction getErrorMessage(type: MissingDataErrorType): string {\n    switch (type) {\n        case MissingDataErrorType.MissingBillingAddress:\n            return 'Unable to proceed because billing address data is unavailable.';\n\n        case MissingDataErrorType.MissingCart:\n            return 'Unable to proceed because cart data is unavailable.';\n\n        case MissingDataErrorType.MissingConsignments:\n            return 'Unable to proceed because consignments data is unavailable.';\n\n        case MissingDataErrorType.MissingCheckout:\n            return 'Unable to proceed because checkout data is unavailable.';\n\n        case MissingDataErrorType.MissingCustomer:\n            return 'Unable to proceed because customer data is unavailable.';\n\n        case MissingDataErrorType.MissingCheckoutConfig:\n        case MissingDataErrorType.MissingOrderConfig:\n            return 'Unable to proceed because configuration data is unavailable.';\n\n        case MissingDataErrorType.MissingOrder:\n            return 'Unable to proceed because order data is unavailable.';\n\n        case MissingDataErrorType.MissingOrderId:\n            return 'Unable to proceed because order ID is unavailable or not generated yet.';\n\n        case MissingDataErrorType.MissingPayment:\n            return 'Unable to proceed because payment data is unavailable.';\n\n        case MissingDataErrorType.MissingPaymentToken:\n            return 'Unable to proceed because the token required to submit a payment is missing.';\n\n        case MissingDataErrorType.MissingPaymentMethod:\n            return 'Unable to proceed because payment method data is unavailable or not properly configured.';\n\n        case MissingDataErrorType.MissingShippingAddress:\n            return 'Unable to proceed because shipping address data is unavailable.';\n\n        default:\n            return 'Unable to proceed because the required data is unavailable.';\n    }\n}\n","import { isNil, values } from 'lodash';\n\nimport {\n    HostedForm,\n    InvalidArgumentError,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInitializeOptions,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { WithCreditCardPaymentInitializeOptions } from './credit-card-payment-initialize-options';\n\nexport default class CreditCardPaymentStrategy implements PaymentStrategy {\n    protected _hostedForm?: HostedForm;\n    protected _shouldRenderHostedForm?: boolean;\n\n    constructor(protected _paymentIntegrationService: PaymentIntegrationService) {}\n\n    execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        return this._isHostedPaymentFormEnabled(\n            payload.payment?.methodId,\n            payload.payment?.gatewayId,\n        ) && this._shouldRenderHostedForm\n            ? this._executeWithHostedForm(payload, options)\n            : this._executeWithoutHostedForm(payload, options);\n    }\n\n    initialize(\n        options?: PaymentInitializeOptions & WithCreditCardPaymentInitializeOptions,\n    ): Promise<void> {\n        if (\n            !this._isHostedPaymentFormEnabled(options?.methodId, options?.gatewayId) ||\n            !this._isHostedFieldAvailable(options)\n        ) {\n            this._shouldRenderHostedForm = false;\n\n            return Promise.resolve();\n        }\n\n        const formOptions = options && options.creditCard && options.creditCard.form;\n        const state = this._paymentIntegrationService.getState();\n        const { paymentSettings: { bigpayBaseUrl: host = '' } = {} } =\n            state.getStoreConfigOrThrow();\n\n        if (!formOptions) {\n            throw new InvalidArgumentError();\n        }\n\n        const form = this._paymentIntegrationService.createHostedForm(host, formOptions);\n\n        return form.attach().then(() => {\n            this._shouldRenderHostedForm = true;\n            this._hostedForm = form;\n\n            return Promise.resolve();\n        });\n    }\n\n    deinitialize(): Promise<void> {\n        if (this._hostedForm) {\n            this._hostedForm.detach();\n        }\n\n        return Promise.resolve();\n    }\n\n    finalize(): Promise<void> {\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    protected async _executeWithoutHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const paymentData = payment && payment.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        await this._paymentIntegrationService.submitPayment({ ...payment, paymentData });\n    }\n\n    protected async _executeWithHostedForm(\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n    ): Promise<void> {\n        const { payment, ...order } = payload;\n        const form = this._hostedForm;\n\n        if (!form) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        if (!payment || !payment.methodId) {\n            throw new PaymentArgumentInvalidError(['payment.methodId']);\n        }\n\n        await this._paymentIntegrationService.submitOrder(order, options);\n\n        await form.validate().then(() => form.submit(payment));\n    }\n\n    protected _isHostedPaymentFormEnabled(methodId?: string, gatewayId?: string): boolean {\n        if (!methodId) {\n            return false;\n        }\n\n        const state = this._paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(methodId, gatewayId);\n\n        return paymentMethod.config.isHostedFormEnabled === true;\n    }\n\n    private _isHostedFieldAvailable(\n        options?: PaymentInitializeOptions & WithCreditCardPaymentInitializeOptions,\n    ): boolean {\n        return !values(options && options.creditCard && options.creditCard.form.fields).every(\n            isNil,\n        );\n    }\n}\n","import StandardError from './standard-error';\n\n/**\n * This error should be thrown when a payment method experiences some kind of\n * failure (i.e.: its client library returns a rejected promise). And there is\n * no other error type that is more specific than this one.\n */\nexport default class PaymentMethodFailedError extends StandardError {\n    constructor(message?: string) {\n        super(\n            message ||\n                'Unable to proceed because the client library of a payment method has thrown an unexpected error.',\n        );\n\n        this.name = 'PaymentMethodFailedError';\n        this.type = 'payment_method_client_invalid';\n    }\n}\n","import RequestError from './request-error';\n\n// Have to use `as` https://stackoverflow.com/questions/73987044/typeguarding-an-unknown-nested-object should be fixed in 4.8+\nconst isRequestError = (error: unknown): error is RequestError => {\n    return typeof error === 'object' && error !== null && 'body' in error;\n};\n\nexport default isRequestError;\n","import { Response } from '@bigcommerce/request-sender';\n\nimport StandardError from './standard-error';\n\nconst DEFAULT_RESPONSE = {\n    body: {},\n    headers: {},\n    status: 0,\n};\n\n/**\n * Throw this error if we are unable to make a request to the server. It wraps\n * any server response into a JS error object.\n */\nexport default class RequestError<TBody = any> extends StandardError {\n    body: TBody | {};\n    headers: { [key: string]: any };\n    errors: Array<{ code: string; message?: string }>;\n    status: number;\n\n    constructor(\n        response?: Response<TBody | {}>,\n        {\n            message,\n            errors,\n        }: {\n            message?: string;\n            errors?: Array<{ code: string; message?: string }>;\n        } = {},\n    ) {\n        const { body, headers, status } = response || DEFAULT_RESPONSE;\n\n        super(message || 'An unexpected error has occurred.');\n\n        this.name = 'RequestError';\n        this.type = 'request';\n        this.body = body;\n        this.headers = headers;\n        this.status = status;\n        this.errors = errors || [];\n    }\n}\n","enum PaymentStatusTypes {\n    ACKNOWLEDGE = 'ACKNOWLEDGE',\n    FINALIZE = 'FINALIZE',\n    INITIALIZE = 'INITIALIZE',\n}\n\nexport default PaymentStatusTypes;\n","import { noop, some } from 'lodash';\n\nimport { CreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    isRequestError,\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentArgumentInvalidError,\n    PaymentInitializeOptions,\n    PaymentIntegrationService,\n    PaymentMethodFailedError,\n    PaymentRequestOptions,\n    PaymentStatusTypes,\n    RequestError,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport {\n    RestApiResponse,\n    THREE_D_SECURE_AVAILABLE,\n    THREE_D_SECURE_BUSY,\n    THREE_D_SECURE_PROCEED,\n    ThreeDSjs,\n} from './cba-mpgs';\nimport CBAMPGSScriptLoader from './cba-mpgs-script-loader';\nimport { isCBAMPGSPaymentMethodLike, isThreeDSErrorBody } from './is-cba-mpgs-payment-method-like';\n\nexport default class CBAMPGSPaymentStrategy extends CreditCardPaymentStrategy {\n    private threeDSjs?: ThreeDSjs;\n\n    private sessionId = '';\n    private locale?: string;\n\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        private cbaMGPSScriptLoader: CBAMPGSScriptLoader,\n    ) {\n        super(paymentIntegrationService);\n    }\n\n    async initialize(options: PaymentInitializeOptions): Promise<void> {\n        await super.initialize(options);\n\n        const { methodId } = options;\n\n        await this.paymentIntegrationService.loadPaymentMethod(methodId);\n\n        const state = this.paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(methodId);\n\n        if (!isCBAMPGSPaymentMethodLike(paymentMethod)) {\n            throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n        }\n\n        const {\n            clientToken,\n            initializationData: { isTestModeFlagEnabled = false, merchantId },\n            config: { is3dsEnabled },\n        } = paymentMethod;\n\n        if (is3dsEnabled) {\n            this.threeDSjs = await this.cbaMGPSScriptLoader.load(isTestModeFlagEnabled);\n\n            if (!this.threeDSjs) {\n                throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n            }\n\n            if (!clientToken || !merchantId) {\n                throw new MissingDataError(MissingDataErrorType.MissingPaymentMethod);\n            }\n\n            this.sessionId = clientToken;\n            this.locale = state.getLocale();\n\n            if (!this.locale) {\n                throw new MissingDataError(MissingDataErrorType.MissingCart);\n            }\n\n            await this.threeDSjs.configure({\n                merchantId,\n                sessionId: this.sessionId,\n                callback: () => {\n                    if (this.threeDSjs?.isConfigured()) {\n                        return this.paymentIntegrationService.getState();\n                    }\n\n                    throw new PaymentMethodFailedError('Failed to configure 3DS API.');\n                },\n                configuration: {\n                    userLanguage: this.locale,\n                    wsVersion: 62,\n                },\n            });\n        }\n\n        return Promise.resolve();\n    }\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment } = payload;\n        const paymentData = payment && payment.paymentData;\n\n        if (!payment || !paymentData) {\n            throw new PaymentArgumentInvalidError(['payment.paymentData']);\n        }\n\n        const state = this.paymentIntegrationService.getState();\n        const paymentMethod = state.getPaymentMethodOrThrow(payment.methodId);\n\n        const { is3dsEnabled } = paymentMethod.config;\n\n        if (is3dsEnabled) {\n            const newPaymentData = {\n                ...paymentData,\n                threeDSecure: { token: this.sessionId },\n            };\n\n            if (payload.payment) {\n                payload.payment.paymentData = newPaymentData;\n            }\n        }\n\n        return super.execute(payload, options).catch((error) => {\n            if (\n                !is3dsEnabled ||\n                !isRequestError(error) ||\n                !some(error.body.errors, { code: 'three_d_secure_required' })\n            ) {\n                return Promise.reject(error);\n            }\n\n            const retryState = this.paymentIntegrationService.getState();\n            const order = retryState.getOrder();\n\n            const {\n                storeProfile: { storeId },\n            } = retryState.getStoreConfigOrThrow();\n\n            if (!order || !this.sessionId) {\n                throw new MissingDataError(MissingDataErrorType.MissingCheckout);\n            }\n\n            const orderId = `${storeId}_${order.orderId}`;\n\n            if (!isThreeDSErrorBody(error.body)) {\n                throw new RequestError();\n            }\n\n            const {\n                three_ds_result: { token: transactionId },\n            } = error.body;\n\n            if (!transactionId) {\n                return Promise.reject(error);\n            }\n\n            return this.initiateAuthentication(orderId, transactionId);\n        });\n    }\n\n    async finalize(options?: PaymentRequestOptions): Promise<void> {\n        const state = this.paymentIntegrationService.getState();\n        const order = state.getOrder();\n\n        if (order && state.getPaymentStatus() === PaymentStatusTypes.FINALIZE) {\n            await this.paymentIntegrationService.finalizeOrder(options);\n\n            return Promise.resolve();\n        }\n\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    deinitialize(): Promise<void> {\n        this.threeDSjs = undefined;\n        this.sessionId = '';\n\n        return super.deinitialize();\n    }\n\n    private async initiateAuthentication(orderId: string, transactionId: string): Promise<void> {\n        const response: RestApiResponse = await new Promise((resolve, reject) => {\n            if (!this.threeDSjs) {\n                throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n            }\n\n            this.threeDSjs.initiateAuthentication(orderId, transactionId, (data) => {\n                const error = data.error;\n\n                if (error) {\n                    return reject(new PaymentMethodFailedError(error.msg));\n                }\n\n                if (this.threeDSjs && data.gatewayRecommendation === THREE_D_SECURE_PROCEED) {\n                    return resolve(data.restApiResponse);\n                }\n\n                return reject(new PaymentMethodFailedError());\n            });\n        });\n\n        if (\n            response.transaction &&\n            response.transaction.authenticationStatus === THREE_D_SECURE_AVAILABLE\n        ) {\n            return this.authenticatePayer(orderId, transactionId);\n        }\n\n        throw new PaymentMethodFailedError();\n    }\n\n    private async authenticatePayer(\n        orderId: string,\n        transactionId: string,\n        attempt = 1,\n    ): Promise<void> {\n        return new Promise((_resolve, reject) => {\n            if (!this.threeDSjs) {\n                return reject(\n                    new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized),\n                );\n            }\n\n            this.threeDSjs.authenticatePayer(\n                orderId,\n                transactionId,\n                // eslint-disable-next-line @typescript-eslint/no-misused-promises\n                async (data) => {\n                    const error = data.error;\n\n                    if (error) {\n                        if (error.cause && error.cause === THREE_D_SECURE_BUSY && attempt < 5) {\n                            // Wait 3 seconds for MPGS server to process the `initiateAuthentication` call\n                            // See: Step 1: Initiate Authentication ->  Initiate Authentication Request:\n                            // https://ap-gateway.mastercard.com/api/documentation/integrationGuidelines/supportedFeatures/pickAdditionalFunctionality/authentication/3DS/integrationModelAPI.html?locale=en_US#x_3DSTest\n                            await new Promise((resolve) => setTimeout(resolve, 3000));\n\n                            // eslint-disable-next-line no-plusplus, no-param-reassign\n                            return this.authenticatePayer(orderId, transactionId, ++attempt);\n                        }\n\n                        return reject(new PaymentMethodFailedError());\n                    }\n\n                    // ThreeDSjs will handle the redirect so return a promise that doesn't really resolve\n                    return new Promise<never>(noop);\n                },\n                { fullScreenRedirect: true },\n            );\n        });\n    }\n}\n","/* eslint-disable @typescript-eslint/consistent-type-assertions */\nimport { PaymentMethod } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { CBAMPGSPaymentMethod, ThreeDSErrorBody } from './cba-mpgs';\n\nexport function isCBAMPGSPaymentMethodLike(\n    paymentMethod: PaymentMethod,\n): paymentMethod is CBAMPGSPaymentMethod {\n    return (\n        typeof paymentMethod === 'object' &&\n        paymentMethod !== null &&\n        'initializationData' in paymentMethod &&\n        typeof (paymentMethod as CBAMPGSPaymentMethod).initializationData === 'object' &&\n        (paymentMethod as CBAMPGSPaymentMethod).initializationData !== null &&\n        'merchantId' in (paymentMethod as CBAMPGSPaymentMethod).initializationData &&\n        typeof (paymentMethod as CBAMPGSPaymentMethod).initializationData.merchantId === 'string' &&\n        (typeof (paymentMethod as CBAMPGSPaymentMethod).initializationData.isTestModeFlagEnabled ===\n            'boolean' ||\n            typeof (paymentMethod as CBAMPGSPaymentMethod).initializationData\n                .isTestModeFlagEnabled === 'undefined')\n    );\n}\n\nexport function isThreeDSErrorBody(body: unknown): body is ThreeDSErrorBody {\n    return (\n        typeof body === 'object' &&\n        body !== null &&\n        'three_ds_result' in body &&\n        typeof (body as ThreeDSErrorBody).three_ds_result === 'object' &&\n        (body as ThreeDSErrorBody).three_ds_result !== null &&\n        'token' in (body as ThreeDSErrorBody).three_ds_result &&\n        typeof (body as ThreeDSErrorBody).three_ds_result.token === 'string'\n    );\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { PaymentMethod } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport const THREE_D_SECURE_PROCEED = 'PROCEED';\nexport const THREE_D_SECURE_BUSY = 'SERVER_BUSY';\nexport const THREE_D_SECURE_AVAILABLE = 'AUTHENTICATION_AVAILABLE';\n\nexport interface CBAMPGSHostWindow extends Window {\n    ThreeDS?: ThreeDSjs;\n}\n\nexport interface ThreeDSjs {\n    // Configuration method for initializing the API.\n    configure(config: ThreeDSConfiguration): Promise<void>;\n    // Convenience method to check if the API has been configured successfully.\n    isConfigured(): boolean;\n    // Authentication for the arguments passed.\n    initiateAuthentication(\n        orderId: string,\n        transactionId: string,\n        callback: (data: ThreeDSAuthenticationResponse) => void,\n    ): void;\n    authenticatePayer(\n        orderId: string,\n        transactionId: string,\n        callback: (data: ThreeDSAuthenticationResponse) => void,\n        optionalParams?: AuthenticatePayerOptionalParams,\n    ): void;\n}\n\nexport interface RestApiResponse {\n    transaction: {\n        authenticationStatus: string;\n    };\n}\n\n// Configuration required to configure ThreeDS\nexport interface ThreeDSConfiguration {\n    merchantId: string;\n    sessionId: string;\n    configuration: ThreeDSAPIConfiguration;\n    callback(): void;\n}\n\nexport interface ThreeDSAuthenticationResponse {\n    error?: ThreeDSAuthenticationError;\n    restApiResponse: RestApiResponse;\n    gatewayRecommendation: string;\n}\n\nexport interface AuthenticatePayerOptionalParams {\n    fullScreenRedirect: boolean;\n}\n\nexport interface ThreeDSAuthenticationError {\n    code: string;\n    msg: string;\n    cause?: string;\n}\n\n// JSON value supporting data elements like userLanguage, REST API version (wsVersion)\nexport interface ThreeDSAPIConfiguration {\n    // A language identifier or IETF language tag to control the language of the payment page displayed to the payer.\n    //  For example, \"en_US\", es, \"fr-CA\". By default, the language is \"en_US\".\n    userLanguage: string;\n    // The Web Services API version that you submitted the request in. IE: 62\n    wsVersion: number;\n}\n\nexport interface CBAMPGSPaymentMethod extends PaymentMethod {\n    initializationData: CBAMPGSInitializationData;\n}\n\nexport interface CBAMPGSInitializationData {\n    isTestModeFlagEnabled?: boolean;\n    merchantId: string;\n}\n\nexport interface ThreeDSErrorBody {\n    three_ds_result: {\n        token: string;\n    };\n}\n","import StandardError from './standard-error';\n\n/**\n * This error should be thrown when the client library of a payment method fails\n * to load, or for some reason, it is inaccessible.\n */\nexport default class PaymentMethodClientUnavailableError extends StandardError {\n    constructor(message?: string) {\n        super(\n            message ||\n                'Unable to proceed because the client library of a payment method is not loaded or ready to be used.',\n        );\n\n        this.name = 'PaymentMethodClientUnavailableError';\n        this.type = 'payment_method_client_unavailable';\n    }\n}\n","/* eslint-disable @typescript-eslint/naming-convention */\nimport { ScriptLoader } from '@bigcommerce/script-loader';\n\nimport { PaymentMethodClientUnavailableError } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { CBAMPGSHostWindow, ThreeDSjs } from './cba-mpgs';\n\nexport default class CBAMPGSScriptLoader {\n    constructor(private _scriptLoader: ScriptLoader, private _window: CBAMPGSHostWindow = window) {}\n\n    async load(testMode?: boolean): Promise<ThreeDSjs> {\n        await this._scriptLoader.loadScript(\n            `//${\n                testMode ? 'test' : 'ap'\n            }-gateway.mastercard.com/static/threeDS/1.3.0/three-ds.min.js`,\n        );\n\n        if (!this._window.ThreeDS) {\n            throw new PaymentMethodClientUnavailableError();\n        }\n\n        return this._window.ThreeDS;\n    }\n}\n","import { getScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CBAMPGSPaymentStrategy from './cba-mpgs-payment-strategy';\nimport CBAMPGSScriptLoader from './cba-mpgs-script-loader';\n\nconst createCBAMPGSPaymentStrategy: PaymentStrategyFactory<CBAMPGSPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new CBAMPGSPaymentStrategy(\n        paymentIntegrationService,\n        new CBAMPGSScriptLoader(getScriptLoader()),\n    );\n};\n\nexport default toResolvableModule(createCBAMPGSPaymentStrategy, [{ id: 'cba_mpgs' }]);\n","import ResolvableModule from './resolvable-module';\n\nexport default function toResolvableModule<TModule, TIdentifier>(\n    module: TModule,\n    resolveIds: TIdentifier[],\n): ResolvableModule<TModule, TIdentifier> {\n    return Object.assign(module, { resolveIds });\n}\n","// The require scope\nvar __webpack_require__ = {};\n\n","import {\n    FormattedPayload,\n    FormattedVaultedInstrument,\n    HostedVaultedInstrument,\n    PaymentInstrumentPayload,\n    VaultedInstrument,\n} from './payment';\n\nexport default function isVaultedInstrument(\n    instrument: PaymentInstrumentPayload,\n): instrument is VaultedInstrument {\n    return Boolean((instrument as VaultedInstrument).instrumentId);\n}\n\nexport function isHostedVaultedInstrument(\n    instrument: PaymentInstrumentPayload,\n): instrument is HostedVaultedInstrument {\n    return (\n        Boolean((instrument as HostedVaultedInstrument).instrumentId) &&\n        !Object.prototype.hasOwnProperty.call(instrument, 'ccNumber') &&\n        !Object.prototype.hasOwnProperty.call(instrument, 'ccCvv')\n    );\n}\n\nexport function isFormattedVaultedInstrument(\n    instrument: PaymentInstrumentPayload,\n): instrument is FormattedPayload<FormattedVaultedInstrument> {\n    const formattedInstrument = (instrument as FormattedPayload<FormattedVaultedInstrument>)\n        .formattedPayload;\n\n    if (!formattedInstrument) {\n        return false;\n    }\n\n    return (\n        typeof formattedInstrument.bigpay_token === 'string' ||\n        Boolean(formattedInstrument.bigpay_token && formattedInstrument.bigpay_token.token)\n    );\n}\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import { merge, some } from 'lodash';\n\nimport {\n    HostedForm,\n    isRequestError,\n    isVaultedInstrument,\n    OrderRequestBody,\n    PaymentIntegrationService,\n    PaymentMethod,\n    PaymentRequestOptions,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CardinalClient, { CardinalOrderData } from './cardinal-client';\n\nexport default class CardinalThreeDSecureFlow {\n    constructor(\n        private _paymentIntegrationService: PaymentIntegrationService,\n        private _cardinalClient: CardinalClient,\n    ) {}\n\n    async prepare(method: PaymentMethod): Promise<void> {\n        await this._cardinalClient.load(method.id, method.config.testMode);\n        await this._cardinalClient.configure(await this._getClientToken(method));\n    }\n\n    async start(\n        execute: PaymentStrategy['execute'],\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n        hostedForm?: HostedForm,\n    ): Promise<void> {\n        const { getCardInstrument, getPaymentMethodOrThrow } =\n            this._paymentIntegrationService.getState();\n\n        const { payment: { methodId = '', paymentData = {} } = {} } = payload;\n        const instrument =\n            isVaultedInstrument(paymentData) && getCardInstrument(paymentData.instrumentId);\n        const bin = instrument ? instrument.iin : hostedForm && hostedForm.getBin();\n\n        if (bin) {\n            await this._cardinalClient.runBinProcess(bin);\n        }\n\n        try {\n            return await execute(\n                merge(payload, {\n                    payment: {\n                        paymentData: {\n                            threeDSecure: { token: getPaymentMethodOrThrow(methodId).clientToken },\n                        },\n                    },\n                }),\n                options,\n            );\n        } catch (error) {\n            if (\n                !isRequestError(error) ||\n                !some(error.body.errors, { code: 'three_d_secure_required' })\n            ) {\n                throw error;\n            }\n\n            const threeDSecure = await this._cardinalClient.getThreeDSecureData(\n                error.body.three_ds_result,\n                this._getOrderData(),\n            );\n\n            if (!hostedForm) {\n                await this._paymentIntegrationService.submitPayment(\n                    merge(payload.payment, {\n                        paymentData: { threeDSecure },\n                    }),\n                );\n\n                return;\n            }\n\n            await hostedForm.submit(\n                merge(payload.payment, {\n                    paymentData: { threeDSecure },\n                }),\n            );\n        }\n    }\n\n    private async _getClientToken(method: PaymentMethod): Promise<string> {\n        if (method.clientToken) {\n            return method.clientToken;\n        }\n\n        await this._paymentIntegrationService.loadPaymentMethod(method.id);\n\n        const paymentMethod = this._paymentIntegrationService\n            .getState()\n            .getPaymentMethodOrThrow(method.id);\n\n        return paymentMethod.clientToken || '';\n    }\n\n    private _getOrderData(): CardinalOrderData {\n        const state = this._paymentIntegrationService.getState();\n        const billingAddress = state.getBillingAddressOrThrow();\n        const shippingAddress = state.getShippingAddress();\n        const checkout = state.getCheckoutOrThrow();\n        const order = state.getOrderOrThrow();\n\n        return {\n            billingAddress,\n            shippingAddress,\n            currencyCode: checkout.cart.currency.code,\n            id: order.orderId.toString(),\n            amount: checkout.cart.cartAmount,\n        };\n    }\n}\n","import { ThreeDSecure, ThreeDSecureToken } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport const CardinalSignatureValidationErrors = [100004, 1010, 1011, 1020];\n\nexport interface CardinalSDK {\n    configure(params: CardinalConfiguration): void;\n    on(params: CardinalEventType, callback: CardinalEventMap[CardinalEventType]): void;\n    off(params: CardinalEventType): void;\n    setup<K extends keyof CardinalInitializationDataMap>(\n        initializationType: K,\n        initializationData: CardinalInitializationDataMap[K],\n    ): void;\n    trigger(\n        event: CardinalTriggerEvents,\n        data?: string,\n    ): Promise<CardinalBinProcessResponse | void>;\n    continue(\n        paymentBrand: CardinalPaymentBrand,\n        continueObject: CardinalContinue,\n        order: CardinalPartialOrder,\n    ): void;\n    start(paymentBrand: CardinalPaymentBrand, order: CardinalPartialOrder, jwt?: string): void;\n}\n\nexport interface CardinalWindow extends Window {\n    Cardinal?: CardinalSDK;\n}\n\nexport enum CardinalEventType {\n    SetupCompleted = 'payments.setupComplete',\n    Validated = 'payments.validated',\n}\n\nexport type setupCompleteFn = (setupCompleteData: CardinalSetupCompletedData) => void;\nexport type validatedFn = (data: CardinalValidatedData, jwt?: string) => void;\n\nexport interface CardinalEventMap {\n    [CardinalEventType.SetupCompleted]: setupCompleteFn;\n    [CardinalEventType.Validated]: validatedFn;\n}\n\nexport type CardinalConfiguration = Partial<{\n    logging: {\n        level: string;\n    };\n    payment: {\n        view: string;\n        framework: string;\n        displayLoading: boolean;\n    };\n}>;\n\nexport interface CardinalSetupCompletedData {\n    sessionId: string;\n    modules: CardinalModuleState[];\n}\n\nexport interface CardinalModuleState {\n    loaded: boolean;\n    module: string;\n}\n\nexport enum CardinalInitializationType {\n    Init = 'init',\n    Complete = 'complete',\n    Confirm = 'confirm',\n}\n\nexport interface CardinalInitializationDataMap {\n    [CardinalInitializationType.Init]: CardinalInitTypeData;\n    [CardinalInitializationType.Complete]: CardinalCompleteTypeData;\n    [CardinalInitializationType.Confirm]: CardinalConfirmTypeData;\n}\n\nexport interface CardinalInitTypeData {\n    jwt: string;\n}\n\nexport interface CardinalCompleteTypeData {\n    Status: string;\n}\n\nexport interface CardinalConfirmTypeData {\n    jwt: string;\n    cardinalResponseJwt: string;\n}\n\nexport interface CardinalValidatedData {\n    ActionCode?: CardinalValidatedAction;\n    ErrorDescription: string;\n    ErrorNumber: number;\n    Validated?: boolean;\n    Payment?: CardinalPayment;\n}\n\nexport interface CardinalPayment {\n    ExtendedData?: CardinalCCAExtendedData;\n    ProcessorTransactionId: string;\n    Type: CardinalPaymentType;\n}\n\nexport interface CardinalBinProcessResponse {\n    Status: boolean;\n}\n\nexport interface CardinalContinue {\n    AcsUrl: string;\n    Payload: string;\n}\n\nexport interface CardinalPartialOrder {\n    OrderDetails: CardinalOrderDetails;\n    Consumer?: CardinalConsumer;\n}\n\nexport interface CardinalConsumer {\n    Email1?: string;\n    Email2?: string;\n    ShippingAddress?: CardinalAddress;\n    BillingAddress?: CardinalAddress;\n    Account?: CardinalAccount;\n}\n\nexport interface CardinalAccount {\n    AccountNumber: number;\n    ExpirationMonth: number;\n    ExpirationYear: number;\n    NameOnAccount: string;\n    CardCode: number;\n}\n\nexport interface CardinalAddress {\n    FullName?: string;\n    FirstName: string;\n    MiddleName?: string;\n    LastName: string;\n    Address1: string;\n    Address2?: string;\n    Address3?: string;\n    City: string;\n    State: string;\n    PostalCode: string;\n    CountryCode: string;\n    Phone1?: string;\n    Phone2?: string;\n}\n\nexport interface CardinalOrderDetails {\n    OrderNumber: string;\n    Amount: number;\n    CurrencyCode: string;\n    OrderDescription?: string;\n    OrderChannel: string;\n    TransactionId?: string;\n}\n\nexport type CardinalCCAExtendedData = Partial<{\n    CAVV: string;\n    ECIFlag: string;\n    PAResStatus: string;\n    SignatureVerification: string;\n    XID: string;\n    UCAFIndicator: string;\n    ChallengeCancel: string;\n}>;\n\nexport enum CardinalValidatedAction {\n    Success = 'SUCCESS',\n    NoAction = 'NOACTION',\n    Failure = 'FAILURE',\n    Error = 'ERROR',\n}\n\nexport enum CardinalPaymentType {\n    CCA = 'CCA',\n    Paypal = 'Paypal',\n    Wallet = 'Wallet',\n    VisaCheckout = 'VisaCheckout',\n    ApplePay = 'ApplePay',\n    DiscoverWallet = 'DiscoverWallet',\n}\n\nexport enum CardinalTriggerEvents {\n    BinProcess = 'bin.process',\n}\n\nexport enum CardinalPaymentBrand {\n    CCA = 'cca',\n}\n\nexport enum CardinalSignatureVerification {\n    Yes = 'Y',\n    No = 'N',\n}\n\nexport type CardinalThreeDSecureToken = Pick<ThreeDSecure, 'xid'> | ThreeDSecureToken;\n","import { includes, noop } from 'lodash';\n\nimport {\n    Address,\n    BillingAddress,\n    CreditCardInstrument,\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    PaymentMethodFailedError,\n    ThreeDSecureToken,\n    ThreeDsResult,\n    VaultedInstrument,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport {\n    CardinalAccount,\n    CardinalAddress,\n    CardinalConsumer,\n    CardinalEventType,\n    CardinalInitializationType,\n    CardinalPartialOrder,\n    CardinalPaymentBrand,\n    CardinalSDK,\n    CardinalSignatureValidationErrors,\n    CardinalSignatureVerification,\n    CardinalTriggerEvents,\n    CardinalValidatedAction,\n    CardinalValidatedData,\n} from './cardinal';\nimport CardinalScriptLoader from './cardinal-script-loader';\n\nexport type CardinalSupportedPaymentInstrument = CreditCardInstrument | VaultedInstrument;\n\nexport interface CardinalOrderData {\n    billingAddress: BillingAddress;\n    shippingAddress?: Address;\n    currencyCode: string;\n    id: string;\n    amount: number;\n    paymentData?: CreditCardInstrument;\n}\n\nexport default class CardinalClient {\n    private _provider = '';\n    private _testMode = false;\n    private _sdk?: Promise<CardinalSDK>;\n    private _configurationToken = '';\n\n    constructor(private _scriptLoader: CardinalScriptLoader) {}\n\n    load(provider: string, testMode = false): Promise<void> {\n        this._provider = provider;\n        this._testMode = testMode;\n\n        if (!this._sdk) {\n            this._sdk = this._scriptLoader.load(provider, testMode);\n        }\n\n        return this._sdk.then(noop);\n    }\n\n    configure(clientToken: string): Promise<void> {\n        if (this._configurationToken) {\n            if (this._configurationToken === clientToken) {\n                return Promise.resolve();\n            }\n\n            this._sdk = this._scriptLoader.load(`${this._provider}.${Date.now()}`, this._testMode);\n        }\n\n        return this._getClientSDK().then(\n            (client) =>\n                new Promise<void>((resolve, reject) => {\n                    client.on(CardinalEventType.SetupCompleted, () => {\n                        client.off(CardinalEventType.SetupCompleted);\n                        client.off(CardinalEventType.Validated);\n\n                        this._configurationToken = clientToken;\n\n                        resolve();\n                    });\n\n                    client.on(CardinalEventType.Validated, (data: CardinalValidatedData) => {\n                        client.off(CardinalEventType.SetupCompleted);\n                        client.off(CardinalEventType.Validated);\n\n                        switch (data.ActionCode) {\n                            case CardinalValidatedAction.Error:\n                                if (includes(CardinalSignatureValidationErrors, data.ErrorNumber)) {\n                                    reject(\n                                        new MissingDataError(\n                                            MissingDataErrorType.MissingPaymentMethod,\n                                        ),\n                                    );\n                                }\n\n                                reject(new PaymentMethodFailedError(data.ErrorDescription));\n                                break;\n                        }\n                    });\n\n                    client.setup(CardinalInitializationType.Init, {\n                        jwt: clientToken,\n                    });\n                }),\n        );\n    }\n\n    runBinProcess(binNumber: string): Promise<void> {\n        return this._getClientSDK()\n            .then((client) =>\n                client.trigger(CardinalTriggerEvents.BinProcess, binNumber).catch(noop),\n            )\n            .then((result) => {\n                if (!result || !result.Status) {\n                    throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n                }\n            });\n    }\n\n    getThreeDSecureData(\n        threeDSecureData: ThreeDsResult,\n        orderData: CardinalOrderData,\n    ): Promise<ThreeDSecureToken> {\n        return this._getClientSDK().then((client) => {\n            return new Promise<ThreeDSecureToken>((resolve, reject) => {\n                client.on(\n                    CardinalEventType.Validated,\n                    (data: CardinalValidatedData, jwt?: string) => {\n                        client.off(CardinalEventType.Validated);\n\n                        if (!jwt) {\n                            return reject(\n                                new PaymentMethodFailedError(\n                                    data.ErrorDescription\n                                        ? data.ErrorDescription\n                                        : 'An error was encountered while processing the transaction.',\n                                ),\n                            );\n                        }\n\n                        if (!data.ActionCode) {\n                            return resolve({ token: jwt });\n                        }\n\n                        switch (data.ActionCode) {\n                            case CardinalValidatedAction.Success:\n                                return resolve({ token: jwt });\n\n                            case CardinalValidatedAction.NoAction:\n                                if (data.ErrorNumber > 0) {\n                                    return reject(\n                                        new PaymentMethodFailedError(data.ErrorDescription),\n                                    );\n                                } else if (\n                                    !data.Payment ||\n                                    !data.Payment.ExtendedData ||\n                                    data.Payment.ExtendedData.SignatureVerification !==\n                                        CardinalSignatureVerification.Yes\n                                ) {\n                                    return reject(\n                                        new PaymentMethodFailedError(\n                                            'Transaction signature could not be validated.',\n                                        ),\n                                    );\n                                }\n\n                                return resolve({ token: jwt });\n\n                            case CardinalValidatedAction.Failure:\n                                return reject(\n                                    new PaymentMethodFailedError(\n                                        'User failed authentication or an error was encountered while processing the transaction.',\n                                    ),\n                                );\n\n                            case CardinalValidatedAction.Error:\n                                return reject(new PaymentMethodFailedError(data.ErrorDescription));\n                        }\n                    },\n                );\n\n                const continueObject = {\n                    AcsUrl: threeDSecureData.acs_url,\n                    Payload: threeDSecureData.merchant_data,\n                };\n\n                const partialOrder = this._mapToPartialOrder(\n                    orderData,\n                    threeDSecureData.payer_auth_request,\n                );\n\n                client.continue(CardinalPaymentBrand.CCA, continueObject, partialOrder);\n            });\n        });\n    }\n\n    private _mapToPartialOrder(\n        orderData: CardinalOrderData,\n        transactionId: string,\n    ): CardinalPartialOrder {\n        const consumer: CardinalConsumer = {\n            BillingAddress: this._mapToCardinalAddress(orderData.billingAddress),\n        };\n\n        if (orderData.paymentData) {\n            consumer.Account = this._mapToCardinalAccount(orderData.paymentData);\n        }\n\n        if (orderData.billingAddress.email) {\n            consumer.Email1 = orderData.billingAddress.email;\n        }\n\n        if (orderData.shippingAddress) {\n            consumer.ShippingAddress = this._mapToCardinalAddress(orderData.shippingAddress);\n        }\n\n        return {\n            Consumer: consumer,\n            OrderDetails: {\n                OrderNumber: orderData.id,\n                Amount: orderData.amount,\n                CurrencyCode: orderData.currencyCode,\n                OrderChannel: 'S',\n                TransactionId: transactionId,\n            },\n        };\n    }\n\n    private _mapToCardinalAccount(paymentData: CreditCardInstrument): CardinalAccount {\n        return {\n            AccountNumber: Number(paymentData.ccNumber),\n            ExpirationMonth: Number(paymentData.ccExpiry.month),\n            ExpirationYear: Number(paymentData.ccExpiry.year),\n            NameOnAccount: paymentData.ccName,\n            CardCode: Number(paymentData.ccCvv),\n        };\n    }\n\n    private _mapToCardinalAddress(address: Address): CardinalAddress {\n        const cardinalAddress: CardinalAddress = {\n            FirstName: address.firstName,\n            LastName: address.lastName,\n            Address1: address.address1,\n            City: address.city,\n            State: address.stateOrProvince,\n            PostalCode: address.postalCode,\n            CountryCode: address.countryCode,\n        };\n\n        if (address.address2) {\n            cardinalAddress.Address2 = address.address2;\n        }\n\n        if (address.phone) {\n            cardinalAddress.Phone1 = address.phone;\n        }\n\n        return cardinalAddress;\n    }\n\n    private _getClientSDK(): Promise<CardinalSDK> {\n        if (!this._sdk) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        return this._sdk;\n    }\n}\n","import { ScriptLoader } from '@bigcommerce/script-loader';\n\nimport { PaymentMethodClientUnavailableError } from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { CardinalSDK, CardinalWindow } from './cardinal';\n\nconst SDK_TEST_URL = 'https://songbirdstag.cardinalcommerce.com/edge/v1/songbird.js';\nconst SDK_PROD_URL = 'https://songbird.cardinalcommerce.com/edge/v1/songbird.js';\n\nexport default class CardinalScriptLoader {\n    constructor(private _scriptLoader: ScriptLoader, private _window: CardinalWindow = window) {}\n\n    load(provider: string, testMode?: boolean): Promise<CardinalSDK> {\n        const url = testMode ? SDK_TEST_URL : SDK_PROD_URL;\n\n        return this._scriptLoader.loadScript(`${url}?v=${provider}`).then(() => {\n            if (!this._window.Cardinal) {\n                throw new PaymentMethodClientUnavailableError();\n            }\n\n            return this._window.Cardinal;\n        });\n    }\n}\n","import { CardinalThreeDSecureFlow } from '@bigcommerce/checkout-sdk/cardinal-integration';\nimport { CreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    OrderRequestBody,\n    PaymentInitializeOptions,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default class CyberSourcePaymentStrategy extends CreditCardPaymentStrategy {\n    constructor(\n        _paymentIntegrationService: PaymentIntegrationService,\n        private _threeDSecureFlow: CardinalThreeDSecureFlow,\n    ) {\n        super(_paymentIntegrationService);\n    }\n\n    async initialize(options: PaymentInitializeOptions): Promise<void> {\n        await super.initialize(options);\n\n        const { getPaymentMethodOrThrow } = this._paymentIntegrationService.getState();\n        const paymentMethod = getPaymentMethodOrThrow(options.methodId);\n\n        if (paymentMethod.config.is3dsEnabled) {\n            await this._threeDSecureFlow.prepare(paymentMethod);\n        }\n    }\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment: { methodId = '' } = {} } = payload;\n        const { getPaymentMethodOrThrow } = this._paymentIntegrationService.getState();\n        const paymentMethod = getPaymentMethodOrThrow(methodId);\n\n        if (paymentMethod.config.is3dsEnabled) {\n            return this._threeDSecureFlow.start(\n                super.execute.bind(this),\n                payload,\n                options,\n                this._hostedForm,\n            );\n        }\n\n        return super.execute(payload, options);\n    }\n}\n","import { getScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    CardinalClient,\n    CardinalScriptLoader,\n    CardinalThreeDSecureFlow,\n} from '@bigcommerce/checkout-sdk/cardinal-integration';\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CyberSourcePaymentStrategy from './cybersource-payment-strategy';\n\nconst createCyberSourcePaymentStrategy: PaymentStrategyFactory<CyberSourcePaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new CyberSourcePaymentStrategy(\n        paymentIntegrationService,\n        new CardinalThreeDSecureFlow(\n            paymentIntegrationService,\n            new CardinalClient(new CardinalScriptLoader(getScriptLoader())),\n        ),\n    );\n};\n\nexport default toResolvableModule(createCyberSourcePaymentStrategy, [{ id: 'cybersource' }]);\n","import { merge, some } from 'lodash';\n\nimport {\n    HostedForm,\n    isCreditCardInstrument,\n    isRequestError,\n    isVaultedInstrument,\n    OrderPaymentRequestBody,\n    OrderRequestBody,\n    PaymentIntegrationSelectors,\n    PaymentIntegrationService,\n    PaymentMethod,\n    PaymentRequestOptions,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport { CardinalThreeDSecureToken } from './cardinal';\nimport CardinalClient, { CardinalOrderData } from './cardinal-client';\n\nexport default class CardinalThreeDSecureFlowV2 {\n    constructor(\n        private _paymentIntegrationService: PaymentIntegrationService,\n        private _cardinalClient: CardinalClient,\n    ) {}\n\n    async prepare(method: PaymentMethod): Promise<void> {\n        await this._cardinalClient.load(method.id, method.config.testMode);\n    }\n\n    async start(\n        execute: PaymentStrategy['execute'],\n        payload: OrderRequestBody,\n        options?: PaymentRequestOptions,\n        hostedForm?: HostedForm,\n    ): Promise<void> {\n        const { getCardInstrument } = this._paymentIntegrationService.getState();\n        const { payment = { methodId: '' } } = payload;\n        const { paymentData = {} } = payment;\n\n        try {\n            return await execute(payload, options);\n        } catch (error) {\n            if (isRequestError(error) && error.body?.status === 'additional_action_required') {\n                const token = error.body.additional_action_required?.data?.token;\n                const xid = error.body.three_ds_result?.payer_auth_request;\n\n                await this._cardinalClient.configure(token);\n\n                const bin = this._getBin(paymentData, getCardInstrument, hostedForm);\n\n                if (bin) {\n                    await this._cardinalClient.runBinProcess(bin);\n                }\n\n                try {\n                    return await this._submitPayment(payment, { xid }, hostedForm);\n                } catch (err) {\n                    if (\n                        isRequestError(err) &&\n                        some(err.body.errors, { code: 'three_d_secure_required' })\n                    ) {\n                        const threeDsResult = err.body.three_ds_result;\n                        const threeDsToken = threeDsResult?.payer_auth_request;\n\n                        await this._cardinalClient.getThreeDSecureData(\n                            threeDsResult,\n                            this._getOrderData(),\n                        );\n\n                        return this._submitPayment(payment, { token: threeDsToken }, hostedForm);\n                    }\n\n                    throw err;\n                }\n            }\n\n            throw error;\n        }\n    }\n\n    private _getOrderData(): CardinalOrderData {\n        const store = this._paymentIntegrationService.getState();\n        const billingAddress = store.getBillingAddressOrThrow();\n        const shippingAddress = store.getShippingAddress();\n        const {\n            cart: {\n                currency: { code: currencyCode },\n                cartAmount: amount,\n            },\n        } = store.getCheckoutOrThrow();\n        const id = store.getOrderOrThrow().orderId.toString();\n\n        return { billingAddress, shippingAddress, currencyCode, id, amount };\n    }\n\n    private async _submitPayment(\n        payment: OrderPaymentRequestBody,\n        threeDSecure: CardinalThreeDSecureToken,\n        hostedForm?: HostedForm,\n    ): Promise<void> {\n        const paymentPayload = merge({}, payment, { paymentData: { threeDSecure } });\n\n        if (!hostedForm) {\n            await this._paymentIntegrationService.submitPayment(paymentPayload);\n        }\n\n        await hostedForm?.submit(paymentPayload);\n    }\n\n    private _getBin(\n        paymentData: NonNullable<OrderPaymentRequestBody['paymentData']>,\n        getCardInstrument: PaymentIntegrationSelectors['getCardInstrument'],\n        hostedForm?: HostedForm,\n    ): string {\n        const instrument =\n            isVaultedInstrument(paymentData) && getCardInstrument(paymentData.instrumentId);\n        const ccNumber = isCreditCardInstrument(paymentData) && paymentData.ccNumber;\n        const hostedFormBin = hostedForm ? hostedForm.getBin() : ccNumber;\n        const bin = instrument ? instrument.iin : hostedFormBin;\n\n        return bin || '';\n    }\n}\n","import isVaultedInstrument from './is-vaulted-instrument';\nimport { CreditCardInstrument } from './payment';\n\nexport default function isCreditCardInstrument(\n    instrument: unknown,\n): instrument is CreditCardInstrument {\n    const card = instrument as CreditCardInstrument;\n\n    return (\n        !isVaultedInstrument(card) &&\n        typeof card.ccName === 'string' &&\n        typeof card.ccNumber === 'string' &&\n        typeof card.ccExpiry === 'object' &&\n        typeof card.ccExpiry.month === 'string' &&\n        typeof card.ccExpiry.year === 'string'\n    );\n}\n","import { CardinalThreeDSecureFlowV2 } from '@bigcommerce/checkout-sdk/cardinal-integration';\nimport { CreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    OrderRequestBody,\n    PaymentInitializeOptions,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default class CyberSourceV2PaymentStrategy extends CreditCardPaymentStrategy {\n    constructor(\n        _paymentIntegrationService: PaymentIntegrationService,\n        private _threeDSecureFlow: CardinalThreeDSecureFlowV2,\n    ) {\n        super(_paymentIntegrationService);\n    }\n\n    async initialize(options: PaymentInitializeOptions): Promise<void> {\n        await super.initialize(options);\n\n        const { getPaymentMethodOrThrow } = this._paymentIntegrationService.getState();\n        const paymentMethod = getPaymentMethodOrThrow(options.methodId);\n\n        if (paymentMethod.config.is3dsEnabled) {\n            await this._threeDSecureFlow.prepare(paymentMethod);\n        }\n    }\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment: { methodId = '' } = {} } = payload;\n        const { getPaymentMethodOrThrow } = this._paymentIntegrationService.getState();\n        const paymentMethod = getPaymentMethodOrThrow(methodId);\n\n        if (paymentMethod.config.is3dsEnabled) {\n            return this._threeDSecureFlow.start(\n                super.execute.bind(this),\n                payload,\n                options,\n                this._hostedForm,\n            );\n        }\n\n        return super.execute(payload, options);\n    }\n}\n","import { getScriptLoader } from '@bigcommerce/script-loader';\n\nimport {\n    CardinalClient,\n    CardinalScriptLoader,\n    CardinalThreeDSecureFlowV2,\n} from '@bigcommerce/checkout-sdk/cardinal-integration';\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport CyberSourceV2PaymentStrategy from './cybersourcev2-payment-strategy';\n\nconst createCyberSourceV2PaymentStrategy: PaymentStrategyFactory<CyberSourceV2PaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new CyberSourceV2PaymentStrategy(\n        paymentIntegrationService,\n        new CardinalThreeDSecureFlowV2(\n            paymentIntegrationService,\n            new CardinalClient(new CardinalScriptLoader(getScriptLoader())),\n        ),\n    );\n};\n\nexport default toResolvableModule(createCyberSourceV2PaymentStrategy, [\n    { id: 'cybersourcev2' },\n    { id: 'bnz' },\n    { id: 'barclays' },\n]);\n","import BrowserInfo from './browser-info';\n\nexport default function getBrowserInfo(): BrowserInfo {\n    const { navigator } = window;\n\n    let language: string;\n\n    if (navigator.language) {\n        language = navigator.language;\n    } else {\n        language = (navigator as any).userLanguage;\n    }\n\n    return {\n        color_depth: window.screen.colorDepth || 24,\n        java_enabled: typeof navigator.javaEnabled === 'function' ? navigator.javaEnabled() : false,\n        language,\n        screen_height: window.screen.height,\n        screen_width: window.screen.width,\n        time_zone_offset: new Date().getTimezoneOffset().toString(),\n    };\n}\n","import { FormPoster } from '@bigcommerce/form-poster';\nimport { some } from 'lodash';\n\nimport { CreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/credit-card-integration';\nimport {\n    getBrowserInfo,\n    isRequestError,\n    MissingDataError,\n    MissingDataErrorType,\n    NotInitializedError,\n    NotInitializedErrorType,\n    OrderRequestBody,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStatusTypes,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default class SagePayPaymentStrategy extends CreditCardPaymentStrategy {\n    constructor(\n        private paymentIntegrationService: PaymentIntegrationService,\n        private _formPoster: FormPoster,\n    ) {\n        super(paymentIntegrationService);\n    }\n\n    execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        const { payment } = payload;\n\n        if (!payment) {\n            throw new NotInitializedError(NotInitializedErrorType.PaymentNotInitialized);\n        }\n\n        const { paymentData } = payment;\n\n        if (!paymentData) {\n            throw new MissingDataError(MissingDataErrorType.MissingPayment);\n        }\n\n        if (this._isThreeDSTwoExperimentOn()) {\n            const newPaymentData = {\n                ...paymentData,\n                browser_info: getBrowserInfo(),\n            };\n\n            if (payload.payment) {\n                payload.payment.paymentData = newPaymentData;\n            }\n        }\n\n        return super.execute(payload, options).catch((error: Error) => {\n            if (\n                !isRequestError(error) ||\n                !some(error.body.errors, { code: 'three_d_secure_required' })\n            ) {\n                return Promise.reject(error);\n            }\n\n            return new Promise(() => {\n                let payload;\n\n                if (this._isThreeDSTwoExperimentOn() && !error.body.three_ds_result.merchant_data) {\n                    payload = {\n                        creq: error.body.three_ds_result.payer_auth_request,\n                    };\n                } else {\n                    payload = {\n                        PaReq: error.body.three_ds_result.payer_auth_request,\n                        TermUrl: error.body.three_ds_result.callback_url,\n                        MD: error.body.three_ds_result.merchant_data,\n                    };\n                }\n\n                this._formPoster.postForm(\n                    error.body.three_ds_result.acs_url,\n                    payload,\n                    undefined,\n                    '_top',\n                );\n            });\n        });\n    }\n\n    finalize(options?: PaymentRequestOptions): Promise<void> {\n        const state = this.paymentIntegrationService.getState();\n        const order = state.getOrder();\n\n        if (order && state.getPaymentStatus() === PaymentStatusTypes.FINALIZE) {\n            this.paymentIntegrationService.finalizeOrder(options);\n        }\n\n        return super.finalize();\n    }\n\n    private _isThreeDSTwoExperimentOn(): boolean {\n        return (\n            this.paymentIntegrationService.getState().getStoreConfigOrThrow().checkoutSettings\n                .features['INT-4994.Opayo_3DS2'] === true\n        );\n    }\n}\n","import { createFormPoster } from '@bigcommerce/form-poster';\n\nimport {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport SagePayPaymentStrategy from './sage-pay-payment-strategy';\n\nconst createSagePayPaymentStrategy: PaymentStrategyFactory<SagePayPaymentStrategy> = (\n    paymentIntegrationService,\n) => {\n    return new SagePayPaymentStrategy(paymentIntegrationService, createFormPoster());\n};\n\nexport default toResolvableModule(createSagePayPaymentStrategy, [{ id: 'sagepay' }]);\n","import { createCBAMPGSPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/cba-mpgs';\nimport { createCreditCardPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/credit-card';\nimport { createCyberSourcePaymentStrategy, createCyberSourceV2PaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/cybersource';\nimport { createSagePayPaymentStrategy } from '@bigcommerce/checkout-sdk/integrations/sagepay';\nimport React, { type FunctionComponent, useCallback } from 'react';\n\nimport {\n    withHostedCreditCardFieldset,\n    type WithInjectedHostedCreditCardFieldsetProps,\n} from '../hostedCreditCard';\n\nimport CreditCardPaymentMethod, { type CreditCardPaymentMethodProps } from './CreditCardPaymentMethod';\n\nexport type HostedCreditCardPaymentMethodProps = Omit<\n    CreditCardPaymentMethodProps,\n    | 'cardFieldset'\n    | 'cardValidationSchema'\n    | 'storedCardValidationSchema'\n    | 'getStoredCardValidationFieldset'\n>;\n\nconst HostedCreditCardPaymentMethod: FunctionComponent<\n    HostedCreditCardPaymentMethodProps & WithInjectedHostedCreditCardFieldsetProps\n> = ({\n    getHostedFormOptions,\n    getHostedStoredCardValidationFieldset,\n    hostedFieldset,\n    hostedStoredCardValidationSchema,\n    hostedValidationSchema,\n    initializePayment,\n    ...rest\n}) => {\n    const initializeHostedCreditCardPayment: CreditCardPaymentMethodProps['initializePayment'] =\n        useCallback(\n            async (options, selectedInstrument) => {\n                return initializePayment({\n                    ...options,\n                    integrations: [\n                        ...options.integrations ?? [],\n                        createCreditCardPaymentStrategy,\n                        createCyberSourcePaymentStrategy,\n                        createCyberSourceV2PaymentStrategy,\n                        createSagePayPaymentStrategy,\n                        createCBAMPGSPaymentStrategy,\n                    ],\n                    creditCard: getHostedFormOptions && {\n                        form: await getHostedFormOptions(selectedInstrument),\n                    },\n                });\n            },\n            [getHostedFormOptions, initializePayment],\n        );\n\n    return (\n        <CreditCardPaymentMethod\n            {...rest}\n            cardFieldset={hostedFieldset}\n            cardValidationSchema={hostedValidationSchema}\n            getStoredCardValidationFieldset={getHostedStoredCardValidationFieldset}\n            initializePayment={initializeHostedCreditCardPayment}\n            storedCardValidationSchema={hostedStoredCardValidationSchema}\n        />\n    );\n};\n\nexport default withHostedCreditCardFieldset(HostedCreditCardPaymentMethod);\n"],"names":["method","checkoutService","checkoutState","paymentForm","language","onUnhandledError","id","gateway","NotInitializedErrorType","StandardError","Error","constructor","message","prototype","super","name","type","Object","setPrototypeOf","this","__proto__","captureStackTrace","stack","InvalidArgumentError","OrderFinalizationNotRequiredError","PaymentArgumentInvalidError","invalidFields","join","CheckoutButtonNotInitialized","CustomerNotInitialized","PaymentNotInitialized","ShippingNotInitialized","SpamProtectionNotInitialized","NotInitializedError","subtype","MissingDataErrorType","CreditCardPaymentStrategy","_paymentIntegrationService","execute","payload","options","_isHostedPaymentFormEnabled","payment","methodId","gatewayId","_shouldRenderHostedForm","_executeWithHostedForm","_executeWithoutHostedForm","initialize","_isHostedFieldAvailable","Promise","resolve","formOptions","creditCard","form","state","getState","paymentSettings","bigpayBaseUrl","host","getStoreConfigOrThrow","createHostedForm","attach","then","_hostedForm","deinitialize","detach","finalize","reject","order","paymentData","submitOrder","submitPayment","validate","submit","getPaymentMethodOrThrow","config","isHostedFormEnabled","values","fields","every","isNil","MissingBillingAddress","MissingCart","MissingCheckout","MissingConsignments","MissingCustomer","MissingCheckoutConfig","MissingOrder","MissingOrderConfig","MissingOrderId","MissingPayment","MissingPaymentId","MissingPaymentInstrument","MissingPaymentMethod","MissingPaymentRedirectUrl","MissingPaymentStatus","MissingPaymentToken","MissingShippingAddress","MissingDataError","PaymentMethodFailedError","DEFAULT_RESPONSE","body","headers","status","RequestError","response","errors","PaymentStatusTypes","ACKNOWLEDGE","FINALIZE","INITIALIZE","CBAMPGSPaymentStrategy","paymentIntegrationService","cbaMGPSScriptLoader","sessionId","loadPaymentMethod","paymentMethod","initializationData","merchantId","isTestModeFlagEnabled","clientToken","is3dsEnabled","threeDSjs","load","locale","getLocale","configure","callback","isConfigured","configuration","userLanguage","wsVersion","newPaymentData","threeDSecure","token","catch","error","some","code","retryState","getOrder","storeProfile","storeId","orderId","three_ds_result","transactionId","initiateAuthentication","getPaymentStatus","finalizeOrder","data","msg","gatewayRecommendation","restApiResponse","transaction","authenticationStatus","authenticatePayer","attempt","_resolve","cause","setTimeout","noop","fullScreenRedirect","PaymentMethodClientUnavailableError","CBAMPGSScriptLoader","_scriptLoader","_window","window","testMode","loadScript","ThreeDS","module","getScriptLoader","resolveIds","assign","__webpack_require__","isVaultedInstrument","instrument","Boolean","instrumentId","d","exports","definition","key","o","defineProperty","enumerable","get","obj","prop","hasOwnProperty","call","CardinalThreeDSecureFlow","_cardinalClient","prepare","_getClientToken","start","hostedForm","getCardInstrument","bin","iin","getBin","runBinProcess","merge","getThreeDSecureData","_getOrderData","billingAddress","getBillingAddressOrThrow","shippingAddress","getShippingAddress","checkout","getCheckoutOrThrow","getOrderOrThrow","currencyCode","cart","currency","toString","amount","cartAmount","CardinalSignatureValidationErrors","CardinalEventType","CardinalInitializationType","CardinalValidatedAction","CardinalPaymentType","CardinalTriggerEvents","CardinalPaymentBrand","CardinalSignatureVerification","SetupCompleted","Validated","Init","Complete","Confirm","Success","NoAction","Failure","CCA","Paypal","Wallet","VisaCheckout","ApplePay","DiscoverWallet","BinProcess","Yes","No","CardinalClient","_provider","_testMode","_configurationToken","provider","_sdk","Date","now","_getClientSDK","client","on","off","ActionCode","includes","ErrorNumber","ErrorDescription","setup","jwt","binNumber","trigger","result","Status","threeDSecureData","orderData","Payment","ExtendedData","SignatureVerification","continueObject","AcsUrl","acs_url","Payload","merchant_data","partialOrder","_mapToPartialOrder","payer_auth_request","continue","consumer","BillingAddress","_mapToCardinalAddress","Account","_mapToCardinalAccount","email","Email1","ShippingAddress","Consumer","OrderDetails","OrderNumber","Amount","CurrencyCode","OrderChannel","TransactionId","AccountNumber","Number","ccNumber","ExpirationMonth","ccExpiry","month","ExpirationYear","year","NameOnAccount","ccName","CardCode","ccCvv","address","cardinalAddress","FirstName","firstName","LastName","lastName","Address1","address1","City","city","State","stateOrProvince","PostalCode","postalCode","CountryCode","countryCode","address2","Address2","phone","Phone1","CardinalScriptLoader","url","Cardinal","toResolvableModule","CyberSourcePaymentStrategy","_threeDSecureFlow","bind","CardinalThreeDSecureFlowV2","additional_action_required","xid","_getBin","_submitPayment","err","threeDsResult","threeDsToken","store","paymentPayload","card","hostedFormBin","CyberSourceV2PaymentStrategy","getBrowserInfo","navigator","color_depth","screen","colorDepth","java_enabled","javaEnabled","screen_height","height","screen_width","width","time_zone_offset","getTimezoneOffset","SagePayPaymentStrategy","_formPoster","_isThreeDSTwoExperimentOn","browser_info","creq","PaReq","TermUrl","callback_url","MD","postForm","checkoutSettings","features","createFormPoster","withHostedCreditCardFieldset","getHostedFormOptions","getHostedStoredCardValidationFieldset","hostedFieldset","hostedStoredCardValidationSchema","hostedValidationSchema","initializePayment","rest","initializeHostedCreditCardPayment","useCallback","selectedInstrument","integrations","CreditCardPaymentMethod","cardFieldset","cardValidationSchema","getStoredCardValidationFieldset","storedCardValidationSchema"],"sourceRoot":""}