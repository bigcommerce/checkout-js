{"version":3,"file":"805-337971cb.js","mappings":"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","sources":["webpack://checkout/./packages/core/src/app/cart/mapToRedeemableProps.ts","webpack://checkout/./packages/ui/src/icon/IconClose.tsx","webpack://checkout/./packages/ui/src/modal/Modal.tsx","webpack://checkout/./packages/ui/src/button/Button.tsx","webpack://checkout/./packages/ui/src/modal/ModalHeader.tsx","webpack://checkout/./packages/core/src/app/coupon/AppliedCoupon.tsx","webpack://checkout/./packages/core/src/app/giftCertificate/AppliedGiftCertificate.tsx","webpack://checkout/./packages/core/src/app/ui/icon/IconRemove.tsx","webpack://checkout/./packages/core/src/app/cart/AppliedRedeemable.tsx","webpack://checkout/./packages/core/src/app/cart/AppliedRedeemables.tsx","webpack://checkout/./packages/core/src/app/cart/Redeemable.tsx"],"sourcesContent":["import { CheckoutContextProps } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { EMPTY_ARRAY } from '../common/utility';\n\nimport { RedeemableProps } from './Redeemable';\n\nexport default function mapToRedeemableProps(\n    context: CheckoutContextProps,\n): RedeemableProps | null {\n    const {\n        checkoutService,\n        checkoutState: {\n            data: { getConfig, getCoupons, getGiftCertificates },\n            statuses: {\n                isApplyingCoupon,\n                isApplyingGiftCertificate,\n                isRemovingCoupon,\n                isRemovingGiftCertificate,\n            },\n            errors: {\n                getApplyCouponError,\n                getApplyGiftCertificateError,\n                getRemoveCouponError,\n                getRemoveGiftCertificateError,\n            },\n        },\n    } = context;\n\n    const config = getConfig();\n\n    if (!config) {\n        return null;\n    }\n\n    return {\n        appliedRedeemableError: getApplyCouponError() || getApplyGiftCertificateError(),\n        applyCoupon: checkoutService.applyCoupon,\n        applyGiftCertificate: checkoutService.applyGiftCertificate,\n        clearError: checkoutService.clearError,\n        coupons: getCoupons() || EMPTY_ARRAY,\n        giftCertificates: getGiftCertificates() || EMPTY_ARRAY,\n        isApplyingRedeemable: isApplyingCoupon() || isApplyingGiftCertificate(),\n        isRemovingCoupon: isRemovingCoupon(),\n        isRemovingGiftCertificate: isRemovingGiftCertificate(),\n        onRemovedCoupon: checkoutService.removeCoupon,\n        onRemovedGiftCertificate: checkoutService.removeGiftCertificate,\n        removedRedeemableError: getRemoveCouponError() || getRemoveGiftCertificateError(),\n        shouldCollapseCouponCode: config.checkoutSettings.isCouponCodeCollapsed,\n    };\n}\n","import React, { FunctionComponent } from 'react';\n\nimport withIconContainer from './withIconContainer';\n\nconst IconClose: FunctionComponent = () => (\n    <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\" />\n    </svg>\n);\n\nexport default withIconContainer(IconClose);\n","import classNames from 'classnames';\nimport { noop } from 'lodash';\nimport React, { FunctionComponent, KeyboardEvent, MouseEvent, ReactNode, useCallback } from 'react';\nimport ReactModal from 'react-modal';\nimport { Omit } from 'utility-types';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\n\nimport { IconClose } from '../icon';\n\nexport type ModalProps = Omit<\n    ReactModal.Props,\n    'bodyOpenClassName' | 'className' | 'closeTimeoutMS' | 'overlayClassName'\n> & {\n    children: ReactNode;\n    closeButtonLabel?: string | ReactNode;\n    footer?: ReactNode;\n    header?: ReactNode;\n    additionalHeaderClassName?: string;\n    additionalBodyClassName?: string;\n    additionalModalClassName?: string;\n    shouldShowCloseButton?: boolean;\n};\n\nconst Modal: FunctionComponent<ModalProps> = ({\n    children,\n    closeButtonLabel = 'Close',\n    footer,\n    header,\n    additionalHeaderClassName,\n    additionalBodyClassName,\n    additionalModalClassName,\n    onRequestClose = noop,\n    shouldShowCloseButton = false,\n    ...rest\n}) => {\n    const handleClose = useCallback(\n        (event: MouseEvent | KeyboardEvent) => {\n            onRequestClose(event);\n        },\n        [onRequestClose],\n    );\n\n    return (\n        <ReactModal\n            {...rest}\n            ariaHideApp={process.env.NODE_ENV !== 'test'}\n            bodyOpenClassName=\"has-activeModal\"\n            className={{\n                base: classNames(\n                    'modal optimizedCheckout-contentPrimary',\n                    additionalModalClassName,\n                ),\n                afterOpen: 'modal--afterOpen',\n                beforeClose: 'modal--beforeClose',\n            }}\n            closeTimeoutMS={200}\n            onRequestClose={onRequestClose}\n            overlayClassName={{\n                base: 'modalOverlay',\n                afterOpen: 'modalOverlay--afterOpen',\n                beforeClose: 'modalOverlay--beforeClose',\n            }}\n            shouldCloseOnEsc={true}\n            shouldCloseOnOverlayClick={false}\n        >\n            <div className={classNames('modal-header', additionalHeaderClassName)}>\n                {header}\n\n                {shouldShowCloseButton && (\n                    <a\n                        className=\"modal-close\"\n                        data-test=\"modal-close-button\"\n                        href=\"#\"\n                        onClick={preventDefault(handleClose)}\n                    >\n                        {closeButtonLabel && <span className=\"is-srOnly\">{closeButtonLabel}</span>}\n\n                        <IconClose />\n                    </a>\n                )}\n            </div>\n\n            <div\n                className={classNames('modal-body', additionalBodyClassName)}\n                data-test=\"modal-body\"\n            >\n                {children}\n            </div>\n\n            {Boolean(footer) && (\n                <div className=\"modal-footer\" data-test=\"modal-footer\">\n                    {footer}\n                </div>\n            )}\n        </ReactModal>\n    );\n};\n\nexport default Modal;\n","import classNames from 'classnames';\nimport React, { ButtonHTMLAttributes, FunctionComponent } from 'react';\n\nexport interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {\n    isFullWidth?: boolean;\n    isLoading?: boolean;\n    size?: ButtonSize;\n    testId?: string;\n    variant?: ButtonVariant;\n}\n\nexport enum ButtonVariant {\n    Primary = 'primary',\n    Secondary = 'secondary',\n    Action = 'action',\n}\n\nexport enum ButtonSize {\n    Small = 'small',\n    Tiny = 'tiny',\n    Large = 'large',\n}\n\nfunction getClassName(\n    props: Pick<ButtonProps, 'className' | 'isFullWidth' | 'isLoading' | 'size' | 'variant'>,\n) {\n    const { className, isFullWidth, isLoading, size, variant } = props;\n\n    return classNames(\n        'button',\n        className,\n        { 'button--primary': variant === ButtonVariant.Primary },\n        { 'button--tertiary': variant === ButtonVariant.Secondary },\n        { 'button--action': variant === ButtonVariant.Action },\n        { 'button--small': size === ButtonSize.Small },\n        { 'button--tiny': size === ButtonSize.Tiny },\n        { 'button--large': size === ButtonSize.Large },\n        { 'button--slab': isFullWidth },\n        {\n            'optimizedCheckout-buttonPrimary':\n                variant === ButtonVariant.Primary || variant === ButtonVariant.Action,\n        },\n        { 'optimizedCheckout-buttonSecondary': variant === ButtonVariant.Secondary },\n        { 'is-loading': isLoading },\n    );\n}\n\nconst Button: FunctionComponent<ButtonProps> = ({\n    children,\n    className,\n    disabled,\n    isFullWidth,\n    isLoading,\n    size,\n    testId,\n    type,\n    variant,\n    ...rest\n}) => (\n    <button\n        {...rest}\n        className={getClassName({ className, isFullWidth, isLoading, size, variant })}\n        data-test={testId}\n        disabled={disabled || isLoading}\n        type={type || 'button'}\n    >\n        {children}\n    </button>\n);\n\nexport default Button;\n","import classNames from 'classnames';\nimport React, { FunctionComponent } from 'react';\n\ninterface ModalHeaderProps {\n    children: React.ReactNode;\n    additionalClassName?: string;\n}\n\nconst ModalHeader: FunctionComponent<ModalHeaderProps> = ({ children, additionalClassName }) => (\n    <h2\n        className={classNames(\n            'modal-header-title optimizedCheckout-headingSecondary',\n            additionalClassName,\n        )}\n        data-test=\"modal-heading\"\n    >\n        {children}\n    </h2>\n);\n\nexport default ModalHeader;\n","import { Coupon } from '@bigcommerce/checkout-sdk';\nimport React, { FunctionComponent, memo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nexport interface AppliedCouponProps {\n    coupon: Coupon;\n}\n\nconst AppliedCoupon: FunctionComponent<AppliedCouponProps> = ({ coupon }) => (\n    <div className=\"redeemable-column redeemable-info\" data-test=\"redeemable-item--coupon\">\n        <span className=\"redeemable-info-header\">\n            <span className=\"redeemable-info-header--highlight\" data-test=\"coupon-amount\">\n                {coupon.displayName}\n            </span>{' '}\n            <TranslatedString id=\"redeemable.coupon_text\" />\n        </span>\n\n        <span className=\"redeemable-info-subHeader\" data-test=\"coupon-code\">\n            {coupon.code}\n        </span>\n    </div>\n);\n\nexport default memo(AppliedCoupon);\n","import { GiftCertificate } from '@bigcommerce/checkout-sdk';\nimport React, { FunctionComponent, memo } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { ShopperCurrency } from '../currency';\n\nexport interface AppliedGiftCertificateProps {\n    giftCertificate: GiftCertificate;\n}\n\nconst AppliedGiftCertificate: FunctionComponent<AppliedGiftCertificateProps> = ({\n    giftCertificate,\n}) => (\n    <div className=\"redeemable-column redeemable-info\" data-test=\"redeemable-item--giftCertificate\">\n        <span className=\"redeemable-info-header\">\n            <span className=\"redeemable-info-header--highlight\" data-test=\"giftCertificate-amount\">\n                <ShopperCurrency amount={giftCertificate.used} />\n            </span>{' '}\n            <TranslatedString id=\"redeemable.gift_certificate_text\" />\n        </span>\n\n        <span className=\"redeemable-info-subHeader\">\n            {giftCertificate.remaining > 0 && (\n                <span className=\"redeemable-info-subHeader--remaining\">\n                    <TranslatedString id=\"redeemable.gift_certificate_remaining_text\" />{' '}\n                    <span data-test=\"giftCertificate-remaining\">\n                        <ShopperCurrency amount={giftCertificate.remaining} />\n                    </span>\n                </span>\n            )}\n\n            <span data-test=\"giftCertificate-code\">{giftCertificate.code}</span>\n        </span>\n    </div>\n);\n\nexport default memo(AppliedGiftCertificate);\n","import React, { FunctionComponent } from 'react';\n\nimport withIconContainer from './withIconContainer';\n\nconst IconRemove: FunctionComponent = () => (\n    <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\" />\n    </svg>\n);\n\nexport default withIconContainer(IconRemove);\n","import classNames from 'classnames';\nimport React, { FunctionComponent } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { IconRemove } from '../ui/icon';\n\nimport './AppliedRedeemable.scss';\n\nexport interface AppliedRedeemableProps {\n    isRemoving: boolean;\n    onRemove(): void;\n}\n\nconst AppliedRedeemable: FunctionComponent<AppliedRedeemableProps> = ({\n    children,\n    isRemoving,\n    onRemove,\n}) => (\n    <div className=\"form-checklist-header\">\n        <div className=\"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox\">\n            <span className=\"is-srOnly\">\n                <TranslatedString id=\"redeemable.applied_text\" />\n            </span>\n        </div>\n\n        <div className=\"form-label form-label-redeemable\">\n            <div className=\"redeemable\">\n                {children}\n                <div className=\"redeemable-column redeemable-actions\">\n                    <button\n                        className={classNames('redeemable-remove', { 'is-loading': isRemoving })}\n                        data-test=\"redeemable-remove\"\n                        disabled={isRemoving}\n                        onClick={onRemove}\n                        type=\"button\"\n                    >\n                        <IconRemove />\n                    </button>\n                </div>\n            </div>\n        </div>\n    </div>\n);\n\nexport default AppliedRedeemable;\n","import { Coupon, GiftCertificate } from '@bigcommerce/checkout-sdk';\nimport React, { FunctionComponent, memo, useCallback } from 'react';\n\nimport { AppliedCoupon } from '../coupon';\nimport { AppliedGiftCertificate } from '../giftCertificate';\n\nimport AppliedRedeemable from './AppliedRedeemable';\n\ninterface AppliedCouponProps {\n    coupon: Coupon;\n    isRemoving?: boolean;\n    onRemoved(code: string): void;\n}\n\nconst AppliedCouponChecklistItem: FunctionComponent<AppliedCouponProps> = ({\n    coupon,\n    onRemoved,\n    isRemoving = false,\n}) => {\n    const handleRemove = useCallback(() => {\n        onRemoved(coupon.code);\n    }, [coupon, onRemoved]);\n\n    return (\n        <li className=\"form-checklist-item optimizedCheckout-form-checklist-item\">\n            <AppliedRedeemable isRemoving={isRemoving} onRemove={handleRemove}>\n                <AppliedCoupon coupon={coupon} />\n            </AppliedRedeemable>\n        </li>\n    );\n};\n\ninterface AppliedGiftCertificateProps {\n    giftCertificate: GiftCertificate;\n    isRemoving?: boolean;\n    onRemoved(code: string): void;\n}\n\nconst AppliedGiftCertificateChecklistItem: FunctionComponent<AppliedGiftCertificateProps> = ({\n    giftCertificate,\n    onRemoved,\n    isRemoving = false,\n}) => {\n    const handleRemove = useCallback(() => {\n        onRemoved(giftCertificate.code);\n    }, [giftCertificate, onRemoved]);\n\n    return (\n        <li className=\"form-checklist-item optimizedCheckout-form-checklist-item\">\n            <AppliedRedeemable isRemoving={isRemoving} onRemove={handleRemove}>\n                <AppliedGiftCertificate giftCertificate={giftCertificate} />\n            </AppliedRedeemable>\n        </li>\n    );\n};\n\nexport interface AppliedRedeemablesProps {\n    coupons?: Coupon[];\n    giftCertificates?: GiftCertificate[];\n    isRemovingGiftCertificate?: boolean;\n    isRemovingCoupon?: boolean;\n    onRemovedCoupon(code: string): void;\n    onRemovedGiftCertificate(code: string): void;\n}\n\nconst AppliedRedeemables: FunctionComponent<AppliedRedeemablesProps> = ({\n    coupons = [],\n    giftCertificates = [],\n    isRemovingCoupon = false,\n    isRemovingGiftCertificate = false,\n    onRemovedCoupon,\n    onRemovedGiftCertificate,\n}) => {\n    if (!coupons.length && !giftCertificates.length) {\n        return null;\n    }\n\n    return (\n        <ul\n            className=\"form-checklist optimizedCheckout-form-checklist\"\n            data-test=\"redeemables-list\"\n        >\n            {coupons.map((coupon) => (\n                <AppliedCouponChecklistItem\n                    coupon={coupon}\n                    isRemoving={isRemovingCoupon}\n                    key={coupon.code}\n                    onRemoved={onRemovedCoupon}\n                />\n            ))}\n\n            {giftCertificates.map((giftCertificate) => (\n                <AppliedGiftCertificateChecklistItem\n                    giftCertificate={giftCertificate}\n                    isRemoving={isRemovingGiftCertificate}\n                    key={giftCertificate.code}\n                    onRemoved={onRemovedGiftCertificate}\n                />\n            ))}\n        </ul>\n    );\n};\n\nexport default memo(AppliedRedeemables);\n","import { CheckoutSelectors, RequestError } from '@bigcommerce/checkout-sdk';\nimport { memoizeOne } from '@bigcommerce/memoize';\nimport { FieldProps, FormikProps, withFormik } from 'formik';\nimport { noop } from 'lodash';\nimport React, { FunctionComponent, KeyboardEvent, memo, useCallback } from 'react';\nimport { object, string } from 'yup';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString, withLanguage, WithLanguageProps } from '@bigcommerce/checkout/locale';\nimport { useCheckout } from '@bigcommerce/checkout/payment-integration-api';\nimport { FormContextType, FormProvider } from '@bigcommerce/checkout/ui';\n\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { FormField, Label, TextInput } from '../ui/form';\nimport { Toggle } from '../ui/toggle';\n\nimport AppliedRedeemables, { AppliedRedeemablesProps } from './AppliedRedeemables';\n\nexport interface RedeemableFormValues {\n    redeemableCode: string;\n}\n\nexport type ReedemableChildrenProps = Pick<\n    RedeemableProps,\n    | 'onRemovedCoupon'\n    | 'onRemovedGiftCertificate'\n    | 'isRemovingGiftCertificate'\n    | 'isRemovingCoupon'\n    | 'coupons'\n    | 'giftCertificates'\n>;\n\nexport type RedeemableProps = {\n    appliedRedeemableError?: RequestError;\n    isApplyingRedeemable?: boolean;\n    isRemovingRedeemable?: boolean;\n    removedRedeemableError?: RequestError;\n    showAppliedRedeemables?: boolean;\n    shouldCollapseCouponCode?: boolean;\n    applyCoupon(code: string): Promise<CheckoutSelectors>;\n    applyGiftCertificate(code: string): Promise<CheckoutSelectors>;\n    clearError(error: Error): void;\n} & AppliedRedeemablesProps;\n\nconst Redeemable: FunctionComponent<\n    RedeemableProps & WithLanguageProps & FormikProps<RedeemableFormValues>\n> = ({ shouldCollapseCouponCode, showAppliedRedeemables, ...formProps }) => (\n    <Toggle openByDefault={!shouldCollapseCouponCode}>\n        {({ toggle, isOpen }) => (\n            <>\n                {shouldCollapseCouponCode && (\n                    <a\n                        aria-controls=\"redeemable-collapsable\"\n                        aria-expanded={isOpen}\n                        className=\"redeemable-label\"\n                        data-test=\"redeemable-label\"\n                        href=\"#\"\n                        onClick={preventDefault(toggle)}\n                    >\n                        <TranslatedString id=\"redeemable.toggle_action\" />\n                    </a>\n                )}\n                {!shouldCollapseCouponCode && (\n                    <div className=\"redeemable-label\">\n                        <TranslatedString id=\"redeemable.toggle_action\" />\n                    </div>\n                )}\n                {(isOpen || !shouldCollapseCouponCode) && (\n                    <div data-test=\"redeemable-collapsable\" id=\"redeemable-collapsable\">\n                        <RedeemableForm {...formProps} />\n                        {showAppliedRedeemables && <AppliedRedeemables {...formProps} />}\n                    </div>\n                )}\n            </>\n        )}\n    </Toggle>\n);\n\nconst RedeemableForm: FunctionComponent<\n    Partial<RedeemableProps> & FormikProps<RedeemableFormValues> & WithLanguageProps\n> = ({ appliedRedeemableError, isApplyingRedeemable, clearError = noop, submitForm, language }) => {\n    const {\n        checkoutState: {\n            statuses: { isSubmittingOrder }\n        }\n    } = useCheckout();\n\n    const handleSubmitForm = (setSubmitted: FormContextType['setSubmitted']) => {\n        if (isSubmittingOrder()) {\n            return;\n        }\n\n        setSubmitted(true);\n        submitForm();\n    }\n\n    const handleKeyDown = useCallback(\n        memoizeOne((setSubmitted: FormContextType['setSubmitted']) => (event: KeyboardEvent) => {\n            if (appliedRedeemableError) {\n                clearError(appliedRedeemableError);\n            }\n\n            // note: to prevent submitting main form, we manually intercept\n            // the enter key event and submit the \"subform\".\n            if (event.keyCode === 13 || event.key === 'Enter') {\n                handleSubmitForm(setSubmitted);\n                event.preventDefault();\n            }\n        }),\n        [appliedRedeemableError, clearError, submitForm],\n    );\n\n    const handleSubmit = useCallback(\n        memoizeOne((setSubmitted: FormContextType['setSubmitted']) => () => {\n            handleSubmitForm(setSubmitted);\n        }),\n        [],\n    );\n\n    const renderLabel = useCallback(\n        (name: string) => (\n            <Label hidden htmlFor={name}>\n                <TranslatedString id=\"redeemable.code_label\" />\n            </Label>\n        ),\n        [],\n    );\n\n    const renderErrorMessage = useCallback((errorCode: string, errorMessage?: string) => {\n        switch (errorCode) {\n            case 'min_purchase':\n                return <TranslatedString id=\"redeemable.coupon_min_order_total\" />;\n\n            case 'not_applicable':\n                return <TranslatedString id=\"redeemable.coupon_location_error\" />;\n\n            default:\n                return errorMessage || <TranslatedString id=\"redeemable.code_invalid_error\" />;\n        }\n    }, []);\n\n    const renderInput = useCallback(\n        (setSubmitted: FormContextType['setSubmitted']) =>\n            ({ field }: FieldProps) =>\n                (\n                    <>\n                        {appliedRedeemableError &&\n                            appliedRedeemableError.errors &&\n                            appliedRedeemableError.errors[0] && (\n                                <Alert type={AlertType.Error}>\n                                    {renderErrorMessage(appliedRedeemableError.errors[0].code, appliedRedeemableError.errors[0].message)}\n                                </Alert>\n                            )}\n\n                        <div className=\"form-prefixPostfix\">\n                            <TextInput\n                                {...field}\n                                aria-label={language.translate('redeemable.code_label')}\n                                className=\"form-input optimizedCheckout-form-input\"\n                                onKeyDown={handleKeyDown(setSubmitted)}\n                                testId=\"redeemableEntry-input\"\n                            />\n\n                            <Button\n                                className=\"form-prefixPostfix-button--postfix\"\n                                disabled={isSubmittingOrder()}\n                                id=\"applyRedeemableButton\"\n                                isLoading={isApplyingRedeemable}\n                                onClick={handleSubmit(setSubmitted)}\n                                testId=\"redeemableEntry-submit\"\n                                variant={ButtonVariant.Secondary}\n                            >\n                                <TranslatedString id=\"redeemable.apply_action\" />\n                            </Button>\n                        </div>\n                    </>\n                ),\n        [\n            appliedRedeemableError,\n            handleKeyDown,\n            handleSubmit,\n            isApplyingRedeemable,\n            language,\n            isSubmittingOrder,\n            renderErrorMessage,\n        ],\n    );\n\n    const renderContent = useCallback(\n        memoizeOne(({ setSubmitted }: FormContextType) => (\n            <FormField\n                input={renderInput(setSubmitted)}\n                label={renderLabel}\n                name=\"redeemableCode\"\n            />\n        )),\n        [renderLabel, renderInput],\n    );\n\n    return (\n        <fieldset className=\"form-fieldset redeemable-entry\">\n            <FormProvider>{renderContent}</FormProvider>\n        </fieldset>\n    );\n};\n\nexport default withLanguage(\n    withFormik<RedeemableProps & WithLanguageProps, RedeemableFormValues>({\n        mapPropsToValues() {\n            return {\n                redeemableCode: '',\n            };\n        },\n\n        async handleSubmit(\n            { redeemableCode },\n            { props: { applyCoupon, applyGiftCertificate, clearError } },\n        ) {\n            const code = redeemableCode.trim();\n\n            try {\n                await applyGiftCertificate(code);\n            } catch (error) {\n                if (error instanceof Error) {\n                    clearError(error);\n                }\n\n                applyCoupon(code);\n            }\n        },\n\n        validationSchema({ language }: RedeemableProps & WithLanguageProps) {\n            return object({\n                redeemableCode: string().required(\n                    language.translate('redeemable.code_required_error'),\n                ),\n            });\n        },\n    })(memo(Redeemable)),\n);\n"],"names":["mapToRedeemableProps","context","checkoutService","data","getConfig","getCoupons","getGiftCertificates","statuses","isApplyingCoupon","isApplyingGiftCertificate","isRemovingCoupon","isRemovingGiftCertificate","errors","getApplyCouponError","getApplyGiftCertificateError","getRemoveCouponError","getRemoveGiftCertificateError","config","appliedRedeemableError","applyCoupon","applyGiftCertificate","clearError","coupons","giftCertificates","isApplyingRedeemable","onRemovedCoupon","removeCoupon","onRemovedGiftCertificate","removeGiftCertificate","removedRedeemableError","shouldCollapseCouponCode","checkoutSettings","isCouponCodeCollapsed","height","viewBox","width","xmlns","d","children","closeButtonLabel","footer","header","additionalHeaderClassName","additionalBodyClassName","additionalModalClassName","onRequestClose","noop","shouldShowCloseButton","rest","handleClose","useCallback","event","ariaHideApp","bodyOpenClassName","className","base","afterOpen","beforeClose","closeTimeoutMS","overlayClassName","shouldCloseOnEsc","shouldCloseOnOverlayClick","href","onClick","preventDefault","Boolean","ButtonVariant","ButtonSize","getClassName","props","isFullWidth","isLoading","size","variant","Primary","Secondary","Action","Small","Tiny","Large","disabled","testId","type","additionalClassName","memo","coupon","displayName","TranslatedString","id","code","giftCertificate","ShopperCurrency","amount","used","remaining","isRemoving","onRemove","AppliedCouponChecklistItem","onRemoved","handleRemove","AppliedGiftCertificateChecklistItem","length","map","key","RedeemableForm","submitForm","language","isSubmittingOrder","handleSubmitForm","setSubmitted","handleKeyDown","memoizeOne","keyCode","handleSubmit","renderLabel","name","Label","hidden","htmlFor","renderErrorMessage","errorCode","errorMessage","renderInput","field","Alert","A","Error","message","TextInput","translate","onKeyDown","Button","renderContent","FormField","input","label","withLanguage","mapPropsToValues","redeemableCode","trim","validationSchema","required","showAppliedRedeemables","formProps","Toggle","openByDefault","toggle","isOpen"],"sourceRoot":""}