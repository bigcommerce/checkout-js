"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[3843],{31698:(e,t,a)=>{a.d(t,{A:()=>m});var n=a(31635),r=a(44218),i=a(69440),o=a(70355),s=a(65685),l=a(94611),c=a(11474),d=a(40646),u=a(91182);const m=e=>{const{description:t,isInitializing:a=!1,initializePayment:m,method:y,onUnhandledError:h=i.noop,deinitializePayment:p}=e,[g,b]=(0,o.useState)(!1),[f,v]=(0,o.useState)(),_=function(e){const t=(0,r.B4)(((e=[])=>e.filter(s.A))),a=(0,r.B4)(((e=[])=>e.filter((({trustedShippingAddress:e})=>e)))),{checkoutService:n,checkoutState:i,isUsingMultiShipping:o=!1,method:c}=e,{data:{getCart:d,getConfig:u,getCustomer:m,getInstruments:y,isPaymentDataRequired:h,isPaymentDataSubmitted:p},statuses:{isLoadingInstruments:g}}=i,b=d(),f=u(),v=m();if(!f||!b||!v)throw new Error("Unable to get checkout");const _=t(y(c)),E=a(_);return{instruments:E,isNewAddress:0===E.length&&_.length>0,isInstrumentFeatureAvailable:!p(c.id,c.gateway)&&(0,l.A)({config:f,customer:v,isUsingMultiShipping:o,paymentMethod:c}),isLoadingInstruments:g(),isPaymentDataRequired:h(),loadInstruments:n.loadInstruments}}(e),{isLoadingInstruments:E,instruments:N,isNewAddress:I,isInstrumentFeatureAvailable:S,loadInstruments:C}=_,w=(0,o.useCallback)((()=>{if(!g&&N.length)return(0,i.find)(N,{defaultInstrument:!0})||N[0]}),[g,N]),A=(0,o.useCallback)((()=>{b(!0),v(void 0)}),[]),k=(0,o.useCallback)((e=>{b(!1),v((0,i.find)(N,{bigpayToken:e}))}),[N]);(0,o.useEffect)((()=>((0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield m({gatewayId:y.gateway,methodId:y.id}),S&&(yield C())}catch(e){h(e)}})),()=>{(0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield p({gatewayId:y.gateway,methodId:y.id})}catch(e){h(e)}}))})),[]);const P=f||w(),B=a||E,F=S&&(N.length>0||I);return t||S?o.createElement(u.A,{hideContentWhenLoading:!0,isLoading:B},o.createElement("div",{className:"paymentMethod paymentMethod--hosted"},t,F&&o.createElement(c.A,{instruments:N,onSelectInstrument:k,onUseNewInstrument:A,selectedInstrument:P}),S&&o.createElement(d.A,{instrumentId:P&&P.bigpayToken,instruments:N,isAccountInstrument:!0}))):null}},77773:(e,t,a)=>{a.d(t,{BraintreeAchPaymentMethod:()=>z,BraintreeFastlanePaymentMethod:()=>$,BraintreeLocalPaymentMethod:()=>Y,BraintreePaypalPaymentMethod:()=>G,BraintreeVenmoPaymentMethod:()=>H,VisaCheckoutPaymentMethod:()=>K});var n,r,i,o=a(31635),s=a(32018),l=a(70355),c=a(94027),d=a(39981),u=a(66960),m=a(19285),y=a(9343),h=a(91182),p=a(11474),g=a(40646),b=a(49655),f=a(33740);!function(e){e.BusinessName="businessName",e.AccountType="accountType",e.AccountNumber="accountNumber",e.RoutingNumber="routingNumber",e.OwnershipType="ownershipType",e.FirstName="firstName",e.LastName="lastName"}(n||(n={})),function(e){e.Personal="Personal",e.Business="Business"}(r||(r={})),function(e){e.Savings="Savings",e.Checking="Checking"}(i||(i={}));const v=[{value:i.Savings,label:i.Savings},{value:i.Checking,label:i.Checking}],_=[{value:r.Personal,label:r.Personal},{value:r.Business,label:r.Business}],E=[{name:n.AccountType,custom:!1,id:n.AccountType,label:"Account Type",required:!0,fieldType:f.A.DROPDOWM,options:{items:v}},{name:n.AccountNumber,custom:!1,id:n.AccountNumber,label:"Account Number",required:!0,max:9,min:8},{name:n.RoutingNumber,custom:!1,id:n.RoutingNumber,label:"Routing Number",required:!0},{name:n.OwnershipType,custom:!1,id:n.OwnershipType,label:"Ownership Type",required:!0,fieldType:f.A.DROPDOWM,options:{items:_}}],N=[...E,{name:n.FirstName,custom:!1,id:n.FirstName,label:"First Name",required:!0},{name:n.LastName,custom:!1,id:n.LastName,label:"Last Name",required:!0}],I=[...E,{name:n.BusinessName,custom:!1,id:n.BusinessName,label:"Business Name",required:!0}];var S=a(69440),C=a(48709);const w=e=>{const[t,a]=(0,l.useState)(),{checkoutState:n}=(0,d.Q)(),r=n.data.getCustomer(),i=n.data.getInstruments(e)||[],{paymentForm:o}=(0,u.N)(),{setFieldValue:s}=o,c=(0,l.useMemo)((()=>i.filter(C.A)),[i]),m=!(null==r?void 0:r.isGuest)&&Boolean(e.config.isVaultingEnabled),y=m&&c.length>0,h=y&&!t,p=y&&!!t&&!t.trustedShippingAddress,g=(0,l.useCallback)((()=>{if(!c.length)return;return c.filter((({defaultInstrument:e})=>e))[0]||c[0]}),[c]);(0,l.useEffect)((()=>{a(m?g():void 0)}),[m,g]),(0,l.useEffect)((()=>{y||s("instrumentId","")}),[s,y]);const b=(0,l.useCallback)((e=>{a((0,S.find)(c,{bigpayToken:e})),s("instrumentId",e),s("shouldSetAsDefaultInstrument",!1)}),[c,s]),f=(0,l.useCallback)((()=>{a(void 0),s("instrumentId",""),s("shouldSaveInstrument",!1),s("shouldSetAsDefaultInstrument",!1)}),[s]);return{accountInstruments:c,currentInstrument:t,handleSelectInstrument:b,handleUseNewInstrument:f,isInstrumentFeatureAvailable:m,shouldShowInstrumentFieldset:y,shouldCreateNewInstrument:h,shouldConfirmInstrument:p}};var A=a(94202),k=a(76049);const P=e=>{const{paymentForm:t}=(0,u.N)(),{language:a}=(0,k.Y)(),i=()=>{const e=t.getFieldValue("ownershipType")===r.Business?I:N,i={[n.FirstName]:"address.first_name",[n.LastName]:"address.last_name",[n.AccountNumber]:"payment.errors.account_number",[n.RoutingNumber]:"payment.errors.routing_number",[n.BusinessName]:"payment.errors.business_name"};return(0,A.Ik)(e.reduce(((e,{id:t,required:r})=>(r&&i[t]&&(e[t]=(0,A.Yj)().required(a.translate(`${i[t]}_required_error`)),t===n.AccountNumber&&(e[t]=e[t].matches(/^\d+$/,a.translate("payment.errors.only_numbers_error",{label:a.translate("payment.account_number_label")}))),t===n.RoutingNumber&&(e[t]=e[t].matches(/^\d+$/,a.translate("payment.errors.only_numbers_error",{label:a.translate("payment.account_routing_label")})).min(8,a.translate("customer.min_error",{label:a.translate("payment.account_routing_label"),min:8})).max(9,a.translate("customer.max_error",{label:a.translate("payment.account_routing_label"),max:9})))),e)),{}))};return{validateBraintreeAchForm:(0,l.useCallback)((a=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){var n,o,s,l,c;const{accountNumber:d,businessName:u,routingNumber:m,ownershipType:y,firstName:h,lastName:p}=a,g=i();t.setValidationSchema(e,g);const[b,f,v,_,E]=yield Promise.all([yield null===(n=g.fields.accountNumber)||void 0===n?void 0:n.isValid(d),yield null===(o=g.fields.routingNumber)||void 0===o?void 0:o.isValid(m),yield null===(s=g.fields.firstName)||void 0===s?void 0:s.isValid(h),yield null===(l=g.fields.lastName)||void 0===l?void 0:l.isValid(p),yield null===(c=g.fields.businessName)||void 0===c?void 0:c.isValid(u)]),N=y===r.Business?E:v&&_;return f&&b&&N}))),[i]),resetFormValidation:(0,l.useCallback)((()=>{t.setValidationSchema(e,null)}),[t,e])}};var B=a(41410);const F=(e,t)=>{const a={firstName:t.translate("address.first_name_label"),lastName:t.translate("address.last_name_label"),accountNumber:t.translate("payment.account_number_label"),routingNumber:t.translate("payment.account_routing_label"),businessName:t.translate("payment.business_name_label"),ownershipType:t.translate("payment.ownership_type_label"),accountType:t.translate("payment.account_type_label")};return(e=>Object.values(n).includes(e))(e)?a[e]:e},x=()=>{const{language:e}=(0,k.Y)(),{paymentForm:t}=(0,u.N)(),{getFieldValue:a,setFieldValue:i}=t,o=a(n.OwnershipType)===r.Business?I:N,s=(0,l.useCallback)((e=>t=>{i(e,t)}),[i]);return l.createElement(l.Fragment,null,o.map((t=>l.createElement(B.A,{extraClass:`dynamic-form-field--${t.id}`,field:t,key:t.id,label:F(t.name,e),onChange:s(t.id)}))))};var T=a(22292);const M=({isInstrumentFeatureAvailable:e,updateMandateText:t})=>{var a,n,i;const{checkoutState:o}=(0,d.Q)(),{paymentForm:s}=(0,u.N)(),{language:c}=(0,k.Y)(),{businessName:m,accountType:y,accountNumber:h,routingNumber:p,ownershipType:g,firstName:b,lastName:f}=s.getFormValues(),v=`${String(b)} ${String(f)}`,_=g===r.Business?m:v,E=null===(a=o.data.getCheckout())||void 0===a?void 0:a.outstandingBalance,N=null===(n=o.data.getConfig())||void 0===n?void 0:n.storeProfile.storeName,I=null===(i=o.data.getCart())||void 0===i?void 0:i.currency.symbol,S=e?"payment.braintreeach_vaulting_mandate_text":"payment.braintreeach_mandate_text",C=new Date(Date.now()).toJSON().slice(0,10).split("-").reverse().join("."),w={accountType:String(y).toLowerCase(),accountNumber:String(h),currentDate:C,depositoryName:String(_),routingNumber:String(p),outstandingBalance:`${I||""}${E||""}`,storeName:String(N)},A=c.translate(S,w);(0,l.useEffect)((()=>{t(A)}),[A,t]);return l.createElement("div",{className:"mandate-text","data-test":"mandate-text"},l.createElement(T.A,{labelContent:A,name:"orderConsent",onChange:e=>{s.setFieldValue("orderConsent",e)}}))},D=({method:e,updateMandateText:t})=>{const[a,n]=(0,l.useState)(!1),{checkoutState:s}=(0,d.Q)(),{paymentForm:c}=(0,u.N)(),{disableSubmit:m,getFieldValue:y,getFormValues:h,setFieldValue:f}=c,{accountInstruments:v,currentInstrument:_,handleSelectInstrument:E,handleUseNewInstrument:N,isInstrumentFeatureAvailable:I,shouldShowInstrumentFieldset:S,shouldCreateNewInstrument:C,shouldConfirmInstrument:A}=w(e),{validateBraintreeAchForm:k,resetFormValidation:B}=P(e);(0,l.useEffect)((()=>{(()=>{const{firstName:e,lastName:t}=s.data.getBillingAddress()||{},a={ownershipType:r.Personal,accountType:i.Savings,accountNumber:"",routingNumber:"",businessName:"",firstName:e||"",lastName:t||"",shouldSaveInstrument:!1,shouldSetAsDefaultInstrument:!1,instrumentId:(null==_?void 0:_.bigpayToken)||"",orderConsent:!1};for(const[e,t]of Object.entries(a))f(e,t)})()}),[null==_?void 0:_.bigpayToken]);const F=!S||C||A,T=F&&a&&!A;return(0,l.useEffect)((()=>{if(F){(()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){const e=h(),t=yield k(e);!t&&y("orderConsent")&&f("orderConsent",!1),n(t)})))()}else B()}),[h,f,n,F,k,B]),(0,l.useEffect)((()=>{const t=y("orderConsent");m(e,!!F&&(A&&!a||T&&!t))}),[m,y,a,e,T]),l.createElement("div",{className:"checkout-ach-form","data-test":"checkout-ach-form"},S&&l.createElement("div",{className:"checkout-ach-form__instrument"},l.createElement(p.A,{instruments:v,onSelectInstrument:E,onUseNewInstrument:N,selectedInstrument:_})),A&&l.createElement("p",null,l.createElement("strong",null,l.createElement(b.A,{id:"payment.bank_account_instrument_trusted_shipping_address_title_text"})),l.createElement("br",null),l.createElement(b.A,{id:"payment.bank_account_instrument_trusted_shipping_address_text"})),F&&l.createElement(x,null),I&&l.createElement(g.A,{instrumentId:null==_?void 0:_.bigpayToken,instruments:v,isAccountInstrument:!0}),T&&l.createElement(M,{isInstrumentFeatureAvailable:I,updateMandateText:t}))},z=(0,m.A)((({method:e,checkoutService:t,checkoutState:a,onUnhandledError:n,paymentForm:r})=>{const i=(0,l.useRef)("");(0,l.useEffect)((()=>((0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t.initializePayment({gatewayId:e.gateway,methodId:e.id,integrations:[s.UD],braintreeach:{getMandateText:()=>i.current}})}catch(e){e instanceof Error&&n(e)}})),()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t.deinitializePayment({gatewayId:e.gateway,methodId:e.id})}catch(e){e instanceof Error&&n(e)}}))})),[t,e.gateway,e.id,n]),(0,l.useEffect)((()=>{const{isGuest:r}=a.data.getCustomer()||{};!r&&e.config.isVaultingEnabled&&(0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t.loadInstruments()}catch(e){e instanceof Error&&n(e)}}))}),[]);const m=a.statuses.isLoadingInstruments()||a.statuses.isLoadingPaymentMethod(e.id),p={isSubmitted:r.isSubmitted(),setSubmitted:r.setSubmitted};return l.createElement(y.Ay.Provider,{value:p},l.createElement(d.A.Provider,{value:{checkoutState:a,checkoutService:t}},l.createElement(c.A,{checkoutService:t},l.createElement(u.i.Provider,{value:{paymentForm:r}},l.createElement(h.A,{hideContentWhenLoading:!0,isLoading:m},l.createElement(D,{method:e,updateMandateText:e=>{i.current=e}}))))))}),[{id:"braintreeach"}]);var O=a(56943);const L=({renderPayPalCardComponent:e})=>((0,l.useEffect)((()=>{"function"==typeof e&&e("#braintree-fastlane-cc-form-container")}),[e]),l.createElement("div",{className:"braintree-fastlane-cc-form-container","data-test":"braintree-fastlane-cc-form-container",id:"braintree-fastlane-cc-form-container"}));var V=a(35172),U=a(86516),j=a(63163);const R=({onChange:e,handleSelectInstrument:t,selectedInstrument:a})=>{const n=function(e){switch(e.toLowerCase()){case"amex":case"american_express":return"american-express";case"diners":return"diners-club";case"master_card":return"mastercard";default:return e}}(a.brand).toLowerCase();return l.createElement("div",{className:"braintree-fastlane-instrument","data-test":"braintree-fastlane-instrument-form"},l.createElement("div",null,l.createElement("div",{className:"braintree-fastlane-instrument-details"},l.createElement(U.A,{cardType:n}),l.createElement("div",{className:"instrumentSelect-card","data-test":"braintree-fastlane-instrument-last4"},l.createElement("span",null,"●●●● ",a.last4))),l.createElement("div",{className:"braintree-fastlane-instrument-branding"},l.createElement(V.A,null))),l.createElement("div",{className:"braintree-fastlane-instrument-change-action"},l.createElement(j.Ay,{onClick:()=>(0,o.__awaiter)(void 0,void 0,void 0,(function*(){if("function"==typeof e){const a=yield e();a&&t(a)}})),size:j.Mp.Tiny,testId:"braintree-fastlane-instrument-change",variant:j.Ak.Secondary},l.createElement(b.A,{id:"common.change_action"}))))},q=({renderPayPalCardComponent:e,showPayPalCardSelector:t})=>{const{instruments:a,handleSelectInstrument:n,selectedInstrument:r}=(()=>{const[e,t]=(0,l.useState)(),{getPaymentProviderCustomer:a}=(0,d.Q)().checkoutState.data,n=a(),r=(0,O.A)(n)?n:{},{paymentForm:i}=(0,u.N)();return{instruments:r.instruments||[],handleSelectInstrument:e=>{t(e),i.setFieldValue("instrumentId",e.bigpayToken)},selectedInstrument:e}})(),i=a.length>0;return(0,l.useEffect)((()=>{!r&&a.length>0&&n(a[0])}),[a,r]),l.createElement("div",{className:"paymentMethod paymentMethod--creditCard",id:"braintree-fastlane"},i&&l.createElement(R,{handleSelectInstrument:n,onChange:t,selectedInstrument:r||a[0]}),!i&&l.createElement(L,{renderPayPalCardComponent:e}))},$=(0,m.A)((({method:e,checkoutService:t,checkoutState:a,onUnhandledError:n,paymentForm:r})=>{var i,m;const p=(0,l.useRef)({}),{isLoadingPaymentMethod:g,isInitializingPayment:b}=a.statuses;(0,l.useEffect)((()=>((0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t.initializePayment({methodId:e.id,integrations:[s.q1],braintreefastlane:{onInit:e=>{p.current.renderPayPalCardComponent=e},onChange:e=>{p.current.showPayPalCardSelector=e},onError:e=>{n(e)}}})}catch(e){e instanceof Error&&n(e)}})),()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t.deinitializePayment({methodId:e.id})}catch(e){e instanceof Error&&n(e)}}))})),[]);const f=b()||g(e.id),v={isSubmitted:r.isSubmitted(),setSubmitted:r.setSubmitted};return l.createElement(y.Ay.Provider,{value:v},l.createElement(d.A.Provider,{value:{checkoutState:a,checkoutService:t}},l.createElement(c.A,{checkoutService:t},l.createElement(u.i.Provider,{value:{paymentForm:r}},l.createElement(h.A,{hideContentWhenLoading:!0,isLoading:f},l.createElement(q,{renderPayPalCardComponent:null===(i=null==p?void 0:p.current)||void 0===i?void 0:i.renderPayPalCardComponent,showPayPalCardSelector:null===(m=p.current)||void 0===m?void 0:m.showPayPalCardSelector}))))))}),[{id:"braintreeacceleratedcheckout"}]),Y=(0,m.A)((({method:e,checkoutService:t,paymentForm:a,language:n,onUnhandledError:r})=>{const i=e.id;return(0,l.useEffect)((()=>((0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t.initializePayment({gatewayId:e.gateway,methodId:e.id,integrations:[s.zw],braintreelocalmethods:{container:"#checkout-payment-continue",buttonText:n.translate("payment.continue_with_brand",{brandName:i}),onRenderButton:()=>{a.hidePaymentSubmitButton(e,!0)},submitForm:()=>{a.setSubmitted(!0),a.submitForm()},onError:t=>{a.disableSubmit(e,!0),r(t)}}})}catch(e){e instanceof Error&&r(e)}})),()=>{(0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t.deinitializePayment({gatewayId:e.gateway,methodId:e.id})}catch(e){e instanceof Error&&r(e)}}))})),[]),l.createElement(l.Fragment,null)}),[{gateway:"braintreelocalmethods"}]);var W=a(31698);const G=(0,m.A)((e=>{var{checkoutService:t}=e,a=(0,o.__rest)(e,["checkoutService"]);const n=(0,l.useCallback)((e=>{const{onUnhandledError:n,language:r,method:i,paymentForm:o}=a;return t.initializePayment(Object.assign(Object.assign({},e),{integrations:[s.v8],braintree:{containerId:"#checkout-payment-continue",submitForm:()=>{o.setSubmitted(!0),o.submitForm()},onError:e=>{"INSTRUMENT_DECLINED"===e.message?null==n||n(new Error(r.translate("payment.errors.instrument_declined"))):null==n||n(e)},onRenderButton:()=>{o.hidePaymentSubmitButton(i,!0)}}}))}),[a,t]);return l.createElement(W.A,Object.assign({},a,{checkoutService:t,deinitializePayment:t.deinitializePayment,initializePayment:n}))}),[{id:"braintreepaypal"}]);var Q=a(28058),J=a(97802);const K=(0,m.A)((e=>{var{checkoutService:t,method:a,onUnhandledError:n}=e,r=(0,o.__rest)(e,["checkoutService","method","onUnhandledError"]);const i=(0,l.useCallback)((e=>{const r=Object.assign(Object.assign({},e),{braintreevisacheckout:{onError:n,onPaymentSelect:()=>{return e=r,(0,o.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t.deinitializePayment({gatewayId:a.gateway,methodId:a.id}),yield t.initializePayment(Object.assign(Object.assign({},e),{gatewayId:a.gateway,methodId:a.id}))}catch(e){e instanceof Error&&n(e)}}));var e}}});return t.initializePayment(r)}),[t,a,n]);return l.createElement(J.A,Object.assign({},r,{buttonId:"visaCheckoutWalletButton",deinitializePayment:t.deinitializePayment,editButtonClassName:"v-button",initializePayment:i,method:a,shouldShowEditButton:!0,signInButtonClassName:"v-button",signOutCustomer:t.signOutCustomer}))}),[{id:Q.A.BraintreeVisaCheckout}]),H=(0,m.A)((({checkoutService:e,checkoutState:t,language:a,method:n,paymentForm:r})=>l.createElement(W.A,{checkoutService:e,checkoutState:t,deinitializePayment:e.deinitializePayment,initializePayment:e.initializePayment,language:a,method:n,paymentForm:r})),[{id:"braintreevenmo"}])},94611:(e,t,a)=>{function n({config:e,customer:t,isUsingMultiShipping:a,paymentMethod:n}){return!(!e.checkoutSettings.isCardVaultingEnabled||!n.config.isVaultingEnabled||t.isGuest||a)}a.d(t,{A:()=>n})},97802:(e,t,a)=>{a.d(t,{A:()=>E});var n=a(31635),r=a(69440),i=a(70355),o=a(39981),s=a(91182),l=a(22437);const c=(e="",t="****")=>e.includes("*")?e:`${t} ${e}`,d=e=>{if((e=>{if("object"==typeof e&&null!==e){if("card_information"in e&&"object"==typeof e.card_information&&null!==e.card_information&&"number"in e.card_information&&"type"in e.card_information)return!0;if("cardData"in e&&"object"==typeof e.cardData&&null!==e.cardData&&"accountMask"in e.cardData&&"cardType"in e.cardData&&"expMonth"in e.cardData&&"expYear"in e.cardData)return!0;if("accountNum"in e&&"accountMask"in e&&"expDate"in e)return!0}return!1})(e)){if(e.card_information)return{accountMask:c(e.card_information.number),cardType:e.card_information.type};if(e.cardData)return{accountMask:c(e.cardData.accountMask),cardType:e.cardData.cardType,expiryMonth:e.cardData.expMonth,expiryYear:e.cardData.expYear};if(e.accountNum){const{card:t}=(0,l.number)(e.accountNum);return{accountMask:c(e.accountMask),expiryMonth:e.expDate&&e.expDate.substr(0,2),expiryYear:e.expDate&&e.expDate.substr(2,2),cardType:t?t.niceType:""}}}};var u,m=a(72769),y=a(76049),h=a(49655),p=a(28058);!function(e){e.ApplePay="applepay",e.Barclaycard="barclaycard",e.CreditCard="credit-card",e.GooglePay="googlepay",e.PayWithGoogle="paywithgoogle",e.Masterpass="masterpass",e.MultiOption="multi-option",e.Paypal="paypal",e.PaypalCredit="paypal-credit",e.PaypalVenmo="paypal-venmo",e.VisaCheckout="visa-checkout"}(u||(u={}));const g=u;function b(e){return t=>{let a=function(e){return t=>{const a={[p.A.Affirm]:e.translate("payment.affirm_name_text"),[p.A.Afterpay]:e.translate("payment.afterpay_name_text"),[p.A.AmazonPay]:e.translate("payment.amazon_name_text"),[p.A.Bolt]:e.translate("payment.bolt_name_text"),[p.A.Clearpay]:e.translate("payment.clearpay_name_text"),[g.GooglePay]:e.translate("payment.google_pay_name_text"),[p.A.Klarna]:e.translate("payment.klarna_name_text"),[g.Paypal]:e.translate("payment.paypal_name_text"),[g.PaypalCredit]:e.translate("payment.paypal_credit_name_text"),[g.VisaCheckout]:e.translate("payment.vco_name_text")};return a[t.id]||a[t.method]}}(e)(t);return a&&t.method!==g.MultiOption||(a=t.config.displayName),a||(a=(0,r.capitalize)((0,r.get)(t,"initializationData.paymentData.cardData.digital_wallet_type")||t.method||t.id)),a}}const f=({method:e,onSignOut:t})=>{const{language:a}=(0,y.Y)();return i.createElement("div",{className:"signout-link"},i.createElement(h.A,{id:"remote.sign_out_before_action"})," ",i.createElement("a",{href:"#",onClick:(0,m.A)(t)},i.createElement(h.A,{data:{providerName:b(a)(e)},id:"remote.sign_out_action"}))," ",i.createElement(h.A,{id:"remote.sign_out_after_action"}))},v=({accountMask:e,cardName:t,cardType:a,expiryMonth:n,expiryYear:r,shouldShowEditButton:o,editButtonClassName:s,editButtonLabel:l,buttonId:c,method:d,onSignOut:u})=>i.createElement(i.Fragment,null,!!t&&i.createElement("p",{"data-test":"payment-method-wallet-card-name"},i.createElement("strong",null,i.createElement(h.A,{id:"payment.credit_card_name_label"}),":")," ",t),!!e&&!!a&&i.createElement("p",{"data-test":"payment-method-wallet-card-type"},i.createElement("strong",null,`${a}:`)," ",e),!!n&&!!r&&i.createElement("p",{"data-test":"payment-method-wallet-card-expiry"},i.createElement("strong",null,i.createElement(h.A,{id:"payment.credit_card_expiration_date_label"}),":")," ",`${n}/${r}`),!!o&&i.createElement("p",null,i.createElement("a",{className:s,href:"#",id:c,onClick:(0,m.A)()},l||i.createElement(h.A,{id:"remote.select_different_card_action"}))),i.createElement(f,{method:d,onSignOut:u})),_=({buttonId:e,method:t,signInButtonClassName:a,signInButtonLabel:n})=>{const{language:r}=(0,y.Y)();return i.createElement("a",{className:a,href:"#",id:e,onClick:(0,m.A)()},n||i.createElement(h.A,{data:{providerName:b(r)(t)},id:"remote.sign_in_action"}))},E=({paymentForm:e,buttonId:t,editButtonClassName:a,editButtonLabel:l,isInitializing:c=!1,method:u,shouldShowEditButton:m,signInButtonClassName:y,signInButtonLabel:h,signOutCustomer:p,deinitializePayment:g,initializePayment:b,onSignOut:f=r.noop,onSignOutError:E=r.noop,onUnhandledError:N=r.noop})=>{const{checkoutState:{data:{getBillingAddress:I,getCheckout:S,isPaymentDataRequired:C}}}=(0,o.Q)(),w=I(),A=S();if(!w||!A)throw new Error("Unable to get checkout");const k=d(u.initializationData),P=(0,r.some)(A.payments,{providerId:u.id}),B=k&&[w.firstName,w.lastName].join(" "),F=()=>{const{disableSubmit:t}=e,a=C();d(u.initializationData)||!a?t(u,!1):t(u,!0)},x=(0,i.useCallback)((()=>(0,n.__awaiter)(void 0,void 0,void 0,(function*(){try{yield p({methodId:u.id}),f(),window.location.reload()}catch(e){E(e)}}))),[p,u.id,f,E]);return(0,i.useEffect)((()=>((0,n.__awaiter)(void 0,void 0,void 0,(function*(){F();try{yield b({gatewayId:u.gateway,methodId:u.id})}catch(e){N(e)}})),()=>{(0,n.__awaiter)(void 0,void 0,void 0,(function*(){const{disableSubmit:t}=e;t(u,!1);try{yield g({gatewayId:u.gateway,methodId:u.id})}catch(e){N(e)}}))})),[]),(0,i.useEffect)((()=>{F()})),i.createElement(s.A,{hideContentWhenLoading:!0,isLoading:c},i.createElement("div",{className:"paymentMethod paymentMethod--walletButton"},P?i.createElement(v,Object.assign({},k,{buttonId:t,cardName:B,editButtonClassName:a,editButtonLabel:l,method:u,onSignOut:x,shouldShowEditButton:m})):i.createElement(_,{buttonId:t,method:u,signInButtonClassName:y,signInButtonLabel:h})))}}}]);
//# sourceMappingURL=braintree-ach-payment-method-16a3a48f.js.map