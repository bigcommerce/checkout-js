{"version":3,"file":"customer-52721bc6.js","mappings":"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","sources":["webpack://checkout/./packages/core/src/app/common/dom/getAppliedStyles.ts","webpack://checkout/./packages/core/src/app/common/utility/isFloatingLabelEnabled.ts","webpack://checkout/./packages/core/src/app/common/utility/parseAnchor.ts","webpack://checkout/./packages/core/src/app/customer/validationPatterns.ts","webpack://checkout/./packages/core/src/app/customer/getEmailValidationSchema.ts","webpack://checkout/./packages/core/src/app/customer/getCreateCustomerValidationSchema.ts","webpack://checkout/./packages/core/src/app/customer/CreateAccountForm.tsx","webpack://checkout/./packages/core/src/app/customer/EmailField.tsx","webpack://checkout/./packages/core/src/app/customer/EmailLoginForm.tsx","webpack://checkout/./packages/core/src/app/privacyPolicy/PrivacyPolicyField.tsx","webpack://checkout/./packages/core/src/app/customer/SubscribeField.tsx","webpack://checkout/./packages/core/src/app/customer/GuestForm.tsx","webpack://checkout/./packages/core/src/app/privacyPolicy/getPrivacyPolicyValidationSchema.ts","webpack://checkout/./packages/core/src/app/ui/icon/IconEye.tsx","webpack://checkout/./packages/core/src/app/ui/icon/IconEyeSlash.tsx","webpack://checkout/./packages/core/src/app/customer/PasswordField.tsx","webpack://checkout/./packages/core/src/app/customer/LoginForm.tsx","webpack://checkout/./packages/core/src/app/customer/mapErrorMessage.ts","webpack://checkout/./packages/core/src/app/customer/mapCreateAccountFromFormValues.ts","webpack://checkout/./packages/core/src/app/customer/StripeGuestForm.tsx","webpack://checkout/./packages/core/src/app/customer/Customer.tsx","webpack://checkout/./packages/core/src/app/formFields/mapCustomFormFieldsFromFormValues.ts","webpack://checkout/./packages/core/src/app/locale/TranslatedLink.tsx","webpack://checkout/./packages/core/src/app/ui/form/CheckboxFormField.tsx","webpack://checkout/./packages/core/src/app/ui/form/CheckboxInput.tsx","webpack://checkout/./packages/core/src/app/locale/withDate.tsx","webpack://checkout/./packages/core/src/app/ui/form/RadioInput.tsx","webpack://checkout/./packages/core/src/app/ui/form/DynamicInput.tsx","webpack://checkout/./packages/core/src/app/ui/form/MultiCheckboxControl.tsx","webpack://checkout/./packages/core/src/app/ui/form/CheckboxGroupFormField.tsx","webpack://checkout/./packages/core/src/app/ui/form/DynamicFormField.tsx","webpack://checkout/./packages/core/src/app/ui/form/TextArea.tsx","webpack://checkout/./packages/core/src/app/ui/icon/IconChevronDown.tsx"],"sourcesContent":["import { kebabCase } from 'lodash';\n\nexport default function getAppliedStyles(\n    element: HTMLElement,\n    properties: string[],\n): { [key: string]: string } {\n    const declaration = window.getComputedStyle(element);\n\n    return properties.reduce(\n        (result, propertyName) => ({\n            ...result,\n            [propertyName]: declaration.getPropertyValue(kebabCase(propertyName)),\n        }),\n        {},\n    );\n}\n","import { CheckoutSettings } from '@bigcommerce/checkout-sdk';\n\nexport default function isFloatingLabelEnabled(checkoutSettings: CheckoutSettings): boolean {\n    return !!checkoutSettings.features['CHECKOUT-6879.enable_floating_labels'];\n}\n","export default function parseAnchor(text: string): string[] {\n    const div = document.createElement('div');\n\n    div.innerHTML = text;\n\n    const anchor = div.querySelector('a');\n\n    if (!anchor) {\n        return [];\n    }\n\n    const anchorSiblings = div.innerHTML.split(anchor.outerHTML);\n\n    return [anchorSiblings[0], anchor.text, anchorSiblings[1]];\n}\n","// NOTE: This is a legacy regex used to create accounts, more flexible than the current used one\n// we need to keep this regex for login validation as accounts might have been created using this regex\nexport const EMAIL_REGEXP =\n    /^[a-z0-9!#$%&'*+/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i;\n","import { LanguageService } from '@bigcommerce/checkout-sdk';\nimport { object, ObjectSchema, string } from 'yup';\n\nimport { EMAIL_REGEXP } from './validationPatterns';\n\nexport interface EmailValidationSchemaOptions {\n    language: LanguageService;\n}\n\nexport default function getEmailValidationSchema({\n    language,\n}: EmailValidationSchemaOptions): ObjectSchema<{ email: string }> {\n    return object({\n        email: string()\n            .max(256)\n            .matches(EMAIL_REGEXP, language.translate('customer.email_invalid_error'))\n            .required(language.translate('customer.email_required_error')),\n    });\n}\n","import { FormField, LanguageService } from '@bigcommerce/checkout-sdk';\nimport { memoize } from '@bigcommerce/memoize';\nimport { object, ObjectSchema, string } from 'yup';\n\nimport {\n    CustomFormFieldValues,\n    getCustomFormFieldsValidationSchema,\n    TranslateValidationErrorFunction,\n} from '../formFields';\n\nimport getEmailValidationSchema from './getEmailValidationSchema';\nimport { PasswordRequirements } from './getPasswordRequirements';\n\nexport type CreateAccountFormValues = {\n    firstName: string;\n    lastName: string;\n    email: string;\n    password: string;\n    acceptsMarketingEmails?: string[];\n    token?: string;\n} & CustomFormFieldValues;\n\nexport interface CreateCustomerValidationSchema {\n    formFields: FormField[];\n    language: LanguageService;\n    passwordRequirements: PasswordRequirements;\n}\n\nfunction getTranslateCreateCustomerError(\n    language?: LanguageService,\n): TranslateValidationErrorFunction {\n    return (type, { label, min, max }) => {\n        if (!language) {\n            return;\n        }\n\n        if (type === 'required') {\n            return language.translate('customer.required_error', { label });\n        }\n\n        if (type === 'max' && max) {\n            return language.translate('customer.max_error', { label, max });\n        }\n\n        if (type === 'min' && min) {\n            return language.translate('customer.min_error', { label, min });\n        }\n\n        if (type === 'invalid') {\n            return language.translate('customer.invalid_characters_error', { label });\n        }\n    };\n}\n\nexport default memoize(function getCreateCustomerValidationSchema({\n    formFields,\n    language,\n    passwordRequirements: { description, numeric, alpha, minLength },\n}: CreateCustomerValidationSchema): ObjectSchema<CreateAccountFormValues> {\n    return object({\n        firstName: string().required(language.translate('address.first_name_required_error')),\n        lastName: string().required(language.translate('address.last_name_required_error')),\n        password: string()\n            .required(language.translate('customer.password_required_error') || description)\n            .matches(\n                numeric,\n                language.translate('customer.password_number_required_error') || description,\n            )\n            .matches(\n                alpha,\n                language.translate('customer.password_letter_required_error') || description,\n            )\n            .min(\n                minLength,\n                language.translate('customer.password_under_minimum_length_error' || description),\n            )\n            .max(100, language.translate('customer.password_over_maximum_length_error')),\n    })\n        .concat(getEmailValidationSchema({ language }))\n        .concat(\n            getCustomFormFieldsValidationSchema({\n                formFields,\n                translate: getTranslateCreateCustomerError(language),\n            }),\n        );\n});\n","import { FormField } from '@bigcommerce/checkout-sdk';\nimport { FormikProps, withFormik } from 'formik';\nimport { noop } from 'lodash';\nimport React, { FunctionComponent, useMemo } from 'react';\n\nimport { preventDefault } from '../common/dom';\nimport { isRequestError } from '../common/error';\nimport { TranslatedString, withLanguage, WithLanguageProps } from '../locale';\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { DynamicFormField, Fieldset, Form } from '../ui/form';\n\nimport getCreateCustomerValidationSchema, {\n    CreateAccountFormValues,\n} from './getCreateCustomerValidationSchema';\nimport getPasswordRequirements from './getPasswordRequirements';\nimport './CreateAccountForm.scss';\n\nexport interface CreateAccountFormProps {\n    formFields: FormField[];\n    createAccountError?: Error;\n    isCreatingAccount?: boolean;\n    requiresMarketingConsent: boolean;\n    useFloatingLabel?: boolean;\n    onCancel?(): void;\n    onSubmit?(values: CreateAccountFormValues): void;\n}\n\nconst CreateAccountForm: FunctionComponent<\n    CreateAccountFormProps & WithLanguageProps & FormikProps<CreateAccountFormValues>\n> = ({ formFields, createAccountError, isCreatingAccount, onCancel, useFloatingLabel }) => {\n    const createAccountErrorMessage = useMemo(() => {\n        if (!createAccountError) {\n            return;\n        }\n\n        if (isRequestError(createAccountError) && createAccountError.status === 409) {\n            const splitMessage = createAccountError.message.split(':');\n\n            if (splitMessage.length > 1) {\n                return (\n                    <TranslatedString\n                        data={{ email: splitMessage[1].trim() }}\n                        id=\"customer.email_in_use_text\"\n                    />\n                );\n            }\n\n            return <TranslatedString id=\"customer.unknown_email_in_use_text\" />;\n        }\n\n        return createAccountError.message;\n    }, [createAccountError]);\n\n    return (\n        <Form\n            className=\"checkout-form\"\n            id=\"checkout-customer-returning\"\n            testId=\"checkout-customer-returning\"\n        >\n            <Fieldset>\n                {createAccountErrorMessage && (\n                    <Alert type={AlertType.Error}>{createAccountErrorMessage}</Alert>\n                )}\n                <div className=\"create-account-form\">\n                    {formFields.map((field) => (\n                        <DynamicFormField\n                            autocomplete={field.name}\n                            extraClass={`dynamic-form-field--${field.name}`}\n                            field={field}\n                            key={field.id}\n                            parentFieldName={field.custom ? 'customFields' : undefined}\n                            useFloatingLabel={useFloatingLabel}\n                        />\n                    ))}\n                </div>\n            </Fieldset>\n\n            <div className=\"form-actions\">\n                <Button\n                    disabled={isCreatingAccount}\n                    id=\"checkout-customer-create\"\n                    testId=\"customer-continue-create\"\n                    type=\"submit\"\n                    variant={ButtonVariant.Primary}\n                >\n                    <TranslatedString id=\"customer.create_account_action\" />\n                </Button>\n\n                <a\n                    className=\"button optimizedCheckout-buttonSecondary\"\n                    data-test=\"customer-cancel-button\"\n                    href=\"#\"\n                    id=\"checkout-customer-cancel\"\n                    onClick={preventDefault(onCancel)}\n                >\n                    <TranslatedString id=\"common.cancel_action\" />\n                </a>\n            </div>\n        </Form>\n    );\n};\n\nexport default withLanguage(\n    withFormik<CreateAccountFormProps & WithLanguageProps, CreateAccountFormValues>({\n        handleSubmit: (values, { props: { onSubmit = noop } }) => {\n            onSubmit(values);\n        },\n        mapPropsToValues: ({ requiresMarketingConsent }) => ({\n            firstName: '',\n            lastName: '',\n            email: '',\n            password: '',\n            customFields: {},\n            acceptsMarketingEmails: requiresMarketingConsent ? [] : ['0'],\n        }),\n        validationSchema: ({\n            language,\n            formFields,\n        }: CreateAccountFormProps & WithLanguageProps) => {\n            const passwordRequirements = formFields.find(\n                ({ requirements }) => requirements,\n            )?.requirements;\n\n            if (!passwordRequirements) {\n                throw new Error('Password requirements missing');\n            }\n\n            const schema = getCreateCustomerValidationSchema({\n                language,\n                formFields,\n                passwordRequirements: getPasswordRequirements(passwordRequirements),\n            });\n\n            return schema;\n        },\n    })(CreateAccountForm),\n);\n","import { FieldProps } from 'formik';\nimport React, { FunctionComponent, memo, useCallback, useMemo } from 'react';\n\nimport { TranslatedString } from '../locale';\nimport { FormField, TextInput } from '../ui/form';\n\nexport interface EmailFieldProps {\n    useFloatingLabel?: boolean;\n    onChange?(value: string): void;\n}\n\nconst EmailField: FunctionComponent<EmailFieldProps> = ({ onChange, useFloatingLabel }) => {\n    const renderInput = useCallback(\n        (props: FieldProps) => (\n            <TextInput\n                {...props.field}\n                autoComplete={props.field.name}\n                id={props.field.name}\n                type=\"email\"\n                useFloatingLabel={useFloatingLabel}\n            />\n        ),\n        [useFloatingLabel],\n    );\n\n    const labelContent = useMemo(() => <TranslatedString id=\"customer.email_label\" />, []);\n\n    return (\n        <FormField\n            input={renderInput}\n            labelContent={labelContent}\n            name=\"email\"\n            onChange={onChange}\n            useFloatingLabel={useFloatingLabel}\n        />\n    );\n};\n\nexport default memo(EmailField);\n","import { SignInEmail } from '@bigcommerce/checkout-sdk';\nimport { FormikProps, withFormik } from 'formik';\nimport { noop } from 'lodash';\nimport React, { FunctionComponent, memo, useMemo } from 'react';\n\nimport {\n    TranslatedHtml,\n    TranslatedLink,\n    TranslatedString,\n    withLanguage,\n    WithLanguageProps,\n} from '../locale';\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { Form } from '../ui/form';\nimport { LoadingSpinner } from '../ui/loading';\nimport { Modal, ModalHeader } from '../ui/modal';\n\nimport EmailField from './EmailField';\nimport getEmailValidationSchema from './getEmailValidationSchema';\n\nexport interface EmailLoginFormProps {\n    email?: string;\n    isOpen: boolean;\n    isSendingEmail?: boolean;\n    emailHasBeenRequested?: boolean;\n    sentEmail?: SignInEmail;\n    sentEmailError?: any;\n    useFloatingLabel?: boolean;\n    onRequestClose?(): void;\n    onSendLoginEmail?(values: EmailLoginFormValues): void;\n}\n\nexport interface EmailLoginFormValues {\n    email: string;\n}\n\nconst EmailLoginForm: FunctionComponent<\n    EmailLoginFormProps & WithLanguageProps & FormikProps<EmailLoginFormValues>\n> = ({\n    email,\n    isOpen,\n    isSendingEmail = false,\n    emailHasBeenRequested,\n    onRequestClose = noop,\n    sentEmailError,\n    sentEmail,\n    submitForm,\n    useFloatingLabel,\n    values: { email: formEmail },\n}) => {\n    const modalHeaderStringId = useMemo(() => {\n        if (emailHasBeenRequested) {\n            if (sentEmailError) {\n                return 'common.error_heading';\n            }\n\n            return 'login_email.sent_header';\n        }\n\n        if (email) {\n            return 'login_email.header_with_email';\n        }\n\n        return 'login_email.header';\n    }, [emailHasBeenRequested, sentEmailError, email]);\n\n    const okButton = useMemo(\n        () => (\n            <div className=\"modal-footer\">\n                <Button onClick={onRequestClose}>\n                    <TranslatedString id=\"common.ok_action\" />\n                </Button>\n            </div>\n        ),\n        [onRequestClose],\n    );\n\n    const footer = useMemo(() => {\n        if (sentEmailError && sentEmailError.status === 429) {\n            return okButton;\n        }\n\n        if (emailHasBeenRequested && !sentEmailError) {\n            if (isSendingEmail) {\n                return <LoadingSpinner isLoading />;\n            }\n\n            if (sentEmail && sentEmail.sent_email === 'reset_password') {\n                return okButton;\n            }\n\n            return (\n                <p>\n                    <TranslatedLink id=\"login_email.resend_link\" onClick={submitForm} />\n                    <TranslatedLink id=\"login_email.use_password_link\" onClick={onRequestClose} />\n                </p>\n            );\n        }\n\n        return (\n            <div className=\"modal-footer\">\n                <Button\n                    className=\"optimizedCheckout-buttonSecondary\"\n                    onClick={onRequestClose}\n                    type=\"button\"\n                >\n                    <TranslatedString id=\"common.cancel_action\" />\n                </Button>\n                <Button isLoading={isSendingEmail} type=\"submit\" variant={ButtonVariant.Primary}>\n                    <TranslatedString id=\"login_email.send\" />\n                </Button>\n            </div>\n        );\n    }, [\n        sentEmailError,\n        emailHasBeenRequested,\n        okButton,\n        submitForm,\n        isSendingEmail,\n        onRequestClose,\n        sentEmail,\n    ]);\n\n    const error = useMemo(() => {\n        if (!sentEmailError) {\n            return null;\n        }\n\n        const { status } = sentEmailError;\n\n        return (\n            <Alert type={AlertType.Error}>\n                {status === 429 ? (\n                    <TranslatedString id=\"login_email.error_temporary_disabled\" />\n                ) : (\n                    <TranslatedString\n                        id={\n                            status === 404\n                                ? 'login_email.error_not_found'\n                                : 'login_email.error_server'\n                        }\n                    />\n                )}\n            </Alert>\n        );\n    }, [sentEmailError]);\n\n    const form = useMemo(() => {\n        if (sentEmailError && sentEmailError.status === 429) {\n            return null;\n        }\n\n        if (emailHasBeenRequested && sentEmail && !sentEmailError) {\n            const { expiry, sent_email } = sentEmail;\n\n            return (\n                <p>\n                    <TranslatedHtml\n                        data={{\n                            email: formEmail,\n                            minutes: Math.round(expiry / 60),\n                        }}\n                        id={\n                            sent_email === 'sign_in'\n                                ? 'login_email.sent_text'\n                                : 'customer.reset_password_before_login_error'\n                        }\n                    />\n                </p>\n            );\n        }\n\n        if (emailHasBeenRequested && !sentEmail) {\n            return <EmailField useFloatingLabel={useFloatingLabel} />;\n        }\n\n        return (\n            <>\n                <p>\n                    <TranslatedString id=\"login_email.text\" />\n                </p>\n                <EmailField useFloatingLabel={useFloatingLabel} />\n            </>\n        );\n    }, [sentEmailError, emailHasBeenRequested, sentEmail, formEmail]);\n\n    return (\n        <Modal\n            additionalBodyClassName=\"modal--withText\"\n            additionalModalClassName=\"modal--medium\"\n            header={\n                <ModalHeader>\n                    <TranslatedString id={modalHeaderStringId} />\n                </ModalHeader>\n            }\n            isOpen={isOpen}\n            onRequestClose={onRequestClose}\n            shouldShowCloseButton={true}\n        >\n            <Form>\n                <LoadingSpinner isLoading={isSendingEmail && !email} />\n                {error}\n                {form}\n                {footer}\n            </Form>\n        </Modal>\n    );\n};\n\nexport default withLanguage(\n    withFormik<EmailLoginFormProps & WithLanguageProps, EmailLoginFormValues>({\n        mapPropsToValues: ({ email = '' }) => ({\n            email,\n        }),\n        handleSubmit: (values, { props: { onSendLoginEmail = noop } }) => {\n            onSendLoginEmail(values);\n        },\n        validationSchema: ({ language }: WithLanguageProps) =>\n            getEmailValidationSchema({ language }),\n    })(memo(EmailLoginForm)),\n);\n","import React, { FunctionComponent, memo } from 'react';\n\nimport { TranslatedHtml } from '../locale';\nimport { CheckboxFormField, Fieldset } from '../ui/form';\n\nconst PrivacyPolicyCheckboxFieldLink: FunctionComponent<{ url: string }> = ({ url }) => (\n    <CheckboxFormField\n        labelContent={<TranslatedHtml data={{ url }} id=\"privacy_policy.label\" />}\n        name=\"privacyPolicy\"\n    />\n);\n\nconst PrivacyPolicyFieldset: FunctionComponent<{ url: string }> = ({ url }) => (\n    <Fieldset additionalClassName=\"checkout-privacy-policy\">\n        <PrivacyPolicyCheckboxFieldLink url={url} />\n    </Fieldset>\n);\n\nexport default memo(PrivacyPolicyFieldset);\n","import { FieldProps } from 'formik';\nimport React, { FunctionComponent, memo } from 'react';\n\nimport { TranslatedString } from '../locale';\nimport { Input, Label } from '../ui/form';\n\nexport type SubscribeFieldProps = FieldProps<boolean> & {\n    requiresMarketingConsent: boolean;\n};\n\nconst SubscribeField: FunctionComponent<SubscribeFieldProps> = ({\n    field,\n    requiresMarketingConsent,\n}) => (\n    <>\n        <Input\n            {...field}\n            checked={field.value}\n            className=\"form-checkbox\"\n            id={field.name}\n            type=\"checkbox\"\n        />\n\n        <Label htmlFor={field.name}>\n            <TranslatedString\n                id={\n                    requiresMarketingConsent\n                        ? 'customer.guest_marketing_consent'\n                        : 'customer.guest_subscribe_to_newsletter_text'\n                }\n            />\n        </Label>\n    </>\n);\n\nexport default memo(SubscribeField);\n","import classNames from 'classnames';\nimport { FieldProps, FormikProps, withFormik } from 'formik';\nimport React, { FunctionComponent, memo, ReactNode, useCallback } from 'react';\nimport { object, string } from 'yup';\n\nimport { TranslatedString, withLanguage, WithLanguageProps } from '../locale';\nimport { getPrivacyPolicyValidationSchema, PrivacyPolicyField } from '../privacyPolicy';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { BasicFormField, Fieldset, Form, Legend } from '../ui/form';\n\nimport EmailField from './EmailField';\nimport SubscribeField from './SubscribeField';\n\nexport interface GuestFormProps {\n    canSubscribe: boolean;\n    checkoutButtons?: ReactNode;\n    continueAsGuestButtonLabelId: string;\n    requiresMarketingConsent: boolean;\n    defaultShouldSubscribe: boolean;\n    email?: string;\n    isLoading: boolean;\n    privacyPolicyUrl?: string;\n    useFloatingLabel?: boolean;\n    onChangeEmail(email: string): void;\n    onContinueAsGuest(data: GuestFormValues): void;\n    onShowLogin(): void;\n}\n\nexport interface GuestFormValues {\n    email: string;\n    shouldSubscribe: boolean;\n}\n\nconst GuestForm: FunctionComponent<\n    GuestFormProps & WithLanguageProps & FormikProps<GuestFormValues>\n> = ({\n    canSubscribe,\n    checkoutButtons,\n    continueAsGuestButtonLabelId,\n    isLoading,\n    onChangeEmail,\n    onShowLogin,\n    privacyPolicyUrl,\n    requiresMarketingConsent,\n    useFloatingLabel,\n}) => {\n    const renderField = useCallback(\n        (fieldProps: FieldProps<boolean>) => (\n            <SubscribeField {...fieldProps} requiresMarketingConsent={requiresMarketingConsent} />\n        ),\n        [requiresMarketingConsent],\n    );\n\n    return (\n        <Form\n            className=\"checkout-form\"\n            id=\"checkout-customer-guest\"\n            testId=\"checkout-customer-guest\"\n        >\n            <Fieldset\n                legend={\n                    <Legend hidden>\n                        <TranslatedString id=\"customer.guest_customer_text\" />\n                    </Legend>\n                }\n            >\n                <div className=\"customerEmail-container\">\n                    <div className=\"customerEmail-body\">\n                        <EmailField onChange={onChangeEmail} useFloatingLabel={useFloatingLabel}/>\n\n                        {(canSubscribe || requiresMarketingConsent) && (\n                            <BasicFormField name=\"shouldSubscribe\" render={renderField} />\n                        )}\n\n                        {privacyPolicyUrl && <PrivacyPolicyField url={privacyPolicyUrl} />}\n                    </div>\n\n                    <div\n                        className={classNames('form-actions customerEmail-action', {\n                            'customerEmail-floating--enabled': useFloatingLabel,\n                        })}\n                    >\n                        <Button\n                            className=\"customerEmail-button\"\n                            id=\"checkout-customer-continue\"\n                            isLoading={isLoading}\n                            testId=\"customer-continue-as-guest-button\"\n                            type=\"submit\"\n                            variant={ButtonVariant.Primary}\n                        >\n                            <TranslatedString id={continueAsGuestButtonLabelId} />\n                        </Button>\n                    </div>\n                </div>\n\n                {!isLoading && (\n                    <p>\n                        <TranslatedString id=\"customer.login_text\" />{' '}\n                        <a\n                            data-test=\"customer-continue-button\"\n                            id=\"checkout-customer-login\"\n                            onClick={onShowLogin}\n                        >\n                            <TranslatedString id=\"customer.login_action\" />\n                        </a>\n                    </p>\n                )}\n\n                {checkoutButtons}\n            </Fieldset>\n        </Form>\n    );\n};\n\nexport default withLanguage(\n    withFormik<GuestFormProps & WithLanguageProps, GuestFormValues>({\n        mapPropsToValues: ({\n            email = '',\n            defaultShouldSubscribe = false,\n            requiresMarketingConsent,\n        }) => ({\n            email,\n            shouldSubscribe: requiresMarketingConsent ? false : defaultShouldSubscribe,\n            privacyPolicy: false,\n        }),\n        handleSubmit: (values, { props: { onContinueAsGuest } }) => {\n            onContinueAsGuest(values);\n        },\n        validationSchema: ({ language, privacyPolicyUrl }: GuestFormProps & WithLanguageProps) => {\n            const email = string()\n                .email(language.translate('customer.email_invalid_error'))\n                .max(256)\n                .required(language.translate('customer.email_required_error'));\n\n            const baseSchema = object({ email });\n\n            if (privacyPolicyUrl) {\n                return baseSchema.concat(\n                    getPrivacyPolicyValidationSchema({\n                        isRequired: !!privacyPolicyUrl,\n                        language,\n                    }),\n                );\n            }\n\n            return baseSchema;\n        },\n    })(memo(GuestForm)),\n);\n","import { LanguageService } from '@bigcommerce/checkout-sdk';\nimport { boolean, BooleanSchema, object, ObjectSchema } from 'yup';\n\nexport interface PrivacyPolicyValidatonSchemaProps {\n    isRequired: boolean;\n    language: LanguageService;\n}\n\nexport default function getPrivacyPolicyValidationSchema({\n    isRequired,\n    language,\n}: PrivacyPolicyValidatonSchemaProps): ObjectSchema<{ privacyPolicy?: boolean }> {\n    const schemaFields: {\n        privacyPolicy?: BooleanSchema;\n    } = {};\n\n    if (isRequired) {\n        schemaFields.privacyPolicy = boolean().oneOf(\n            [true],\n            language.translate('privacy_policy.required_error'),\n        );\n    }\n\n    return object(schemaFields);\n}\n","import React, { FunctionComponent } from 'react';\n\nimport withIconContainer from './withIconContainer';\n\nconst IconEye: FunctionComponent = () => (\n    <svg viewBox=\"0 0 576 512\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z\" />\n    </svg>\n);\n\nexport default withIconContainer(IconEye);\n","import React, { FunctionComponent } from 'react';\n\nimport withIconContainer from './withIconContainer';\n\nconst IconEyeSlash: FunctionComponent = () => (\n    <svg viewBox=\"0 0 640 512\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471zM296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47zm46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46zM320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1zm0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z\" />\n    </svg>\n);\n\nexport default withIconContainer(IconEyeSlash);\n","import { FieldProps } from 'formik';\nimport React, { FunctionComponent, memo, useCallback, useMemo } from 'react';\n\nimport { TranslatedString } from '../locale';\nimport { FormField, TextInput } from '../ui/form';\nimport Label from '../ui/form/Label';\nimport { IconEye, IconEyeSlash } from '../ui/icon';\nimport { Toggle } from '../ui/toggle';\n\ninterface WithFloatingLabel {\n    useFloatingLabel?: boolean;\n}\n\nconst PasswordField: FunctionComponent<WithFloatingLabel> = ({ useFloatingLabel = false }) => {\n    const renderInput = useCallback(\n        (props: FieldProps) => (\n            <Toggle openByDefault={false}>\n                {({ isOpen, toggle }) => (\n                    <div className=\"form-field-password\">\n                        <TextInput\n                            {...props.field}\n                            additionalClassName=\"form-input--withIcon\"\n                            id={props.field.name}\n                            type={isOpen ? 'text' : 'password'}\n                            useFloatingLabel={useFloatingLabel}\n                        />\n                        {useFloatingLabel && (\n                            <Label\n                                htmlFor={props.field.name}\n                                id={`${props.field.name}-label`}\n                                useFloatingLabel={true}\n                            >\n                                <TranslatedString id=\"customer.password_label\" />\n                            </Label>\n                        )}\n                        <a\n                            className=\"form-toggle-password form-input-icon\"\n                            href=\"#\"\n                            onClick={toggle}\n                        >\n                            {isOpen ? <IconEye /> : <IconEyeSlash />}\n                        </a>\n                    </div>\n                )}\n            </Toggle>\n        ),\n        [useFloatingLabel],\n    );\n\n    const labelContent = useMemo(() => <TranslatedString id=\"customer.password_label\" />, []);\n\n    return <FormField input={renderInput} labelContent={useFloatingLabel ? null : labelContent} name=\"password\" useFloatingLabel={useFloatingLabel} />;\n};\n\nexport default memo(PasswordField);\n","import { FormikProps, withFormik } from 'formik';\nimport { noop } from 'lodash';\nimport React, { FunctionComponent, memo, useCallback } from 'react';\nimport { object, string } from 'yup';\n\nimport { preventDefault } from '../common/dom';\nimport {\n    TranslatedHtml,\n    TranslatedLink,\n    TranslatedString,\n    withLanguage,\n    WithLanguageProps,\n} from '../locale';\nimport { Alert, AlertType } from '../ui/alert';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { Fieldset, Form, Legend } from '../ui/form';\n\nimport CustomerViewType from './CustomerViewType';\nimport EmailField from './EmailField';\nimport getEmailValidationSchema from './getEmailValidationSchema';\nimport mapErrorMessage from './mapErrorMessage';\nimport PasswordField from './PasswordField';\n\nexport interface LoginFormProps {\n    canCancel?: boolean;\n    continueAsGuestButtonLabelId: string;\n    email?: string;\n    forgotPasswordUrl: string;\n    isSignInEmailEnabled?: boolean;\n    isSendingSignInEmail?: boolean;\n    isSigningIn?: boolean;\n    signInError?: Error;\n    signInEmailError?: Error;\n    viewType?: Omit<CustomerViewType, 'guest'>;\n    passwordlessLogin?: boolean;\n    shouldShowCreateAccountLink?: boolean;\n    useFloatingLabel?: boolean;\n    onCancel?(): void;\n    onCreateAccount?(): void;\n    onChangeEmail?(email: string): void;\n    onSignIn(data: LoginFormValues): void;\n    onSendLoginEmail?(): void;\n    onContinueAsGuest?(): void;\n}\n\nexport interface LoginFormValues {\n    email: string;\n    password: string;\n}\n\nconst LoginForm: FunctionComponent<\n    LoginFormProps & WithLanguageProps & FormikProps<LoginFormValues>\n> = ({\n    canCancel,\n    continueAsGuestButtonLabelId,\n    forgotPasswordUrl,\n    email,\n    isSignInEmailEnabled,\n    isSigningIn,\n    language,\n    onCancel = noop,\n    onChangeEmail,\n    onContinueAsGuest,\n    onCreateAccount = noop,\n    onSendLoginEmail = noop,\n    signInError,\n    shouldShowCreateAccountLink,\n    useFloatingLabel,\n    viewType = CustomerViewType.Login,\n}) => {\n    const changeEmailLink = useCallback(() => {\n        if (!email) {\n            return null;\n        }\n\n        return (\n            <p className=\"optimizedCheckout-contentSecondary\">\n                <TranslatedLink\n                    data={{ email }}\n                    id=\"customer.guest_could_login_change_email\"\n                    onClick={onCancel}\n                    testId=\"change-email\"\n                />\n            </p>\n        );\n    }, [email, onCancel]);\n\n    return (\n        <Form\n            className=\"checkout-form\"\n            id=\"checkout-customer-returning\"\n            testId=\"checkout-customer-returning\"\n        >\n            <Fieldset\n                legend={\n                    <Legend hidden>\n                        <TranslatedString id=\"customer.returning_customer_text\" />\n                    </Legend>\n                }\n            >\n                {signInError && (\n                    <Alert testId=\"customer-login-error-message\" type={AlertType.Error}>\n                        {mapErrorMessage(signInError, (key) => language.translate(key))}\n                    </Alert>\n                )}\n\n                {viewType === CustomerViewType.SuggestedLogin && (\n                    <Alert type={AlertType.Info}>\n                        <TranslatedHtml data={{ email }} id=\"customer.guest_could_login\" />\n                    </Alert>\n                )}\n\n                {viewType === CustomerViewType.CancellableEnforcedLogin && (\n                    <Alert type={AlertType.Info}>\n                        <TranslatedHtml data={{ email }} id=\"customer.guest_must_login\" />\n                    </Alert>\n                )}\n\n                {viewType === CustomerViewType.EnforcedLogin && (\n                    <Alert type={AlertType.Error}>\n                        <TranslatedLink\n                            id=\"customer.guest_temporary_disabled\"\n                            onClick={onCreateAccount}\n                        />\n                    </Alert>\n                )}\n\n                {(viewType === CustomerViewType.Login ||\n                    viewType === CustomerViewType.EnforcedLogin) && (\n                    <EmailField onChange={onChangeEmail} useFloatingLabel={useFloatingLabel} />\n                )}\n\n                <PasswordField useFloatingLabel={useFloatingLabel} />\n\n                <p className=\"form-legend-container\">\n                    <span>\n                        { isSignInEmailEnabled &&\n                            <TranslatedLink\n                                id=\"login_email.link\"\n                                onClick={ onSendLoginEmail }\n                                testId=\"customer-signin-link\"\n                            />\n                        }\n                        { !isSignInEmailEnabled &&\n                            <a\n                                data-test=\"forgot-password-link\"\n                                href={ forgotPasswordUrl }\n                                rel=\"noopener noreferrer\"\n                                target=\"_blank\"\n                            >\n                                <TranslatedString id=\"customer.forgot_password_action\" />\n                            </a>\n                        }\n                    </span>\n                    { viewType === CustomerViewType.Login && shouldShowCreateAccountLink &&\n                        <span>\n                            <TranslatedLink\n                                id=\"customer.create_account_to_continue_text\"\n                                onClick={onCreateAccount}\n                            />\n                        </span>\n                    }\n                </p>\n\n                <div className=\"form-actions\">\n                    <Button\n                        disabled={isSigningIn}\n                        id=\"checkout-customer-continue\"\n                        testId=\"customer-continue-button\"\n                        type=\"submit\"\n                        variant={ButtonVariant.Primary}\n                    >\n                        <TranslatedString id=\"customer.sign_in_action\" />\n                    </Button>\n\n                    {viewType === CustomerViewType.SuggestedLogin && (\n                        <a\n                            className=\"button optimizedCheckout-buttonSecondary\"\n                            data-test=\"customer-guest-continue\"\n                            href=\"#\"\n                            id=\"checkout-guest-continue\"\n                            onClick={preventDefault(onContinueAsGuest)}\n                        >\n                            <TranslatedString id={continueAsGuestButtonLabelId} />\n                        </a>\n                    )}\n\n                    {canCancel &&\n                        viewType !== CustomerViewType.EnforcedLogin &&\n                        viewType !== CustomerViewType.SuggestedLogin && (\n                            <a\n                                className=\"button optimizedCheckout-buttonSecondary\"\n                                data-test=\"customer-cancel-button\"\n                                href=\"#\"\n                                id=\"checkout-customer-cancel\"\n                                onClick={preventDefault(onCancel)}\n                            >\n                                <TranslatedString\n                                    id={\n                                        viewType === CustomerViewType.CancellableEnforcedLogin\n                                            ? 'login_email.use_another_email'\n                                            : 'common.cancel_action'\n                                    }\n                                />\n                            </a>\n                        )}\n                </div>\n\n                {viewType === CustomerViewType.SuggestedLogin && changeEmailLink()}\n            </Fieldset>\n        </Form>\n    );\n};\n\nexport default withLanguage(\n    withFormik<LoginFormProps & WithLanguageProps, LoginFormValues>({\n        mapPropsToValues: ({ email = '' }) => ({\n            email,\n            password: '',\n        }),\n        handleSubmit: (values, { props: { onSignIn } }) => {\n            onSignIn(values);\n        },\n        validationSchema: ({ language }: LoginFormProps & WithLanguageProps) =>\n            getEmailValidationSchema({ language }).concat(\n                object({\n                    password: string().required(\n                        language.translate('customer.password_required_error'),\n                    ),\n                }),\n            ),\n    })(memo(LoginForm)),\n);\n","export default function mapErrorMessage(\n    error: any, // TODO: Export `RequestError`\n    translate: (key: string) => string,\n): string {\n    const type = error.body && error.body.type;\n\n    switch (type) {\n        case 'throttled_login':\n            return translate('customer.sign_in_throttled_error');\n\n        case 'reset_password_before_login':\n            return translate('customer.reset_password_before_login_error');\n\n        default:\n            return translate('customer.sign_in_error');\n    }\n}\n","import { CustomerAccountRequestBody } from '@bigcommerce/checkout-sdk';\n\nimport { mapCustomFormFieldsFromFormValues } from '../formFields';\n\nimport { CreateAccountFormValues } from './getCreateCustomerValidationSchema';\n\nexport default function mapCreateAccountFromFormValues({\n    acceptsMarketingEmails,\n    customFields,\n    ...values\n}: CreateAccountFormValues): CustomerAccountRequestBody {\n    return {\n        ...values,\n        acceptsMarketingEmails: acceptsMarketingEmails && acceptsMarketingEmails.length > 0,\n        customFields: mapCustomFormFieldsFromFormValues(customFields),\n    };\n}\n","import { CustomerInitializeOptions, CustomerRequestOptions } from '@bigcommerce/checkout-sdk';\nimport { FieldProps, FormikProps, withFormik } from 'formik';\nimport React, { FunctionComponent, memo, ReactNode, useCallback, useEffect, useState } from 'react';\n\nimport CheckoutStepStatus from '../checkout/CheckoutStepStatus';\nimport { getAppliedStyles } from '../common/dom';\nimport { TranslatedString } from '../locale';\nimport { PrivacyPolicyField } from '../privacyPolicy';\nimport { Button, ButtonVariant } from '../ui/button';\nimport { BasicFormField, Fieldset, Legend } from '../ui/form';\nimport { LoadingOverlay } from '../ui/loading';\n\nimport { GuestFormValues } from './GuestForm';\nimport SubscribeField from './SubscribeField';\n\nexport interface StripeGuestFormProps {\n    canSubscribe: boolean;\n    checkoutButtons?: ReactNode;\n    step: CheckoutStepStatus;\n    continueAsGuestButtonLabelId: string;\n    email?: string;\n    isLoading: boolean;\n    requiresMarketingConsent: boolean;\n    defaultShouldSubscribe: boolean;\n    privacyPolicyUrl?: string;\n    onChangeEmail(email: string): void;\n    onContinueAsGuest(data: GuestFormValues): void;\n    deinitialize(options: CustomerRequestOptions): void;\n    initialize(options: CustomerInitializeOptions): void;\n    onShowLogin(): void;\n}\n\nconst StripeGuestForm: FunctionComponent<StripeGuestFormProps & FormikProps<GuestFormValues>> = ({\n    continueAsGuestButtonLabelId,\n    isLoading,\n    initialize,\n    deinitialize,\n    onChangeEmail,\n    onShowLogin,\n    onContinueAsGuest,\n    canSubscribe,\n    checkoutButtons,\n    requiresMarketingConsent,\n    privacyPolicyUrl,\n    step,\n}) => {\n\n    const [continueAsAGuestButton, setContinueAsAGuestButton] = useState(true);\n    const [emailValue, setEmailValue] = useState('');\n    const [authentication, setAuthentication] = useState(false);\n    const [isStripeLoading, setIsStripeLoading] = useState(true);\n    const [isNewAuth, setIsNewAuth] = useState(false);\n    const handleOnClickSubmitButton = () => {\n        onContinueAsGuest({\n            email: emailValue,\n            shouldSubscribe: false,\n        });\n    };\n    const setEmailCallback = useCallback((authenticated: boolean, email: string) => {\n        onChangeEmail(email);\n        setEmailValue(email);\n        setContinueAsAGuestButton(!email);\n        setAuthentication(authenticated);\n\n        if(!authenticated){\n            setIsNewAuth(true);\n        }\n    }, [setContinueAsAGuestButton, onChangeEmail]);\n\n    useEffect(() => {\n        if ((!step.isComplete || isNewAuth) && emailValue && authentication) {\n            handleOnClickSubmitButton();\n        }\n    }, [emailValue, authentication, isNewAuth]);\n\n    const handleLoading = useCallback((mounted: boolean) => {\n        setIsStripeLoading(mounted);\n    }, []);\n\n    const stripeDeinitialize = () => {\n        deinitialize({\n            methodId: 'stripeupe',\n        });\n    };\n\n    const stripeInitialize = () => {\n        initialize( {\n            methodId: 'stripeupe',\n            stripeupe: {\n                container: 'stripeupeLink',\n                onEmailChange: setEmailCallback,\n                isLoading: handleLoading,\n                getStyles: getStripeStyles,\n                gatewayId: 'stripeupe',\n                methodId: 'card',\n            },\n        })};\n\n    useEffect(() => {\n        stripeInitialize();\n\n        return () => stripeDeinitialize();\n    }, []);\n\n    const getStylesFromElement = (\n        id: string,\n        properties: string[]) => {\n        const parentContainer = document.getElementById(id);\n\n        if (parentContainer) {\n            return getAppliedStyles(parentContainer, properties);\n        }\n \n            return undefined;\n        \n    };\n\n    const containerId = 'stripe-card-component-field';\n\n    const getStripeStyles: () => (Record<string, string> | undefined) = useCallback( () => {\n        const formInput = getStylesFromElement(`${containerId}--input`, ['color', 'background-color', 'border-color', 'box-shadow']);\n        const formLabel = getStylesFromElement(`${containerId}--label`, ['color']);\n        const formError = getStylesFromElement(`${containerId}--error`, ['color']);\n\n        return formLabel && formInput && formError ? {\n            labelText: formLabel.color,\n            fieldText: formInput.color,\n            fieldPlaceholderText: formInput.color,\n            fieldErrorText: formError.color,\n            fieldBackground: formInput['background-color'],\n            fieldInnerShadow: formInput['box-shadow'],\n            fieldBorder: formInput['border-color'],\n        } : undefined;\n    }, [])\n\n    const renderCheckoutThemeStylesForStripeUPE = () => {\n        return (\n            <div\n                className=\"optimizedCheckout-form-input\"\n                id={ `${containerId}--input` }\n                placeholder=\"1111\"\n            >\n                <div\n                    className=\"form-field--error\"\n                >\n                    <div\n                        className=\"optimizedCheckout-form-label\"\n                        id={ `${containerId}--error` }\n                    />\n                </div>\n                <div\n                    className=\"optimizedCheckout-form-label\"\n                    id={ `${containerId}--label` }\n                />\n            </div>\n        );\n    };\n\n    const renderField = useCallback((fieldProps: FieldProps<boolean>) => (\n        <SubscribeField\n            { ...fieldProps }\n            requiresMarketingConsent={ requiresMarketingConsent }\n        />\n    ), [\n        requiresMarketingConsent,\n    ]);\n\n    const buttonText = authentication && !isNewAuth? 'customer.continue_as_stripe_customer_action' : continueAsGuestButtonLabelId;\n\n    return (\n        <>\n            <div className=\"checkout-form\">\n                <LoadingOverlay\n                    hideContentWhenLoading\n                    isLoading={ isStripeLoading }\n                >\n                    <Fieldset\n                        legend={ !authentication &&\n                            <Legend hidden>\n                                <TranslatedString id=\"customer.guest_customer_text\"/>\n                            </Legend>\n                        }\n                    >\n                        <div className=\"customerEmail-container\">\n                            <div className=\"customerEmail-body\">\n                                <div id=\"stripeupeLink\"/>\n                                <br/>\n                                { (canSubscribe || requiresMarketingConsent) && <BasicFormField\n                                    name=\"shouldSubscribe\"\n                                    render={ renderField }\n                                /> }\n\n                                { privacyPolicyUrl && <PrivacyPolicyField\n                                    url={ privacyPolicyUrl }\n                                /> }\n                            </div>\n\n                            <div className=\"form-actions customerEmail-action\">\n                                { (!authentication || (authentication && !isNewAuth )) && <Button\n                                    className=\"stripeCustomerEmail-button\"\n                                    disabled={ continueAsAGuestButton }\n                                    id=\"stripe-checkout-customer-continue\"\n                                    isLoading={ isLoading }\n                                    onClick={ handleOnClickSubmitButton }\n                                    testId=\"stripe-customer-continue-as-guest-button\"\n                                    type=\"submit\"\n                                    variant={ ButtonVariant.Primary }\n                                >\n                                    <TranslatedString id={ buttonText }/>\n                                </Button> }\n                            </div>\n                        </div>\n                        {\n                            !isLoading && <p>\n                                <TranslatedString id=\"customer.login_text\"/>\n                                { ' ' }\n                                <a\n                                    data-test=\"customer-continue-button\"\n                                    id=\"checkout-customer-login\"\n                                    onClick={ onShowLogin }\n                                >\n                                    <TranslatedString id=\"customer.login_action\"/>\n                                </a>\n                            </p>\n                        }\n                        { !authentication && checkoutButtons }\n                    </Fieldset>\n                </LoadingOverlay>\n            </div>\n            { renderCheckoutThemeStylesForStripeUPE() }\n        </>\n    );\n};\n\nexport default withFormik<StripeGuestFormProps, GuestFormValues>({\n    mapPropsToValues: ({\n                           email = '',\n                           defaultShouldSubscribe = false,\n                           requiresMarketingConsent,\n                       }) => ({\n        email,\n        shouldSubscribe: requiresMarketingConsent ? false : defaultShouldSubscribe,\n        privacyPolicy: false,\n    }),\n    handleSubmit: (values, { props: { onContinueAsGuest } }) => {\n        onContinueAsGuest(values);\n    },\n})(memo(StripeGuestForm));\n","import {\n    CheckoutPaymentMethodExecutedOptions,\n    CheckoutSelectors,\n    CustomerAccountRequestBody,\n    CustomerCredentials,\n    CustomerInitializeOptions,\n    CustomerRequestOptions,\n    ExecutePaymentMethodCheckoutOptions,\n    FormField,\n    GuestCredentials,\n    SignInEmail,\n    StoreConfig,\n} from '@bigcommerce/checkout-sdk';\nimport { noop } from 'lodash';\nimport React, { Component, ReactNode } from 'react';\n\nimport { AnalyticsContextProps } from '@bigcommerce/checkout/analytics';\nimport { CustomerSkeleton } from '@bigcommerce/checkout/ui';\n\nimport { withAnalytics } from '../analytics';\nimport { CheckoutContextProps, withCheckout } from '../checkout';\nimport CheckoutStepStatus from '../checkout/CheckoutStepStatus';\nimport { isErrorWithType } from '../common/error';\nimport { isFloatingLabelEnabled } from '../common/utility';\nimport { PaymentMethodId } from '../payment/paymentMethod';\n\nimport CheckoutButtonList from './CheckoutButtonList';\nimport CreateAccountForm from './CreateAccountForm';\nimport CustomerViewType from './CustomerViewType';\nimport EmailLoginForm, { EmailLoginFormValues } from './EmailLoginForm';\nimport { CreateAccountFormValues } from './getCreateCustomerValidationSchema';\nimport GuestForm, { GuestFormValues } from './GuestForm';\nimport LoginForm from './LoginForm';\nimport mapCreateAccountFromFormValues from './mapCreateAccountFromFormValues';\nimport StripeGuestForm from './StripeGuestForm';\n\nexport interface CustomerProps {\n    viewType: CustomerViewType;\n    step: CheckoutStepStatus;\n    isEmbedded?: boolean;\n    isSubscribed: boolean;\n    isWalletButtonsOnTop: boolean;\n    checkEmbeddedSupport?(methodIds: string[]): void;\n    onChangeViewType?(viewType: CustomerViewType): void;\n    onAccountCreated?(): void;\n    onContinueAsGuest?(): void;\n    onContinueAsGuestError?(error: Error): void;\n    onReady?(): void;\n    onSubscribeToNewsletter(subscribe: boolean): void;\n    onSignIn?(): void;\n    onSignInError?(error: Error): void;\n    onUnhandledError?(error: Error): void;\n}\n\nexport interface WithCheckoutCustomerProps {\n    canSubscribe: boolean;\n    customerAccountFields: FormField[];\n    checkoutButtonIds: string[];\n    defaultShouldSubscribe: boolean;\n    email?: string;\n    firstName?: string;\n    forgotPasswordUrl: string;\n    isContinuingAsGuest: boolean;\n    isCreatingAccount: boolean;\n    isExecutingPaymentMethodCheckout: boolean;\n    isGuestEnabled: boolean;\n    hasBillingId: boolean;\n    isInitializing: boolean;\n    isSendingSignInEmail: boolean;\n    isSignInEmailEnabled: boolean;\n    isSigningIn: boolean;\n    privacyPolicyUrl?: string;\n    providerWithCustomCheckout?: string;\n    requiresMarketingConsent: boolean;\n    signInEmail?: SignInEmail;\n    signInEmailError?: Error;\n    isAccountCreationEnabled: boolean;\n    createAccountError?: Error;\n    signInError?: Error;\n    useFloatingLabel?: boolean;\n    clearError(error: Error): Promise<CheckoutSelectors>;\n    continueAsGuest(credentials: GuestCredentials): Promise<CheckoutSelectors>;\n    deinitializeCustomer(options: CustomerRequestOptions): Promise<CheckoutSelectors>;\n    executePaymentMethodCheckout(\n        options: ExecutePaymentMethodCheckoutOptions,\n    ): Promise<CheckoutSelectors>;\n    initializeCustomer(options: CustomerInitializeOptions): Promise<CheckoutSelectors>;\n    sendLoginEmail(params: { email: string }): Promise<CheckoutSelectors>;\n    signIn(credentials: CustomerCredentials): Promise<CheckoutSelectors>;\n    createAccount(values: CustomerAccountRequestBody): Promise<CheckoutSelectors>;\n}\n\nexport interface CustomerState {\n    isEmailLoginFormOpen: boolean;\n    isReady: boolean;\n    hasRequestedLoginEmail: boolean;\n}\n\nclass Customer extends Component<CustomerProps & WithCheckoutCustomerProps & AnalyticsContextProps, CustomerState> {\n    state: CustomerState = {\n        isEmailLoginFormOpen: false,\n        isReady: false,\n        hasRequestedLoginEmail: false,\n    };\n\n    private draftEmail?: string;\n\n    async componentDidMount(): Promise<void> {\n        const {\n            initializeCustomer,\n            email,\n            onReady = noop,\n            onUnhandledError = noop,\n            providerWithCustomCheckout,\n        } = this.props;\n\n        this.draftEmail = email;\n\n        try {\n            if (providerWithCustomCheckout !== PaymentMethodId.StripeUPE) {\n                await initializeCustomer({methodId: providerWithCustomCheckout});\n            }\n        } catch (error) {\n            onUnhandledError(error);\n        }\n\n        this.setState({ isReady: true });\n\n        onReady();\n    }\n\n    async componentWillUnmount(): Promise<void> {\n        const {\n            deinitializeCustomer = noop,\n            providerWithCustomCheckout,\n            onUnhandledError = noop,\n        } = this.props;\n\n        try {\n            await deinitializeCustomer({ methodId: providerWithCustomCheckout });\n        } catch (error) {\n            onUnhandledError(error);\n        }\n    }\n\n    render(): ReactNode {\n        const { viewType } = this.props;\n        const { isEmailLoginFormOpen, isReady } = this.state;\n        const shouldRenderGuestForm = viewType === CustomerViewType.Guest;\n        const shouldRenderCreateAccountForm = viewType === CustomerViewType.CreateAccount;\n        const shouldRenderLoginForm = !shouldRenderGuestForm && !shouldRenderCreateAccountForm;\n\n        return (\n            <CustomerSkeleton isLoading={!isReady}>\n                {isEmailLoginFormOpen && this.renderEmailLoginLinkForm()}\n                {shouldRenderLoginForm && this.renderLoginForm()}\n                {shouldRenderGuestForm && this.renderGuestForm()}\n                {shouldRenderCreateAccountForm && this.renderCreateAccountForm()}\n            </CustomerSkeleton>\n        );\n    }\n\n    private renderGuestForm(): ReactNode {\n        const {\n            canSubscribe,\n            checkEmbeddedSupport,\n            checkoutButtonIds,\n            deinitializeCustomer,\n            email,\n            initializeCustomer,\n            isContinuingAsGuest = false,\n            isExecutingPaymentMethodCheckout = false,\n            isInitializing = false,\n            isSubscribed,\n            isWalletButtonsOnTop,\n            privacyPolicyUrl,\n            requiresMarketingConsent,\n            providerWithCustomCheckout,\n            onUnhandledError = noop,\n            step,\n            useFloatingLabel,\n        } = this.props;\n        const checkoutButtons = isWalletButtonsOnTop\n          ? null\n          : <CheckoutButtonList\n            checkEmbeddedSupport={checkEmbeddedSupport}\n            deinitialize={deinitializeCustomer}\n            initialize={initializeCustomer}\n            isInitializing={isInitializing}\n            methodIds={checkoutButtonIds}\n            onError={onUnhandledError}\n          />\n\n        return (\n            providerWithCustomCheckout === PaymentMethodId.StripeUPE ?\n                <StripeGuestForm\n                    canSubscribe={canSubscribe}\n                    checkoutButtons={checkoutButtons}\n                    continueAsGuestButtonLabelId=\"customer.continue\"\n                    defaultShouldSubscribe={isSubscribed}\n                    deinitialize={deinitializeCustomer}\n                    email={this.draftEmail || email}\n                    initialize={initializeCustomer}\n                    isLoading={isContinuingAsGuest || isInitializing || isExecutingPaymentMethodCheckout}\n                    onChangeEmail={this.handleChangeEmail}\n                    onContinueAsGuest={this.handleContinueAsGuest}\n                    onShowLogin={this.handleShowLogin}\n                    privacyPolicyUrl={privacyPolicyUrl}\n                    requiresMarketingConsent={requiresMarketingConsent}\n                    step={step}\n                />\n                :\n            <GuestForm\n                canSubscribe={canSubscribe}\n                checkoutButtons={checkoutButtons}\n                continueAsGuestButtonLabelId=\"customer.continue\"\n                defaultShouldSubscribe={isSubscribed}\n                email={this.draftEmail || email}\n                isLoading={\n                    isContinuingAsGuest || isInitializing || isExecutingPaymentMethodCheckout\n                }\n                onChangeEmail={this.handleChangeEmail}\n                onContinueAsGuest={this.handleContinueAsGuest}\n                onShowLogin={this.handleShowLogin}\n                privacyPolicyUrl={privacyPolicyUrl}\n                requiresMarketingConsent={requiresMarketingConsent}\n                useFloatingLabel={useFloatingLabel}\n            />\n        );\n    }\n\n    private renderEmailLoginLinkForm(): ReactNode {\n        const { isEmailLoginFormOpen, hasRequestedLoginEmail } = this.state;\n\n        const { isSendingSignInEmail, signInEmailError, signInEmail, useFloatingLabel } =\n            this.props;\n\n        return (\n            <EmailLoginForm\n                email={this.draftEmail}\n                emailHasBeenRequested={hasRequestedLoginEmail}\n                isOpen={isEmailLoginFormOpen}\n                isSendingEmail={isSendingSignInEmail}\n                onRequestClose={this.closeEmailLoginFormForm}\n                onSendLoginEmail={this.handleSendLoginEmail}\n                sentEmail={signInEmail}\n                sentEmailError={signInEmailError}\n                useFloatingLabel={useFloatingLabel}\n            />\n        );\n    }\n\n    private closeEmailLoginFormForm: () => void = () => {\n        this.setState({\n            isEmailLoginFormOpen: false,\n            hasRequestedLoginEmail: false,\n        });\n    };\n\n    private renderCreateAccountForm(): ReactNode {\n        const {\n            customerAccountFields,\n            isCreatingAccount,\n            createAccountError,\n            requiresMarketingConsent,\n            useFloatingLabel,\n        } = this.props;\n\n        return (\n            <CreateAccountForm\n                createAccountError={createAccountError}\n                formFields={customerAccountFields}\n                isCreatingAccount={isCreatingAccount}\n                onCancel={this.handleCancelCreateAccount}\n                onSubmit={this.handleCreateAccount}\n                requiresMarketingConsent={requiresMarketingConsent}\n                useFloatingLabel={useFloatingLabel}\n            />\n        );\n    }\n\n    private renderLoginForm(): ReactNode {\n        const {\n            isEmbedded,\n            email,\n            forgotPasswordUrl,\n            isSignInEmailEnabled,\n            isGuestEnabled,\n            isSendingSignInEmail,\n            isSigningIn,\n            isAccountCreationEnabled,\n            providerWithCustomCheckout,\n            signInError,\n            useFloatingLabel,\n            viewType,\n        } = this.props;\n\n        return (\n            <LoginForm\n                canCancel={isGuestEnabled}\n                continueAsGuestButtonLabelId={\n                    providerWithCustomCheckout\n                        ? 'customer.continue'\n                        : 'customer.continue_as_guest_action'\n                }\n                email={this.draftEmail || email}\n                forgotPasswordUrl={forgotPasswordUrl}\n                isSendingSignInEmail={isSendingSignInEmail}\n                isSignInEmailEnabled={isSignInEmailEnabled && !isEmbedded}\n                isSigningIn={isSigningIn}\n                onCancel={this.handleCancelSignIn}\n                onChangeEmail={this.handleChangeEmail}\n                onContinueAsGuest={this.executePaymentMethodCheckoutOrContinue}\n                onCreateAccount={this.showCreateAccount}\n                onSendLoginEmail={this.handleEmailLoginClicked}\n                onSignIn={this.handleSignIn}\n                shouldShowCreateAccountLink={isAccountCreationEnabled}\n                signInError={signInError}\n                useFloatingLabel={useFloatingLabel}\n                viewType={viewType}\n            />\n        );\n    }\n\n    private handleEmailLoginClicked: () => void = async () => {\n        const { viewType } = this.props;\n\n        try {\n            if (viewType !== CustomerViewType.Login && this.draftEmail) {\n                await this.handleSendLoginEmail({ email: this.draftEmail });\n            }\n        } finally {\n            this.setState({\n                isEmailLoginFormOpen: true,\n            });\n        }\n    };\n\n    private handleSendLoginEmail: (values: EmailLoginFormValues) => Promise<void> = async (\n        values,\n    ) => {\n        const { sendLoginEmail } = this.props;\n\n        try {\n            await sendLoginEmail(values);\n        } finally {\n            this.setState({\n                hasRequestedLoginEmail: true,\n            });\n        }\n    };\n\n    private handleContinueAsGuest: (formValues: GuestFormValues) => Promise<void> = async (\n        formValues,\n    ) => {\n        const {\n            canSubscribe,\n            continueAsGuest,\n            hasBillingId,\n            defaultShouldSubscribe,\n            onChangeViewType = noop,\n            onContinueAsGuest = noop,\n            onContinueAsGuestError = noop,\n            onSubscribeToNewsletter,\n        } = this.props;\n\n        const email = formValues.email.trim();\n        const updateSubscriptionWhenUnchecked =\n            hasBillingId || defaultShouldSubscribe ? false : undefined;\n\n        try {\n            const { data } = await continueAsGuest({\n                email,\n                acceptsMarketingNewsletter:\n                    canSubscribe && formValues.shouldSubscribe\n                        ? true\n                        : updateSubscriptionWhenUnchecked,\n                acceptsAbandonedCartEmails: formValues.shouldSubscribe\n                    ? true\n                    : updateSubscriptionWhenUnchecked,\n            });\n\n            onSubscribeToNewsletter(formValues.shouldSubscribe);\n\n            const customer = data.getCustomer();\n\n            if (customer && customer.shouldEncourageSignIn && customer.isGuest && !customer.isStripeLinkAuthenticated) {\n                return onChangeViewType(CustomerViewType.SuggestedLogin);\n            }\n\n            await this.executePaymentMethodCheckoutOrContinue();\n\n            this.draftEmail = undefined;\n        } catch (error) {\n            if (\n                isErrorWithType(error) &&\n                (error.type === 'update_subscriptions' ||\n                    error.type === 'payment_method_client_invalid')\n            ) {\n                this.draftEmail = undefined;\n\n                onContinueAsGuest();\n            }\n\n            if (isErrorWithType(error) && error.status === 429) {\n                return onChangeViewType(CustomerViewType.EnforcedLogin);\n            }\n\n            if (isErrorWithType(error) && error.status === 403) {\n                return onChangeViewType(CustomerViewType.CancellableEnforcedLogin);\n            }\n\n            onContinueAsGuestError(error);\n        }\n    };\n\n    private handleSignIn: (credentials: CustomerCredentials) => Promise<void> = async (\n        credentials,\n    ) => {\n        const { signIn, onSignIn = noop, onSignInError = noop } = this.props;\n\n        try {\n            await signIn(credentials);\n            onSignIn();\n\n            this.draftEmail = undefined;\n        } catch (error) {\n            onSignInError(error);\n        }\n    };\n\n    private handleCreateAccount: (values: CreateAccountFormValues) => void = async (values) => {\n        const { createAccount = noop, onAccountCreated = noop } = this.props;\n\n        await createAccount(mapCreateAccountFromFormValues(values));\n\n        onAccountCreated();\n    };\n\n    private showCreateAccount: () => void = () => {\n        const { onChangeViewType = noop } = this.props;\n\n        onChangeViewType(CustomerViewType.CreateAccount);\n    };\n\n    private handleCancelCreateAccount: () => void = () => {\n        const { clearError, onChangeViewType = noop, createAccountError } = this.props;\n\n        if (createAccountError) {\n            clearError(createAccountError);\n        }\n\n        onChangeViewType(CustomerViewType.Login);\n    };\n\n    private handleCancelSignIn: () => void = () => {\n        const { clearError, onChangeViewType = noop, signInError } = this.props;\n\n        if (signInError) {\n            clearError(signInError);\n        }\n\n        onChangeViewType(CustomerViewType.Guest);\n    };\n\n    private handleChangeEmail: (email: string) => void = (email) => {\n        const { analyticsTracker } = this.props;\n        this.draftEmail = email;\n        analyticsTracker.customerEmailEntry(email);\n    };\n\n    private handleShowLogin: () => void = () => {\n        const { onChangeViewType = noop } = this.props;\n\n        onChangeViewType(CustomerViewType.Login);\n    };\n\n    private executePaymentMethodCheckoutOrContinue: () => void = async () => {\n        const {\n            executePaymentMethodCheckout,\n            onContinueAsGuest = noop,\n            providerWithCustomCheckout\n        } = this.props;\n\n        if (providerWithCustomCheckout && providerWithCustomCheckout !== PaymentMethodId.StripeUPE) {\n            await executePaymentMethodCheckout({\n                methodId: providerWithCustomCheckout,\n                continueWithCheckoutCallback: onContinueAsGuest,\n                checkoutPaymentMethodExecuted: (payload) => this.checkoutPaymentMethodExecuted(payload)\n            });\n        } else {\n            onContinueAsGuest();\n        }\n    };\n\n    private checkoutPaymentMethodExecuted(payload?: CheckoutPaymentMethodExecutedOptions) {\n        const { analyticsTracker } = this.props;\n        analyticsTracker.customerPaymentMethodExecuted(payload);\n    }\n}\n\nexport function mapToWithCheckoutCustomerProps({\n    checkoutService,\n    checkoutState,\n}: CheckoutContextProps): WithCheckoutCustomerProps | null {\n    const {\n        data: {\n            getBillingAddress,\n            getCustomerAccountFields,\n            getCheckout,\n            getCustomer,\n            getSignInEmail,\n            getConfig,\n        },\n        errors: { getSignInError, getSignInEmailError, getCreateCustomerAccountError },\n        statuses: {\n            isContinuingAsGuest,\n            isExecutingPaymentMethodCheckout,\n            isInitializingCustomer,\n            isSigningIn,\n            isSendingSignInEmail,\n            isCreatingCustomerAccount,\n        },\n    } = checkoutState;\n\n    const billingAddress = getBillingAddress();\n    const checkout = getCheckout();\n    const customer = getCustomer();\n    const signInEmail = getSignInEmail();\n    const config = getConfig();\n\n    if (!checkout || !config) {\n        return null;\n    }\n\n    const {\n        checkoutSettings: {\n            privacyPolicyUrl,\n            requiresMarketingConsent,\n            isSignInEmailEnabled,\n            isAccountCreationEnabled,\n        },\n    } = config as StoreConfig & { checkoutSettings: { isAccountCreationEnabled: boolean } };\n\n    return {\n        customerAccountFields: getCustomerAccountFields(),\n        canSubscribe: config.shopperConfig.showNewsletterSignup,\n        checkoutButtonIds: config.checkoutSettings.remoteCheckoutProviders,\n        clearError: checkoutService.clearError,\n        createAccount: checkoutService.createCustomerAccount,\n        continueAsGuest: checkoutService.continueAsGuest,\n        sendLoginEmail: checkoutService.sendSignInEmail,\n        defaultShouldSubscribe: config.shopperConfig.defaultNewsletterSignup,\n        deinitializeCustomer: checkoutService.deinitializeCustomer,\n        executePaymentMethodCheckout: checkoutService.executePaymentMethodCheckout,\n        email: billingAddress?.email || customer?.email,\n        firstName: customer?.firstName,\n        forgotPasswordUrl: config.links.forgotPasswordLink,\n        initializeCustomer: checkoutService.initializeCustomer,\n        isCreatingAccount: isCreatingCustomerAccount(),\n        createAccountError: getCreateCustomerAccountError(),\n        hasBillingId: !!billingAddress?.id,\n        isContinuingAsGuest: isContinuingAsGuest(),\n        isExecutingPaymentMethodCheckout: isExecutingPaymentMethodCheckout(),\n        isInitializing: isInitializingCustomer(),\n        isSignInEmailEnabled,\n        isAccountCreationEnabled,\n        isGuestEnabled: config.checkoutSettings.guestCheckoutEnabled,\n        isSigningIn: isSigningIn(),\n        isSendingSignInEmail: isSendingSignInEmail(),\n        signInEmail,\n        signInEmailError: getSignInEmailError(),\n        privacyPolicyUrl,\n        providerWithCustomCheckout: config.checkoutSettings.providerWithCustomCheckout || undefined,\n        requiresMarketingConsent,\n        signIn: checkoutService.signInCustomer,\n        signInError: getSignInError(),\n        useFloatingLabel: isFloatingLabelEnabled(config.checkoutSettings),\n    };\n}\n\nexport default withAnalytics(withCheckout(mapToWithCheckoutCustomerProps)(Customer));\n","import { forIn, isDate, padStart } from 'lodash';\n\nexport default function mapCustomFormFieldsFromFormValues(customFieldsObject: {\n    [id: string]: any;\n}): Array<{ fieldId: string; fieldValue: string }> {\n    const customFields: Array<{ fieldId: string; fieldValue: string }> = [];\n\n    forIn(customFieldsObject, (value, key) => {\n        let fieldValue: string;\n\n        if (isDate(value)) {\n            const padMonth = padStart((value.getMonth() + 1).toString(), 2, '0');\n            const padDay = padStart(value.getDate().toString(), 2, '0');\n\n            fieldValue = `${value.getFullYear()}-${padMonth}-${padDay}`;\n        } else {\n            fieldValue = value;\n        }\n\n        customFields.push({\n            fieldId: key,\n            fieldValue,\n        });\n    });\n\n    return customFields;\n}\n","import React, { FunctionComponent, MouseEventHandler } from 'react';\n\nimport { preventDefault } from '../common/dom';\nimport { parseAnchor } from '../common/utility';\n\nimport { TranslatedStringProps } from './TranslatedString';\nimport withLanguage, { WithLanguageProps } from './withLanguage';\n\nexport type TranslatedLinkProps = TranslatedStringProps & {\n    testId?: string;\n    onClick: MouseEventHandler;\n};\n\nconst TranslatedLink: FunctionComponent<TranslatedLinkProps & WithLanguageProps> = ({\n    data,\n    id,\n    language,\n    onClick,\n    testId,\n}) => {\n    const translatedString = language.translate(id, data);\n    const parsedString = parseAnchor(translatedString);\n\n    return parsedString.length ? (\n        <>\n            {parsedString[0]}\n            <a data-test={testId} href=\"#\" onClick={preventDefault(onClick)}>\n                {parsedString[1]}\n            </a>\n            {parsedString[2]}\n        </>\n    ) : (\n        <>{translatedString}</>\n    );\n};\n\nexport default withLanguage(TranslatedLink);\n","import { FieldProps } from 'formik';\nimport { kebabCase } from 'lodash';\nimport React, { FunctionComponent, memo, ReactNode, useCallback } from 'react';\n\nimport BasicFormField from './BasicFormField';\nimport CheckboxInput from './CheckboxInput';\nimport FormFieldError from './FormFieldError';\n\nexport interface CheckboxFormFieldProps {\n    additionalClassName?: string;\n    disabled?: boolean;\n    name: string;\n    id?: string;\n    labelContent: ReactNode;\n    onChange?(isChecked: boolean): void;\n}\n\nconst CheckboxFormField: FunctionComponent<CheckboxFormFieldProps> = ({\n    additionalClassName,\n    disabled = false,\n    labelContent,\n    onChange,\n    name,\n    id,\n}) => {\n    const renderField = useCallback(\n        ({ field }: FieldProps) => (\n            <>\n                <CheckboxInput\n                    {...field}\n                    checked={!!field.value}\n                    disabled={disabled}\n                    id={id || field.name}\n                    label={labelContent}\n                />\n\n                <FormFieldError\n                    errorId={`${id ?? name}-field-error-message`}\n                    name={name}\n                    testId={`${kebabCase(name)}-field-error-message`}\n                />\n            </>\n        ),\n        [disabled, id, labelContent, name],\n    );\n\n    return (\n        <BasicFormField\n            additionalClassName={additionalClassName}\n            name={name}\n            onChange={onChange}\n            render={renderField}\n        />\n    );\n};\n\nexport default memo(CheckboxFormField);\n","import classNames from 'classnames';\nimport React, { forwardRef, ReactNode, Ref } from 'react';\n\nimport Input, { InputProps } from './Input';\nimport Label from './Label';\n\nexport interface CheckboxInputProps extends InputProps {\n    additionalClassName?: string;\n    label: ReactNode;\n    value: string;\n    checked: boolean;\n}\n\nconst CheckboxInput = forwardRef(\n    (\n        { additionalClassName, label, id, ...rest }: CheckboxInputProps,\n        ref: Ref<HTMLInputElement>,\n    ) => (\n        <>\n            <Input\n                {...rest}\n                className={classNames(\n                    'form-checkbox',\n                    'optimizedCheckout-form-checkbox',\n                    additionalClassName,\n                )}\n                id={id}\n                ref={ref}\n                type=\"checkbox\"\n            />\n            <Label htmlFor={id}>{label}</Label>\n        </>\n    ),\n);\n\nexport default CheckboxInput;\n","import { createInjectHoc, InjectHoc } from '../common/hoc';\n\nimport LocaleContext from './LocaleContext';\n\nexport interface WithDateProps {\n    date: {\n        inputFormat: string;\n    };\n}\n\nconst withDate: InjectHoc<WithDateProps> = createInjectHoc(LocaleContext, {\n    displayNamePrefix: 'withDate',\n    pickProps: (value, key) => key === 'date' && !!value,\n});\n\nexport default withDate;\n","import classNames from 'classnames';\nimport React, { forwardRef, ReactNode, Ref } from 'react';\n\nimport Input, { InputProps } from './Input';\nimport Label from './Label';\n\nexport interface RadioInputProps extends InputProps {\n    additionalClassName?: string;\n    label: ReactNode;\n    value: string;\n    checked: boolean;\n}\n\nconst RadioInput = forwardRef(\n    (\n        { additionalClassName, label, value, checked, id, ...rest }: RadioInputProps,\n        ref: Ref<HTMLInputElement>,\n    ) => (\n        <>\n            <Input\n                {...rest}\n                checked={checked}\n                className={classNames(\n                    'form-radio',\n                    'optimizedCheckout-form-radio',\n                    additionalClassName,\n                )}\n                id={id}\n                ref={ref}\n                type=\"radio\"\n                value={value}\n            />\n            <Label htmlFor={id}>{label}</Label>\n        </>\n    ),\n);\n\nexport default RadioInput;\n","import { FormFieldItem } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport { isDate, noop } from 'lodash';\nimport React, { FunctionComponent, memo, useCallback } from 'react';\nimport ReactDatePicker from 'react-datepicker';\n\nimport { withDate, WithDateProps } from '../../locale';\nimport { IconChevronDown } from '../icon';\n\nimport CheckboxInput from './CheckboxInput';\nimport DynamicFormFieldType from './DynamicFormFieldType';\nimport { InputProps } from './Input';\nimport RadioInput from './RadioInput';\nimport TextArea from './TextArea';\nimport TextInput from './TextInput';\n\nexport interface DynamicInputProps extends InputProps {\n    id: string;\n    additionalClassName?: string;\n    value?: string | string[];\n    rows?: number;\n    fieldType?: DynamicFormFieldType;\n    options?: FormFieldItem[];\n    useFloatingLabel?: boolean;\n}\n\nconst DynamicInput: FunctionComponent<DynamicInputProps & WithDateProps> = ({\n    additionalClassName,\n    date,\n    fieldType,\n    id,\n    name,\n    onChange = noop,\n    options,\n    placeholder,\n    useFloatingLabel,\n    value,\n    ...rest\n}) => {\n    const { inputFormat } = date;\n    const handleDateChange = useCallback(\n        (dateValue, event) =>\n            onChange({\n                ...event,\n                target: {\n                    name,\n                    value: dateValue,\n                },\n            }),\n        [onChange, name],\n    );\n\n    switch (fieldType) {\n        case DynamicFormFieldType.dropdown:\n            return (\n                <>\n                    <div\n                        className={classNames(\n                            { 'dropdown-chevron': !useFloatingLabel },\n                            { 'floating-select-chevron': useFloatingLabel },\n                        )}>\n                        <IconChevronDown />\n                    </div>\n                    <select\n                        {...(rest as any)}\n                        className={classNames(\n                            { 'floating-select': useFloatingLabel },\n                            'form-select optimizedCheckout-form-select',\n                        )}\n                        data-test={`${id}-select`}\n                        id={id}\n                        name={name}\n                        onChange={onChange}\n                        value={value === null ? '' : value}\n                    >\n                        {placeholder && <option value=\"\">{placeholder}</option>}\n                        {options &&\n                            options.map(({ label, value: optionValue }) => (\n                                <option key={optionValue} value={optionValue}>\n                                    {label}\n                                </option>\n                            ))}\n                    </select>\n                </>\n            );\n\n        case DynamicFormFieldType.radio:\n            if (!options || !options.length) {\n                return null;\n            }\n\n            return (\n                <>\n                    {options.map(({ label, value: optionValue }) => (\n                        <RadioInput\n                            {...rest}\n                            checked={optionValue === value}\n                            id={`${id}-${optionValue}`}\n                            key={optionValue}\n                            label={label}\n                            name={name}\n                            onChange={onChange}\n                            testId={`${id}-${optionValue}-radio`}\n                            value={optionValue}\n                        />\n                    ))}\n                </>\n            );\n\n        case DynamicFormFieldType.checkbox:\n            if (!options || !options.length) {\n                return null;\n            }\n\n            return (\n                <>\n                    {options.map(({ label, value: optionValue }) => (\n                        <CheckboxInput\n                            {...rest}\n                            checked={Array.isArray(value) ? value.includes(optionValue) : false}\n                            id={`${id}-${optionValue}`}\n                            key={optionValue}\n                            label={label}\n                            name={name}\n                            onChange={onChange}\n                            testId={`${id}-${optionValue}-checkbox`}\n                            value={optionValue}\n                        />\n                    ))}\n                </>\n            );\n\n        case DynamicFormFieldType.date:\n            return (\n                <ReactDatePicker\n                    {...(rest as any)}\n                    autoComplete=\"off\"\n                    // FIXME: we can avoid this by simply using onChangeRaw, but it's not being triggered properly\n                    // https://github.com/Hacker0x01/react-datepicker/issues/1357\n                    // onChangeRaw={ rest.onChange }\n                    calendarClassName=\"optimizedCheckout-contentPrimary\"\n                    className={classNames('form-input optimizedCheckout-form-input', {\n                        'floating-input': useFloatingLabel,\n                    })}\n                    dateFormat={inputFormat}\n                    maxDate={rest.max ? new Date(`${rest.max}T00:00:00Z`) : undefined}\n                    minDate={rest.min ? new Date(`${rest.min}T00:00:00Z`) : undefined}\n                    name={name}\n                    onChange={handleDateChange}\n                    placeholderText={inputFormat.toUpperCase()}\n                    popperClassName=\"optimizedCheckout-contentPrimary\"\n                    selected={isDate(value) ? value : undefined}\n                />\n            );\n\n        case DynamicFormFieldType.multiline:\n            return (\n                <TextArea\n                    {...(rest as any)}\n                    id={id}\n                    name={name}\n                    onChange={onChange}\n                    testId={`${id}-text`}\n                    type={fieldType}\n                    useFloatingLabel={useFloatingLabel}\n                    value={value}\n                />\n            );\n\n        default:\n            return (\n                <TextInput\n                    {...rest}\n                    id={id}\n                    name={name}\n                    onChange={onChange}\n                    placeholder={placeholder}\n                    testId={`${id}-${\n                        fieldType === DynamicFormFieldType.password ? 'password' : 'text'\n                    }`}\n                    type={fieldType}\n                    useFloatingLabel={useFloatingLabel}\n                    value={value}\n                />\n            );\n    }\n};\n\nexport default memo(withDate(DynamicInput));\n","import React, { FunctionComponent, memo, MouseEvent, useCallback } from 'react';\n\nimport { TranslatedString } from '../../locale';\n\nimport './MultiCheckboxControl.scss';\n\nexport interface MultiCheckboxControlProps {\n    testId?: string;\n    onSelectedAll(): void;\n    onSelectedNone(): void;\n}\n\nconst MultiCheckboxControl: FunctionComponent<MultiCheckboxControlProps> = ({\n    testId,\n    onSelectedAll,\n    onSelectedNone,\n}) => {\n    const handleSelectAllClick = useCallback(\n        (event: MouseEvent) => {\n            event.preventDefault();\n            onSelectedAll();\n        },\n        [onSelectedAll],\n    );\n\n    const handleSelectNoneClick = useCallback(\n        (event: MouseEvent) => {\n            event.preventDefault();\n            onSelectedNone();\n        },\n        [onSelectedNone],\n    );\n\n    return (\n        <ul className=\"multiCheckbox--controls\">\n            <li className=\"multiCheckbox--control\">\n                <TranslatedString id=\"address.select\" />\n            </li>\n\n            <li className=\"multiCheckbox--control\">\n                <a\n                    data-test={`${testId}Checkbox-all-button`}\n                    href=\"#\"\n                    onClick={handleSelectAllClick}\n                >\n                    <TranslatedString id=\"address.select_all\" />\n                </a>\n            </li>\n\n            <li className=\"multiCheckbox--control\">\n                <a\n                    data-test={`${testId}Checkbox-none-button`}\n                    href=\"#\"\n                    onClick={handleSelectNoneClick}\n                >\n                    <TranslatedString id=\"address.select_none\" />\n                </a>\n            </li>\n        </ul>\n    );\n};\n\nexport default memo(MultiCheckboxControl);\n","import { FormFieldItem } from '@bigcommerce/checkout-sdk';\nimport { FieldArray, FieldArrayRenderProps, getIn } from 'formik';\nimport { difference, kebabCase, noop, pick } from 'lodash';\nimport React, { ChangeEvent, FunctionComponent, memo, ReactNode, useCallback } from 'react';\n\nimport DynamicFormFieldType from './DynamicFormFieldType';\nimport DynamicInput from './DynamicInput';\nimport FormFieldContainer from './FormFieldContainer';\nimport FormFieldError from './FormFieldError';\nimport MultiCheckboxControl from './MultiCheckboxControl';\n\nexport interface CheckboxGroupFormFieldProps {\n    id: string;\n    label: ReactNode;\n    name: string;\n    options: FormFieldItem[];\n    onChange?(values: string[]): void;\n}\n\ntype MultiCheckboxFormFieldProps = CheckboxGroupFormFieldProps &\n    Pick<FieldArrayRenderProps, 'push' | 'remove' | 'pop' | 'form'>;\n\nconst MultiCheckboxFormField: FunctionComponent<MultiCheckboxFormFieldProps> = ({\n    form: { values, errors },\n    id,\n    label,\n    name,\n    onChange = noop,\n    options,\n    push,\n    remove,\n}) => {\n    const handleSelectAll = useCallback(() => {\n        const checkedValues: string[] = getIn(values, name) || [];\n\n        difference(\n            options.map(({ value }) => value),\n            checkedValues,\n        ).forEach((val) => push(val));\n\n        onChange(getIn(values, name));\n    }, [name, onChange, options, push, values]);\n\n    const handleSelectNone = useCallback(() => {\n        const checkedValues: string[] = getIn(values, name) || [];\n\n        checkedValues.forEach(() => remove(0));\n\n        onChange(getIn(values, name));\n    }, [name, onChange, remove, values]);\n\n    const handleInputChange = useCallback(\n        (event: ChangeEvent<HTMLInputElement>) => {\n            const checkedValues: string[] = getIn(values, name) || [];\n            const { value, checked } = event.target;\n\n            if (checked) {\n                push(value);\n            } else {\n                remove(checkedValues.indexOf(value));\n            }\n\n            onChange(getIn(values, name));\n        },\n        [name, onChange, push, remove, values],\n    );\n\n    return (\n        <FormFieldContainer hasError={getIn(errors, name) && getIn(errors, name).length}>\n            {label}\n\n            {options.length > 1 && (\n                <MultiCheckboxControl\n                    onSelectedAll={handleSelectAll}\n                    onSelectedNone={handleSelectNone}\n                    testId={id}\n                />\n            )}\n\n            <DynamicInput\n                fieldType={DynamicFormFieldType.checkbox}\n                id={id}\n                name={name}\n                onChange={handleInputChange}\n                options={options}\n                value={getIn(values, name) || []}\n            />\n\n            <FormFieldError\n                errorId={`${id ?? name}-field-error-message`}\n                name={name}\n                testId={`${kebabCase(name)}-field-error-message`}\n            />\n        </FormFieldContainer>\n    );\n};\n\nconst CheckboxGroupFormField: FunctionComponent<CheckboxGroupFormFieldProps> = ({\n    id,\n    label,\n    name,\n    onChange,\n    options,\n}) => {\n    const renderField = useCallback(\n        (renderProps: FieldArrayRenderProps) => (\n            <MultiCheckboxFormField\n                id={id}\n                label={label}\n                name={name}\n                onChange={onChange}\n                options={options}\n                {...pick(renderProps, ['form', 'pop', 'push', 'remove'])}\n            />\n        ),\n        [id, label, name, onChange, options],\n    );\n\n    return <FieldArray name={name} render={renderField} />;\n};\n\nexport default memo(CheckboxGroupFormField);\n","import { FormField as FormFieldType } from '@bigcommerce/checkout-sdk';\nimport classNames from 'classnames';\nimport { FieldProps } from 'formik';\nimport { includes } from 'lodash';\nimport React, { FunctionComponent, memo, ReactNode, useCallback, useMemo } from 'react';\n\nimport { TranslatedString } from '../../locale';\n\nimport CheckboxGroupFormField from './CheckboxGroupFormField';\nimport DynamicFormFieldType from './DynamicFormFieldType';\nimport DynamicInput from './DynamicInput';\nimport FormField from './FormField';\nimport Label from './Label';\n\nexport interface DynamicFormFieldOption {\n    code: string;\n    name: string;\n}\n\nexport interface DynamicFormFieldProps {\n    field: FormFieldType;\n    inputId?: string;\n    extraClass?: string;\n    autocomplete?: string;\n    parentFieldName?: string;\n    placeholder?: string;\n    label?: ReactNode;\n    useFloatingLabel?: boolean;\n    onChange?(value: string | string[]): void;\n}\n\nconst DynamicFormField: FunctionComponent<DynamicFormFieldProps> = ({\n    field: {\n        fieldType,\n        type,\n        secret,\n        name,\n        label: fieldLabel,\n        required,\n        options,\n        max,\n        min,\n        maxLength,\n    },\n    parentFieldName,\n    onChange,\n    placeholder,\n    inputId,\n    autocomplete,\n    label,\n    extraClass,\n    useFloatingLabel,\n}) => {\n    const fieldInputId = inputId || name;\n    const fieldName = parentFieldName ? `${parentFieldName}.${name}` : name;\n    const isFloatingLabelSupportedFieldType = Boolean(\n        useFloatingLabel &&\n            (includes(['text', 'password', 'dropdown', 'date', 'multiline'], fieldType) ||\n                !fieldType),\n    );\n    const labelComponent = useMemo(\n        () => (\n            <Label\n                htmlFor={fieldInputId}\n                id={`${fieldInputId}-label`}\n                useFloatingLabel={isFloatingLabelSupportedFieldType}\n            >\n                {label || fieldLabel}\n                {!required && (\n                    <>\n                        {' '}\n                        <small className=\"optimizedCheckout-contentSecondary\">\n                            <TranslatedString id=\"common.optional_text\" />\n                        </small>\n                    </>\n                )}\n            </Label>\n        ),\n        [fieldInputId, fieldLabel, required, isFloatingLabelSupportedFieldType, label],\n    );\n\n    const dynamicFormFieldType = useMemo((): DynamicFormFieldType => {\n        if (fieldType === 'text') {\n            if (type === 'integer') {\n                return DynamicFormFieldType.number;\n            }\n\n            if (includes(name, 'phone') || includes(name, 'tel')) {\n                return DynamicFormFieldType.telephone;\n            }\n\n            return secret ? DynamicFormFieldType.password : DynamicFormFieldType.text;\n        }\n\n        return fieldType as DynamicFormFieldType;\n    }, [fieldType, type, secret, name]);\n\n    const renderInput = useCallback(\n        ({ field }: FieldProps<string>) => (\n            <DynamicInput\n                {...field}\n                aria-labelledby={`${fieldInputId}-label ${fieldInputId}-field-error-message`}\n                autoComplete={autocomplete}\n                fieldType={dynamicFormFieldType}\n                id={fieldInputId}\n                max={max}\n                maxLength={maxLength || undefined}\n                min={min}\n                options={options && options.items}\n                placeholder={placeholder || (options && options.helperLabel)}\n                rows={options && (options as any).rows}\n                useFloatingLabel={isFloatingLabelSupportedFieldType}\n            />\n        ),\n        [\n            fieldInputId,\n            max,\n            maxLength,\n            min,\n            options,\n            placeholder,\n            dynamicFormFieldType,\n            autocomplete,\n        ],\n    );\n\n    return (\n        <div\n            className={classNames(\n                'dynamic-form-field',\n                { 'floating-form-field': isFloatingLabelSupportedFieldType },\n                extraClass,\n            )}\n        >\n            {fieldType === DynamicFormFieldType.checkbox ? (\n                <CheckboxGroupFormField\n                    id={fieldInputId}\n                    label={labelComponent}\n                    name={fieldName}\n                    onChange={onChange}\n                    options={(options && options.items) || []}\n                />\n            ) : (\n                <FormField\n                    id={fieldInputId}\n                    input={renderInput}\n                    label={labelComponent}\n                    name={fieldName}\n                    onChange={onChange}\n                    useFloatingLabel={isFloatingLabelSupportedFieldType}\n                />\n            )}\n        </div>\n    );\n};\n\nexport default memo(DynamicFormField);\n","import classNames from 'classnames';\nimport React, { forwardRef, Ref, TextareaHTMLAttributes } from 'react';\n\nexport interface TextAreaProps extends TextareaHTMLAttributes<HTMLTextAreaElement> {\n    additionalClassName?: string;\n    testId?: string;\n    useFloatingLabel?: boolean;\n}\n\nconst TextArea = forwardRef(\n    (\n        { additionalClassName, testId, className, useFloatingLabel, ...rest }: TextAreaProps,\n        ref: Ref<HTMLTextAreaElement>,\n    ) => {\n        return (\n            <textarea\n                {...rest}\n                className={\n                    className ||\n                    classNames(\n                        { 'floating-textarea': useFloatingLabel },\n                        'form-input',\n                        'optimizedCheckout-form-input',\n                        additionalClassName,\n                    )\n                }\n                data-test={testId}\n                ref={ref}\n            />\n        );\n    },\n);\n\nexport default TextArea;\n","import React, { FunctionComponent } from 'react';\n\nimport withIconContainer from './withIconContainer';\n\nconst IconChevronDown: FunctionComponent = () => (\n    <svg height=\"24\" viewBox=\"0 0 24 24\" width=\"24\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\" />\n    </svg>\n);\n\nexport default withIconContainer(IconChevronDown);\n"],"names":["getAppliedStyles","element","properties","declaration","window","getComputedStyle","reduce","result","propertyName","getPropertyValue","kebabCase","isFloatingLabelEnabled","checkoutSettings","features","parseAnchor","text","div","document","createElement","innerHTML","anchor","querySelector","anchorSiblings","split","outerHTML","EMAIL_REGEXP","getEmailValidationSchema","language","email","max","matches","translate","required","getTranslateCreateCustomerError","type","label","min","memoize","formFields","passwordRequirements","description","numeric","alpha","minLength","firstName","lastName","password","concat","getCustomFormFieldsValidationSchema","withLanguage","withFormik","handleSubmit","values","onSubmit","noop","mapPropsToValues","customFields","acceptsMarketingEmails","validationSchema","find","requirements","Error","getCreateCustomerValidationSchema","getPasswordRequirements","createAccountError","isCreatingAccount","onCancel","useFloatingLabel","createAccountErrorMessage","useMemo","isRequestError","status","splitMessage","message","length","TranslatedString","data","trim","id","Form","className","testId","Fieldset","Alert","map","field","DynamicFormField","autocomplete","name","extraClass","key","parentFieldName","custom","undefined","Button","disabled","variant","href","onClick","preventDefault","memo","onChange","renderInput","useCallback","props","TextInput","autoComplete","labelContent","FormField","input","onSendLoginEmail","isOpen","isSendingEmail","emailHasBeenRequested","onRequestClose","sentEmailError","sentEmail","submitForm","formEmail","modalHeaderStringId","okButton","footer","LoadingSpinner","isLoading","sent_email","TranslatedLink","error","form","expiry","TranslatedHtml","minutes","Math","round","Modal","additionalBodyClassName","additionalModalClassName","header","ModalHeader","shouldShowCloseButton","PrivacyPolicyCheckboxFieldLink","url","CheckboxFormField","additionalClassName","requiresMarketingConsent","Input","checked","value","Label","htmlFor","defaultShouldSubscribe","shouldSubscribe","privacyPolicy","onContinueAsGuest","privacyPolicyUrl","baseSchema","isRequired","schemaFields","oneOf","getPrivacyPolicyValidationSchema","canSubscribe","checkoutButtons","continueAsGuestButtonLabelId","onChangeEmail","onShowLogin","renderField","fieldProps","legend","Legend","hidden","BasicFormField","render","PrivacyPolicyField","withIconContainer","viewBox","xmlns","d","Toggle","openByDefault","toggle","onSignIn","canCancel","forgotPasswordUrl","isSignInEmailEnabled","isSigningIn","onCreateAccount","signInError","shouldShowCreateAccountLink","viewType","CustomerViewType","changeEmailLink","body","mapErrorMessage","rel","target","mapCreateAccountFromFormValues","mapCustomFormFieldsFromFormValues","initialize","deinitialize","step","useState","continueAsAGuestButton","setContinueAsAGuestButton","emailValue","setEmailValue","authentication","setAuthentication","isStripeLoading","setIsStripeLoading","isNewAuth","setIsNewAuth","handleOnClickSubmitButton","setEmailCallback","authenticated","useEffect","isComplete","handleLoading","mounted","methodId","stripeupe","container","onEmailChange","getStyles","getStripeStyles","gatewayId","getStylesFromElement","parentContainer","getElementById","containerId","formInput","formLabel","formError","labelText","color","fieldText","fieldPlaceholderText","fieldErrorText","fieldBackground","fieldInnerShadow","fieldBorder","buttonText","LoadingOverlay","hideContentWhenLoading","placeholder","state","isEmailLoginFormOpen","isReady","hasRequestedLoginEmail","closeEmailLoginFormForm","setState","handleEmailLoginClicked","this","draftEmail","handleSendLoginEmail","sendLoginEmail","handleContinueAsGuest","formValues","continueAsGuest","hasBillingId","onChangeViewType","onContinueAsGuestError","onSubscribeToNewsletter","updateSubscriptionWhenUnchecked","acceptsMarketingNewsletter","acceptsAbandonedCartEmails","customer","getCustomer","shouldEncourageSignIn","isGuest","isStripeLinkAuthenticated","executePaymentMethodCheckoutOrContinue","isErrorWithType","handleSignIn","credentials","signIn","onSignInError","handleCreateAccount","createAccount","onAccountCreated","showCreateAccount","handleCancelCreateAccount","clearError","handleCancelSignIn","handleChangeEmail","analyticsTracker","customerEmailEntry","handleShowLogin","executePaymentMethodCheckout","providerWithCustomCheckout","PaymentMethodId","continueWithCheckoutCallback","checkoutPaymentMethodExecuted","payload","componentDidMount","initializeCustomer","onReady","onUnhandledError","componentWillUnmount","deinitializeCustomer","shouldRenderGuestForm","shouldRenderCreateAccountForm","shouldRenderLoginForm","CustomerSkeleton","renderEmailLoginLinkForm","renderLoginForm","renderGuestForm","renderCreateAccountForm","checkEmbeddedSupport","checkoutButtonIds","isContinuingAsGuest","isExecutingPaymentMethodCheckout","isInitializing","isSubscribed","isWalletButtonsOnTop","CheckoutButtonList","methodIds","onError","isSendingSignInEmail","signInEmailError","signInEmail","customerAccountFields","isEmbedded","isGuestEnabled","isAccountCreationEnabled","customerPaymentMethodExecuted","Component","mapToWithCheckoutCustomerProps","checkoutService","checkoutState","getBillingAddress","getCustomerAccountFields","getCheckout","getSignInEmail","getConfig","getSignInError","getSignInEmailError","getCreateCustomerAccountError","isInitializingCustomer","isCreatingCustomerAccount","billingAddress","checkout","config","shopperConfig","showNewsletterSignup","remoteCheckoutProviders","createCustomerAccount","sendSignInEmail","defaultNewsletterSignup","links","forgotPasswordLink","guestCheckoutEnabled","signInCustomer","withAnalytics","withCheckout","Customer","customFieldsObject","forIn","fieldValue","isDate","padMonth","padStart","getMonth","toString","padDay","getDate","getFullYear","push","fieldId","translatedString","parsedString","errorId","forwardRef","ref","rest","createInjectHoc","LocaleContext","displayNamePrefix","pickProps","date","fieldType","options","inputFormat","handleDateChange","dateValue","event","DynamicFormFieldType","IconChevronDown","optionValue","CheckboxInput","Array","isArray","includes","calendarClassName","dateFormat","maxDate","Date","minDate","placeholderText","toUpperCase","popperClassName","selected","TextArea","onSelectedAll","onSelectedNone","handleSelectAllClick","handleSelectNoneClick","MultiCheckboxFormField","errors","remove","handleSelectAll","checkedValues","getIn","difference","forEach","val","handleSelectNone","handleInputChange","indexOf","FormFieldContainer","hasError","FormFieldError","renderProps","pick","FieldArray","secret","fieldLabel","maxLength","inputId","fieldInputId","fieldName","isFloatingLabelSupportedFieldType","Boolean","labelComponent","dynamicFormFieldType","items","helperLabel","rows","height","width"],"sourceRoot":""}