{"version":3,"file":"payment-method-v1-dd627de1.js","mappings":"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","sources":["webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/standard-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/set-prototype-of.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/errors/order-finalization-not-required-error.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/no-payment-integration/src/no-payment-data-required-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/no-payment-integration/src/create-no-payment-strategy.ts","webpack://checkout/@bigcommerce/checkout-sdk/./packages/payment-integration-api/src/to-resolvable-module.ts","webpack://checkout/./packages/core/src/app/payment/paymentMethod/PaymentMethod.tsx","webpack://checkout/./packages/payment-integration-api/src/CaptureMessageComponent.tsx"],"sourcesContent":["import CustomError from './custom-error';\nimport setPrototypeOf from './set-prototype-of';\n\n/**\n * This error type should not be constructed directly. It is a base class for\n * all custom errors thrown in this library.\n */\nexport default abstract class StandardError extends Error implements CustomError {\n    name = 'StandardError';\n    type = 'standard';\n\n    constructor(message?: string) {\n        super(message || 'An unexpected error has occurred.');\n\n        setPrototypeOf(this, new.target.prototype);\n\n        if (typeof Error.captureStackTrace === 'function') {\n            Error.captureStackTrace(this, new.target);\n        } else {\n            this.stack = new Error(this.message).stack;\n        }\n    }\n}\n","export default function setPrototypeOf(object: any, prototype: object) {\n    if (Object.setPrototypeOf) {\n        Object.setPrototypeOf(object, prototype);\n    } else {\n        object.__proto__ = prototype;\n    }\n\n    return object;\n}\n","import StandardError from './standard-error';\n\n/**\n * Throw this error if we are trying to make an order finalization request for a\n * payment method that does not require such procedure.\n */\nexport default class OrderFinalizationNotRequiredError extends StandardError {\n    constructor() {\n        super('The current order does not need to be finalized at this stage.');\n\n        this.name = 'OrderFinalizationNotRequiredError';\n        this.type = 'order_finalization_not_required';\n    }\n}\n","import { omit } from 'lodash';\n\nimport {\n    OrderFinalizationNotRequiredError,\n    OrderRequestBody,\n    PaymentIntegrationService,\n    PaymentRequestOptions,\n    PaymentStrategy,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nexport default class NoPaymentDataRequiredPaymentStrategy implements PaymentStrategy {\n    constructor(private _paymentIntegrationService: PaymentIntegrationService) {}\n\n    async execute(payload: OrderRequestBody, options?: PaymentRequestOptions): Promise<void> {\n        await this._paymentIntegrationService.submitOrder(omit(payload, 'payment'), options);\n    }\n\n    finalize(): Promise<void> {\n        return Promise.reject(new OrderFinalizationNotRequiredError());\n    }\n\n    initialize(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    deinitialize(): Promise<void> {\n        return Promise.resolve();\n    }\n}\n","import {\n    PaymentStrategyFactory,\n    toResolvableModule,\n} from '@bigcommerce/checkout-sdk/payment-integration-api';\n\nimport NoPaymentDataRequiredPaymentStrategy from './no-payment-data-required-strategy';\n\nconst createNoPaymentStrategy: PaymentStrategyFactory<NoPaymentDataRequiredPaymentStrategy> = (\n    paymentIntegrationService,\n) => new NoPaymentDataRequiredPaymentStrategy(paymentIntegrationService);\n\nexport default toResolvableModule(createNoPaymentStrategy, [{ id: 'nopaymentdatarequired' }]);\n","import ResolvableModule from './resolvable-module';\n\nexport default function toResolvableModule<TModule, TIdentifier>(\n    module: TModule,\n    resolveIds: TIdentifier[],\n): ResolvableModule<TModule, TIdentifier> {\n    return Object.assign(module, { resolveIds });\n}\n","import {\n    type CheckoutSelectors,\n    type CustomerInitializeOptions,\n    type CustomerRequestOptions,\n    type PaymentInitializeOptions,\n    type PaymentMethod,\n    type PaymentRequestOptions,\n} from '@bigcommerce/checkout-sdk';\nimport { createNoPaymentStrategy, } from '@bigcommerce/checkout-sdk/integrations/no-payment';\nimport React, { type FunctionComponent, lazy, memo, Suspense } from 'react';\n\nimport { type CheckoutContextProps } from '@bigcommerce/checkout/contexts';\nimport { CaptureMessageComponent } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { withCheckout } from '../../checkout';\n\nconst HostedCreditCardPaymentMethod = lazy(() => import(/* webpackChunkName: \"hosted-credit-card-payment-method\" */'./HostedCreditCardPaymentMethod'));\nconst HostedPaymentMethod = lazy(() => import(/* webpackChunkName: \"hosted-payment-method\" */'./HostedPaymentMethod'));\n\nimport PaymentMethodId from './PaymentMethodId';\nimport PaymentMethodProviderType from './PaymentMethodProviderType';\nimport PaymentMethodType from './PaymentMethodType';\n\nexport interface PaymentMethodProps {\n    method: PaymentMethod;\n    isEmbedded?: boolean;\n    isUsingMultiShipping?: boolean;\n    onUnhandledError?(error: Error): void;\n    submitForm?(): void;\n}\n\nexport interface WithCheckoutPaymentMethodProps {\n    isInitializing: boolean;\n    deinitializeCustomer(options: CustomerRequestOptions): Promise<CheckoutSelectors>;\n    deinitializePayment(options: PaymentRequestOptions): Promise<CheckoutSelectors>;\n    initializeCustomer(options: CustomerInitializeOptions): Promise<CheckoutSelectors>;\n    initializePayment(options: PaymentInitializeOptions): Promise<CheckoutSelectors>;\n}\n\n/**\n * If possible, try to avoid having components that are specific to a specific\n * payment provider or method. Instead, try to generalise the requirements and\n * use components that can are reusable for multiple payment methods. i.e.:\n * CreditCardPaymentMethod, HostedPaymentMethod etc... If it is really necessary\n * for a particular payment method, you may write a method-specific component for\n * the purpose of configuring a general-purpose component in order to fulfill\n * its specific product or technical requirements.\n */\nconst PaymentMethodComponent: FunctionComponent<\n    PaymentMethodProps & WithCheckoutPaymentMethodProps\n> = (props) => {\n    const { method } = props;\n\n    if (\n        method.id === PaymentMethodId.Humm ||\n        method.id === PaymentMethodId.Laybuy ||\n        method.type === PaymentMethodProviderType.Hosted\n    ) {\n        const sentryMessage =`DataHostedPaymentMethod ${JSON.stringify(method)}`;\n\n        return <>\n                <CaptureMessageComponent message={sentryMessage} />\n                <Suspense><HostedPaymentMethod {...props} /></Suspense>\n            </>;\n    }\n\n    // NOTE: Some payment methods have `method` as `credit-card` but they are\n    // actually not. Therefore, as a workaround, we are doing the following\n    // check last.\n    if (\n        method.method === PaymentMethodType.CreditCard ||\n        method.type === PaymentMethodProviderType.Api\n    ) {\n        const knownMethods = [\n            { id: 'authorizenet', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'clover', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'cba_mpgs', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'cybersourcev2', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'ewayrapid', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'hps', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'nmi', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'quickbooks', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'sagepay', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'stripe', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'usaepay', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'vantiv', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'orbital', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'elavon', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'firstdatae4v14', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'cybersource', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'migs', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'vantivcore', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'bnz', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'shopkeep', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'paymetric', gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: 'googlepay', gateway: null, method: PaymentMethodType.GooglePay, type: PaymentMethodProviderType.Api },\n            { id: \"eway\", gateway:null, method:PaymentMethodType.CreditCard, type:PaymentMethodProviderType.Api },\n            { id: \"wepay\", gateway: null, method: PaymentMethodType.CreditCard, type: PaymentMethodProviderType.Api },\n            { id: \"stripev3\", gateway: null, method: \"multi-option\", type: PaymentMethodProviderType.Api },\n            { id: 'bigpaypay', gateway: null, method: 'zzzblackhole', type: PaymentMethodProviderType.Api },\n            { id: 'testgateway', gateway: null, method: 'zzzblackhole', type: PaymentMethodProviderType.Api },\n            { id: 'afterpay', gateway: null, method: 'pay_by_installment', type: PaymentMethodProviderType.Api },\n        ];\n\n        let sentryMessage: string;\n\n        if (knownMethods.some(knownMethod =>\n            knownMethod.id === method.id &&\n            knownMethod.gateway === method.gateway &&\n            knownMethod.method === method.method &&\n            knownMethod.type === method.type\n        )) {\n            sentryMessage = '';\n        }else {\n            sentryMessage = `DataHostedCreditCardPaymentMethodUpdated ${JSON.stringify(method)}`;\n        }\n\n        return <>\n                <CaptureMessageComponent message={sentryMessage} />\n                <Suspense><HostedCreditCardPaymentMethod {...props} /></Suspense>\n            </>;\n    }\n\n    return null;\n};\n\nfunction mapToWithCheckoutPaymentMethodProps(\n    { checkoutService, checkoutState }: CheckoutContextProps,\n    { method }: PaymentMethodProps,\n): WithCheckoutPaymentMethodProps {\n    const {\n        statuses: { isInitializingPayment },\n    } = checkoutState;\n\n    return {\n        deinitializeCustomer: checkoutService.deinitializeCustomer,\n        deinitializePayment: checkoutService.deinitializePayment,\n        initializeCustomer: checkoutService.initializeCustomer,\n        initializePayment: (options) => {\n            return checkoutService.initializePayment({\n                ...options,\n                integrations: [\n                    ...options.integrations ?? [],\n                    // The strategies below donâ€™t appear to correspond to any existing component,\n                    // so they are initialized globally at the root level.\n                    createNoPaymentStrategy,\n                ],\n            });\n        },\n        isInitializing: isInitializingPayment(method.id),\n    };\n}\n\nexport default withCheckout(mapToWithCheckoutPaymentMethodProps)(memo(PaymentMethodComponent));\n","import { type ReactNode, useEffect } from 'react';\n\nimport { useCheckout } from '@bigcommerce/checkout/contexts';\n\ninterface CaptureMessageComponentProps {\n    message: string;\n}\n\nexport const CaptureMessageComponent = ({ message }: CaptureMessageComponentProps): ReactNode => {\n    const { errorLogger } = useCheckout();\n\n    useEffect(() => {\n        if (!message || !errorLogger) {\n            return;\n        }\n\n        if (errorLogger.logMessage) {\n            errorLogger.logMessage(message);\n        } else {\n            // eslint-disable-next-line no-console\n            console.log(\n                `checkout-js attempted to log the following message: \"${message}\", but no Sentry logger is configured.`,\n            );\n        }\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [message]);\n\n    return null;\n};\n"],"names":["StandardError","Error","constructor","message","prototype","super","name","type","Object","setPrototypeOf","this","__proto__","captureStackTrace","stack","OrderFinalizationNotRequiredError","NoPaymentDataRequiredPaymentStrategy","_paymentIntegrationService","execute","payload","options","submitOrder","omit","finalize","Promise","reject","initialize","resolve","deinitialize","module","paymentIntegrationService","resolveIds","id","assign","HostedCreditCardPaymentMethod","lazy","HostedPaymentMethod","withCheckout","checkoutService","checkoutState","method","statuses","isInitializingPayment","deinitializeCustomer","deinitializePayment","initializeCustomer","initializePayment","integrations","isInitializing","memo","props","PaymentMethodId","Humm","Laybuy","PaymentMethodProviderType","Hosted","sentryMessage","JSON","stringify","CaptureMessageComponent","Suspense","PaymentMethodType","CreditCard","Api","gateway","GooglePay","some","knownMethod","errorLogger","useEffect","logMessage","console","log"],"sourceRoot":""}