"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[211],{84819:(e,t,r)=>{r.r(t),r.d(t,{default:()=>y});var a=r(97582),n=r(67627),c=r(35863),l=r(58897),i=r(92574);const o=function(e){var t=e.children;return n.createElement("header",{className:"cart-header"},n.createElement("h3",{className:"cart-title optimizedCheckout-headingSecondary"},n.createElement(i.Z,{id:"cart.cart_heading"})),t)};var s=r(65228),u=r(71282),m=r(48527),d=r(54701),f=r(50041),h=r(47112),p=r(69638),E=r(43350);const v=function(e){var t=e.onSelect,r=(0,n.useState)([]),c=r[0],l=r[1],i=(0,n.useState)(""),o=i[0],s=i[1];return(0,n.useEffect)((function(){(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t;return(0,a.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e,t,r;return(0,a.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),[4,(0,a.__awaiter)(void 0,void 0,void 0,(function(){var e;return(0,a.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch("/customer/current.jwt?app_client_id=bzhkzdt0f7vrrg92o4iym8rxvd872qj",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"}})];case 1:return[4,t.sent().json()];case 2:return[2,t.sent().token];case 3:return e=t.sent(),console.error("Error fetching token:",e),[2,null];case 4:return[2]}}))}))];case 1:if(!(e=n.sent()))throw new Error("Token not available");return t=function(e){return{Accept:"application/json","Content-Type":"application/json","X-Current-Customer":e}}(e),[4,E.Z.get("https://yx1041xohb.execute-api.us-east-2.amazonaws.com/Prod/query",{headers:t})];case 2:return[2,n.sent().data];case 3:return r=n.sent(),console.error("Error fetching certificates:",r),[2,[]];case 4:return[2]}}))}))];case 1:return e=r.sent(),l(e),console.log(c),[3,3];case 2:return t=r.sent(),console.error("Error loading certificates:",t),[3,3];case 3:return[2]}}))}))}),[]),n.createElement("div",{className:"dynamic-form-field floating-form-field dynamic-form-field--countryCode"},n.createElement("div",{className:"form-field"},n.createElement("div",{className:"floating-select-chevron"},n.createElement("div",{className:"icon"},n.createElement("svg",{height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg"},n.createElement("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})))),n.createElement("select",{"aria-labelledby":"certificateSelect-label certificateSelect-field-error-message",className:"floating-select form-select optimizedCheckout-form-select","data-test":"certificateSelect-select",id:"certificateSelect",name:"certificateSelect",value:o,onChange:function(e){s(e.target.value),t(e.target.value)}},n.createElement("option",{value:""},"Select a certificate"),c.map((function(e){return n.createElement("option",{key:e.id,value:e.id},e.companyId)}))),n.createElement("label",{htmlFor:"certificateSelect",id:"certificateSelect-label",className:"floating-label form-label optimizedCheckout-form-label"},"Certificate")))};const g=(0,p.Z)((function(e){var t=e.checkoutState.data,r=t.getBillingAddress,a=t.getCheckout,n=t.getCustomer,c=r(),l=a(),i=n();return c&&l&&i?{email:c.email||i.email,customer:i}:null}))((function(e){var t=e.customer,r=(0,n.useState)(""),a=r[0],c=r[1];return t.isGuest?null:n.createElement(n.Fragment,null,n.createElement(n.Fragment,null,n.createElement("button",null,"Use Tax/ Exempt Certificate"),n.createElement(v,{onSelect:function(e){c(e),console.log("Selected Certificate:",e)}}),a&&n.createElement("p",null,"Selected Certificate ID: ",a)))}));const y=function(e){var t=e.isTaxIncluded,r=e.taxes,p=e.storeCurrency,E=e.shopperCurrency,v=e.headerLink,y=e.additionalLineItems,C=e.lineItems,x=e.total,b=(0,a.__rest)(e,["isTaxIncluded","taxes","storeCurrency","shopperCurrency","headerLink","additionalLineItems","lineItems","total"]),S=(0,c.M)(),_=S.extensionService,k=S.isExtensionEnabled,w=Boolean(k()&&_.isRegionEnabled("summary.lastItem.after")),I=(0,n.useMemo)((function(){return(0,h.Z)(C)}),[C]),Z=t&&r&&r.length>0;return(0,n.useEffect)((function(){if(w)return _.renderExtension(l.T.SummaryLastItemAfter,"summary.lastItem.after"),function(){_.removeListeners("summary.lastItem.after")}}),[_,w]),n.createElement("article",{className:"cart optimizedCheckout-orderSummary","data-test":"cart"},n.createElement(o,null,v),n.createElement(m.Z,null,n.createElement(s.Z,{displayLineItemsCount:!0,items:I})),w&&n.createElement("div",{id:l.T.SummaryLastItemAfter}),n.createElement(m.Z,null,n.createElement(d.Z,(0,a.__assign)({isTaxIncluded:t,taxes:r},b)),y),n.createElement(m.Z,null,n.createElement(g,null)),n.createElement(m.Z,null,n.createElement(f.Z,{orderAmount:x,shopperCurrencyCode:E.code,storeCurrencyCode:p.code})),Z&&n.createElement(m.Z,null,n.createElement("h5",{className:"cart-taxItem cart-taxItem--subtotal optimizedCheckout-contentPrimary","data-test":"tax-text"},n.createElement(i.Z,{id:"tax.inclusive_label"})),(r||[]).map((function(e,t){return n.createElement(u.Z,{amount:e.amount,key:t,label:e.name,testId:"cart-taxes"})}))))}}}]);
//# sourceMappingURL=order-summary-b6673b16.js.map