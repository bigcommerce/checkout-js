{"version":3,"sources":["webpack://checkout/../src/timeout.ts","webpack://checkout/../src/script-loader.ts","webpack://checkout/../src/create-script-loader.ts","webpack://checkout/../src/index.ts","webpack://checkout/../src/request-sender.ts","webpack://checkout/../src/browser-support.ts","webpack://checkout/../src/stylesheet-loader.ts","webpack://checkout/../src/create-stylesheet-loader.ts","webpack://checkout/../src/create-request-sender.ts","webpack://checkout/../src/payload-transformer.ts","webpack://checkout/../src/to-form-url-encoded.ts","webpack://checkout/../src/request-factory.ts","webpack://checkout/./node_modules/@bigcommerce/script-loader/node_modules/query-string/index.js","webpack://checkout/../src/is-promise.ts","webpack://checkout/../src/create-timeout.ts","webpack://checkout/../src/get-script-loader.ts","webpack://checkout/../src/get-stylesheet-loader.ts"],"names":["_delay","this","_resolve","_promise","Promise","resolve","onComplete","callback","then","complete","_timeoutToken","window","clearTimeout","start","setTimeout","_browserSupport","_requestSender","_scripts","_preloadedScripts","loadScript","src","options","reject","script","document","createElement","async","onload","onreadystatechange","onerror","event","body","appendChild","loadScripts","urls","all","map","url","preloadScript","prefetch","rel","canSupportRel","preloadedScript","as","href","head","get","credentials","headers","Accept","catch","preloadScripts","createRequestSender","default","_requestFactory","_payloadTransformer","_cookie","_options","sendRequest","requestOptions","_mergeDefaultOptions","request","createRequest","_prependHost","requestHandler","response","toResponse","status","onabort","ontimeout","timeout","abort","send","toRequestBody","method","post","put","patch","delete","defaultOptions","csrfToken","host","test","replace","link","relList","supports","_stylesheets","_preloadedStylesheets","loadStylesheet","stylesheet","prepend","children","insertBefore","loadStylesheets","preloadStylesheet","preloadedStylesheet","preloadStylesheets","cookie","JSON_CONTENT_TYPE_REGEXP","FORM_URLENCODED_CONTENT_TYPE_REGEXP","contentType","_getHeader","JSON","stringify","xhr","_parseResponseHeaders","getAllResponseHeaders","_parseResponseBody","responseText","statusText","parse","rawHeaders","split","reduce","line","parts","key","shift","trim","toLowerCase","join","data","Object","keys","filter","undefined","value","encodeURIComponent","XMLHttpRequest","_configureRequest","open","_formatUrl","params","_configureRequestHeaders","withCredentials","forEach","setRequestHeader","length","queryString","strictUriEncode","objectAssign","decodeComponent","encode","opts","strict","extract","str","queryStart","indexOf","slice","formatter","result","arrayFormat","accumulator","exec","concat","parserForArrayFormat","ret","create","param","val","sort","Boolean","Array","isArray","keysSorter","input","a","b","Number","exports","obj","index","encoderForArrayFormat","val2","push","x","parseUrl","query","promise","delay","instance"],"mappings":"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","file":"transients~billing~shipping-6ba89d73.js","sourcesContent":["export default class Timeout {\n    private _promise: Promise<any>;\n    private _resolve: () => void;\n    private _timeoutToken?: number;\n\n    constructor(\n        private _delay?: number\n    ) {\n        // tslint:disable-next-line:no-empty\n        this._resolve = () => {};\n\n        this._promise = new Promise(resolve => {\n            this._resolve = resolve;\n        });\n    }\n\n    onComplete(callback: () => void): void {\n        this._promise.then(callback);\n    }\n\n    complete(): void {\n        this._resolve();\n\n        if (this._timeoutToken) {\n            window.clearTimeout(this._timeoutToken);\n        }\n    }\n\n    start(): void {\n        if (this._delay) {\n            this._timeoutToken = window.setTimeout(() => this.complete(), this._delay);\n        }\n    }\n}\n","import { RequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\n\nexport interface LoadScriptOptions {\n    async: boolean;\n}\n\nexport interface PreloadScriptOptions {\n    prefetch: boolean;\n}\n\nexport default class ScriptLoader {\n    private _scripts: { [key: string]: Promise<void> } = {};\n    private _preloadedScripts: { [key: string]: Promise<void> } = {};\n\n    /**\n     * @internal\n     */\n    constructor(\n        private _browserSupport: BrowserSupport,\n        private _requestSender: RequestSender\n    ) {}\n\n    loadScript(src: string, options?: LoadScriptOptions): Promise<void> {\n        if (!this._scripts[src]) {\n            this._scripts[src] = new Promise((resolve, reject) => {\n                const script = document.createElement('script') as LegacyHTMLScriptElement;\n                const { async = false } = options || {};\n\n                script.onload = () => resolve();\n                script.onreadystatechange = () => resolve();\n                script.onerror = event => {\n                    delete this._scripts[src];\n                    reject(event);\n                };\n                script.async = async;\n                script.src = src;\n\n                document.body.appendChild(script);\n            });\n        }\n\n        return this._scripts[src];\n    }\n\n    loadScripts(urls: string[], options?: LoadScriptOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.loadScript(url, options)))\n            .then(() => undefined);\n    }\n\n    preloadScript(url: string, options?: PreloadScriptOptions): Promise<void> {\n        if (!this._preloadedScripts[url]) {\n            this._preloadedScripts[url] = new Promise((resolve, reject) => {\n                const { prefetch = false } = options || {};\n                const rel = prefetch ? 'prefetch' : 'preload';\n\n                if (this._browserSupport.canSupportRel(rel)) {\n                    const preloadedScript = document.createElement('link');\n\n                    preloadedScript.as = 'script';\n                    preloadedScript.rel = rel;\n                    preloadedScript.href = url;\n\n                    preloadedScript.onload = () => {\n                        resolve();\n                    };\n\n                    preloadedScript.onerror = () => {\n                        delete this._preloadedScripts[url];\n                        reject();\n                    };\n\n                    document.head.appendChild(preloadedScript);\n                } else {\n                    this._requestSender.get(url, {\n                        credentials: false,\n                        headers: { Accept: 'application/javascript' },\n                    })\n                        .then(() => resolve())\n                        .catch(reject);\n                }\n            });\n        }\n\n        return this._preloadedScripts[url];\n    }\n\n    preloadScripts(urls: string[], options?: PreloadScriptOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.preloadScript(url, options)))\n            .then(() => undefined);\n    }\n}\n\ninterface LegacyHTMLScriptElement extends HTMLScriptElement {\n    // `onreadystatechange` is needed to support legacy IE\n    onreadystatechange(this: HTMLElement, event: Event): any;\n}\n","import { createRequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\nimport ScriptLoader from './script-loader';\n\nexport default function createScriptLoader(): ScriptLoader {\n    return new ScriptLoader(\n        new BrowserSupport(),\n        createRequestSender()\n    );\n}\n","export { default as ScriptLoader, LoadScriptOptions, PreloadScriptOptions } from './script-loader';\nexport { default as createScriptLoader } from './create-script-loader';\nexport { default as getScriptLoader } from './get-script-loader';\n\nexport { default as StylesheetLoader, LoadStylesheetOptions, PreloadStylesheetOptions } from './stylesheet-loader';\nexport { default as createStylesheetLoader } from './create-stylesheet-loader';\nexport { default as getStylesheetLoader } from './get-stylesheet-loader';\n","import { CookiesStatic } from 'js-cookie';\nimport merge from 'lodash/merge';\n\nimport isPromise from './is-promise';\nimport PayloadTransformer from './payload-transformer';\nimport RequestFactory from './request-factory';\nimport RequestOptions from './request-options';\nimport RequestSenderOptions from './request-sender-options';\nimport Response from './response';\nimport Timeout from './timeout';\n\nexport default class RequestSender {\n    constructor(\n        private _requestFactory: RequestFactory,\n        private _payloadTransformer: PayloadTransformer,\n        private _cookie: CookiesStatic,\n        private _options?: RequestSenderOptions\n    ) {}\n\n    sendRequest<T = any>(url: string, options?: RequestOptions): Promise<Response<T>> {\n        const requestOptions = this._mergeDefaultOptions(options);\n        const request = this._requestFactory.createRequest(this._prependHost(url), requestOptions);\n\n        return new Promise((resolve, reject) => {\n            const requestHandler = () => {\n                const response = this._payloadTransformer.toResponse(request);\n\n                if (response.status >= 200 && response.status < 300) {\n                    resolve(response);\n                } else {\n                    reject(response);\n                }\n            };\n\n            request.onload = requestHandler;\n            request.onerror = requestHandler;\n            request.onabort = requestHandler;\n            request.ontimeout = requestHandler;\n\n            if (requestOptions.timeout instanceof Timeout) {\n                requestOptions.timeout.onComplete(() => request.abort());\n                requestOptions.timeout.start();\n            }\n\n            if (isPromise(requestOptions.timeout)) {\n                requestOptions.timeout.then(() => request.abort());\n            }\n\n            request.send(this._payloadTransformer.toRequestBody(requestOptions));\n        });\n    }\n\n    get<T = any>(url: string, options?: RequestOptions): Promise<Response<T>> {\n        return this.sendRequest(url, { ...options, method: 'GET' });\n    }\n\n    post<T = any>(url: string, options?: RequestOptions): Promise<Response<T>> {\n        return this.sendRequest(url, { ...options, method: 'POST' });\n    }\n\n    put<T = any>(url: string, options?: RequestOptions): Promise<Response<T>> {\n        return this.sendRequest(url, { ...options, method: 'PUT' });\n    }\n\n    patch<T = any>(url: string, options?: RequestOptions): Promise<Response<T>> {\n        return this.sendRequest(url, { ...options, method: 'PATCH' });\n    }\n\n    delete<T = any>(url: string, options?: RequestOptions): Promise<Response<T>> {\n        return this.sendRequest(url, { ...options, method: 'DELETE' });\n    }\n\n    private _mergeDefaultOptions(options?: RequestOptions): RequestOptions {\n        const defaultOptions: Partial<RequestOptions> = {\n            credentials: true,\n            headers: {\n                Accept: 'application/json, text/plain, */*',\n            },\n            method: 'GET',\n        };\n\n        const csrfToken = this._cookie.get('XSRF-TOKEN');\n\n        if (csrfToken && defaultOptions.headers) {\n            defaultOptions.headers['X-XSRF-TOKEN'] = csrfToken;\n        }\n\n        if (options && options.body && defaultOptions.headers) {\n            defaultOptions.headers['Content-Type'] = 'application/json';\n        }\n\n        return merge({}, defaultOptions, options);\n    }\n\n    private _prependHost(url: string): string {\n        if (!this._options || !this._options.host || /^https?:\\/\\//.test(url)) {\n            return url;\n        }\n\n        return `${this._options.host.replace(/\\/$/, '')}/${url.replace(/^\\//, '')}`;\n    }\n}\n","export default class BrowserSupport {\n    canSupportRel(rel: string): boolean {\n        const link = document.createElement('link');\n\n        return !!(\n            link.relList &&\n            link.relList.supports &&\n            link.relList.supports(rel)\n        );\n    }\n}\n","import { RequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\n\nexport interface LoadStylesheetOptions {\n    prepend: boolean;\n}\n\nexport interface PreloadStylesheetOptions {\n    prefetch: boolean;\n}\n\nexport default class StylesheetLoader {\n    private _stylesheets: { [key: string]: Promise<void> } = {};\n    private _preloadedStylesheets: { [key: string]: Promise<void> } = {};\n\n    /**\n     * @internal\n     */\n    constructor(\n        private _browserSupport: BrowserSupport,\n        private _requestSender: RequestSender\n    ) {}\n\n    loadStylesheet(src: string, options?: LoadStylesheetOptions): Promise<void> {\n        if (!this._stylesheets[src]) {\n            this._stylesheets[src] = new Promise((resolve, reject) => {\n                const stylesheet = document.createElement('link');\n                const { prepend = false } = options || {};\n\n                stylesheet.onload = () => resolve();\n                stylesheet.onerror = event => {\n                    delete this._stylesheets[src];\n                    reject(event);\n                };\n                stylesheet.rel = 'stylesheet';\n                stylesheet.href = src;\n\n                if (prepend && document.head.children[0]) {\n                    document.head.insertBefore(stylesheet, document.head.children[0]);\n                } else {\n                    document.head.appendChild(stylesheet);\n                }\n            });\n        }\n\n        return this._stylesheets[src];\n    }\n\n    loadStylesheets(urls: string[], options?: LoadStylesheetOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.loadStylesheet(url, options)))\n            .then(() => undefined);\n    }\n\n    preloadStylesheet(url: string, options?: PreloadStylesheetOptions): Promise<void> {\n        if (!this._preloadedStylesheets[url]) {\n            this._preloadedStylesheets[url] = new Promise((resolve, reject) => {\n                const { prefetch = false } = options || {};\n                const rel = prefetch ? 'prefetch' : 'preload';\n\n                if (this._browserSupport.canSupportRel(rel)) {\n                    const preloadedStylesheet = document.createElement('link');\n\n                    preloadedStylesheet.as = 'style';\n                    preloadedStylesheet.rel = prefetch ? 'prefetch' : 'preload';\n                    preloadedStylesheet.href = url;\n\n                    preloadedStylesheet.onload = () => {\n                        resolve();\n                    };\n\n                    preloadedStylesheet.onerror = event => {\n                        delete this._preloadedStylesheets[url];\n                        reject(event);\n                    };\n\n                    document.head.appendChild(preloadedStylesheet);\n                } else {\n                    this._requestSender.get(url, {\n                        credentials: false,\n                        headers: { Accept: 'text/css' },\n                    })\n                        .then(() => resolve())\n                        .catch(reject);\n                }\n            });\n        }\n\n        return this._preloadedStylesheets[url];\n    }\n\n    preloadStylesheets(urls: string[], options?: PreloadStylesheetOptions): Promise<void> {\n        return Promise.all(urls.map(url => this.preloadStylesheet(url, options)))\n            .then(() => undefined);\n    }\n}\n","import { createRequestSender } from '@bigcommerce/request-sender';\n\nimport BrowserSupport from './browser-support';\nimport StylesheetLoader from './stylesheet-loader';\n\nexport default function createStylesheetLoader(): StylesheetLoader {\n    return new StylesheetLoader(\n        new BrowserSupport(),\n        createRequestSender()\n    );\n}\n","import * as cookie from 'js-cookie';\n\nimport PayloadTransformer from './payload-transformer';\nimport RequestFactory from './request-factory';\nimport RequestSender from './request-sender';\nimport RequestSenderOptions from './request-sender-options';\n\nexport default function createRequestSender(options?: RequestSenderOptions): RequestSender {\n    return new RequestSender(\n        new RequestFactory(),\n        new PayloadTransformer(),\n        cookie,\n        options\n    );\n}\n","import Headers from './headers';\nimport RequestOptions from './request-options';\nimport Response from './response';\nimport toFormUrlEncoded from './to-form-url-encoded';\n\nconst JSON_CONTENT_TYPE_REGEXP = /application\\/(\\w+\\+)?json/;\nconst FORM_URLENCODED_CONTENT_TYPE_REGEXP = /application\\/x-www-form-urlencoded/;\n\nexport default class PayloadTransformer {\n    toRequestBody(options: RequestOptions): any {\n        const contentType = options.headers ? this._getHeader(options.headers, 'Content-Type') : '';\n\n        if (options.body) {\n            if (JSON_CONTENT_TYPE_REGEXP.test(contentType)) {\n                return JSON.stringify(options.body);\n            }\n\n            if (FORM_URLENCODED_CONTENT_TYPE_REGEXP.test(contentType)) {\n                return toFormUrlEncoded(options.body);\n            }\n        }\n\n        return options.body;\n    }\n\n    toResponse(xhr: XMLHttpRequest): Response {\n        const headers = this._parseResponseHeaders(xhr.getAllResponseHeaders());\n\n        // Using `responseText` to support legacy IE\n        const body = this._parseResponseBody(\n            'response' in xhr ? xhr.response : (xhr as any).responseText,\n            headers\n        );\n\n        return {\n            body,\n            headers,\n            status: xhr.status,\n            statusText: xhr.statusText,\n        };\n    }\n\n    private _parseResponseBody(body: string, headers: Headers): any {\n        const contentType = this._getHeader(headers, 'Content-Type');\n\n        if (body && JSON_CONTENT_TYPE_REGEXP.test(contentType)) {\n            return JSON.parse(body);\n        }\n\n        return body;\n    }\n\n    private _parseResponseHeaders(rawHeaders: string): Headers {\n        const lines = rawHeaders ? rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ').split(/\\r?\\n/) : [];\n\n        return lines.reduce((headers, line) => {\n            const parts = line.split(':');\n            const key = (parts.shift() || '').trim();\n\n            if (!key) {\n                return headers;\n            }\n\n            return {\n                ...headers,\n                [key.toLowerCase()]: parts.join(':').trim(),\n            };\n        }, {});\n    }\n\n    private _getHeader(headers: Headers, key: string): string {\n        if (!headers || !key) {\n            return '';\n        }\n\n        return headers[key] || headers[key.toLowerCase()] || '';\n    }\n}\n","export default function toFormUrlEncoded(data: any): string {\n    if (typeof data !== 'object' || data === null) {\n        return data;\n    }\n\n    return Object.keys(data)\n        .filter(key => data[key] !== undefined)\n        .map(key => {\n            const value = data[key];\n\n            if (typeof value === 'string') {\n                return `${key}=${encodeURIComponent(value)}`;\n            }\n\n            return `${key}=${encodeURIComponent(JSON.stringify(value) || '')}`;\n        })\n        .join('&');\n}\n","import * as queryString from 'query-string';\n\nimport Headers from './headers';\nimport RequestOptions from './request-options';\n\nexport default class RequestFactory {\n    createRequest(url: string, options?: RequestOptions): XMLHttpRequest {\n        const xhr = new XMLHttpRequest();\n\n        this._configureRequest(xhr, url, options);\n\n        return xhr;\n    }\n\n    private _configureRequest(xhr: XMLHttpRequest, url: string, options: RequestOptions = {}): void {\n        xhr.open(options.method || 'GET', this._formatUrl(url, options.params), true);\n\n        if (options.headers) {\n            this._configureRequestHeaders(xhr, options.headers);\n        }\n\n        if (typeof options.credentials === 'boolean') {\n            xhr.withCredentials = options.credentials;\n        }\n\n        if (typeof options.timeout === 'number') {\n            xhr.timeout = options.timeout;\n        }\n    }\n\n    private _configureRequestHeaders(xhr: XMLHttpRequest, headers: Headers): void {\n        Object.keys(headers).forEach(key => {\n            xhr.setRequestHeader(key, headers[key]);\n        });\n    }\n\n    private _formatUrl(url: string, params?: object): string {\n        if (!params || Object.keys(params).length === 0) {\n            return url;\n        }\n\n        return `${url}?${queryString.stringify(params)}`;\n    }\n}\n","'use strict';\nvar strictUriEncode = require('strict-uri-encode');\nvar objectAssign = require('object-assign');\nvar decodeComponent = require('decode-uri-component');\n\nfunction encoderForArrayFormat(opts) {\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, index) {\n\t\t\t\treturn value === null ? [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tindex,\n\t\t\t\t\t']'\n\t\t\t\t].join('') : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[',\n\t\t\t\t\tencode(index, opts),\n\t\t\t\t\t']=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'[]=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value) {\n\t\t\t\treturn value === null ? encode(key, opts) : [\n\t\t\t\t\tencode(key, opts),\n\t\t\t\t\t'=',\n\t\t\t\t\tencode(value, opts)\n\t\t\t\t].join('');\n\t\t\t};\n\t}\n}\n\nfunction parserForArrayFormat(opts) {\n\tvar result;\n\n\tswitch (opts.arrayFormat) {\n\t\tcase 'index':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /\\[(\\d*)\\]$/.exec(key);\n\n\t\t\t\tkey = key.replace(/\\[\\d*\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = {};\n\t\t\t\t}\n\n\t\t\t\taccumulator[key][result[1]] = value;\n\t\t\t};\n\n\t\tcase 'bracket':\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tresult = /(\\[\\])$/.exec(key);\n\t\t\t\tkey = key.replace(/\\[\\]$/, '');\n\n\t\t\t\tif (!result) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t} else if (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = [value];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\n\t\tdefault:\n\t\t\treturn function (key, value, accumulator) {\n\t\t\t\tif (accumulator[key] === undefined) {\n\t\t\t\t\taccumulator[key] = value;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\taccumulator[key] = [].concat(accumulator[key], value);\n\t\t\t};\n\t}\n}\n\nfunction encode(value, opts) {\n\tif (opts.encode) {\n\t\treturn opts.strict ? strictUriEncode(value) : encodeURIComponent(value);\n\t}\n\n\treturn value;\n}\n\nfunction keysSorter(input) {\n\tif (Array.isArray(input)) {\n\t\treturn input.sort();\n\t} else if (typeof input === 'object') {\n\t\treturn keysSorter(Object.keys(input)).sort(function (a, b) {\n\t\t\treturn Number(a) - Number(b);\n\t\t}).map(function (key) {\n\t\t\treturn input[key];\n\t\t});\n\t}\n\n\treturn input;\n}\n\nfunction extract(str) {\n\tvar queryStart = str.indexOf('?');\n\tif (queryStart === -1) {\n\t\treturn '';\n\t}\n\treturn str.slice(queryStart + 1);\n}\n\nfunction parse(str, opts) {\n\topts = objectAssign({arrayFormat: 'none'}, opts);\n\n\tvar formatter = parserForArrayFormat(opts);\n\n\t// Create an object with no prototype\n\t// https://github.com/sindresorhus/query-string/issues/47\n\tvar ret = Object.create(null);\n\n\tif (typeof str !== 'string') {\n\t\treturn ret;\n\t}\n\n\tstr = str.trim().replace(/^[?#&]/, '');\n\n\tif (!str) {\n\t\treturn ret;\n\t}\n\n\tstr.split('&').forEach(function (param) {\n\t\tvar parts = param.replace(/\\+/g, ' ').split('=');\n\t\t// Firefox (pre 40) decodes `%3D` to `=`\n\t\t// https://github.com/sindresorhus/query-string/pull/37\n\t\tvar key = parts.shift();\n\t\tvar val = parts.length > 0 ? parts.join('=') : undefined;\n\n\t\t// missing `=` should be `null`:\n\t\t// http://w3.org/TR/2012/WD-url-20120524/#collect-url-parameters\n\t\tval = val === undefined ? null : decodeComponent(val);\n\n\t\tformatter(decodeComponent(key), val, ret);\n\t});\n\n\treturn Object.keys(ret).sort().reduce(function (result, key) {\n\t\tvar val = ret[key];\n\t\tif (Boolean(val) && typeof val === 'object' && !Array.isArray(val)) {\n\t\t\t// Sort object keys, not values\n\t\t\tresult[key] = keysSorter(val);\n\t\t} else {\n\t\t\tresult[key] = val;\n\t\t}\n\n\t\treturn result;\n\t}, Object.create(null));\n}\n\nexports.extract = extract;\nexports.parse = parse;\n\nexports.stringify = function (obj, opts) {\n\tvar defaults = {\n\t\tencode: true,\n\t\tstrict: true,\n\t\tarrayFormat: 'none'\n\t};\n\n\topts = objectAssign(defaults, opts);\n\n\tif (opts.sort === false) {\n\t\topts.sort = function () {};\n\t}\n\n\tvar formatter = encoderForArrayFormat(opts);\n\n\treturn obj ? Object.keys(obj).sort(opts.sort).map(function (key) {\n\t\tvar val = obj[key];\n\n\t\tif (val === undefined) {\n\t\t\treturn '';\n\t\t}\n\n\t\tif (val === null) {\n\t\t\treturn encode(key, opts);\n\t\t}\n\n\t\tif (Array.isArray(val)) {\n\t\t\tvar result = [];\n\n\t\t\tval.slice().forEach(function (val2) {\n\t\t\t\tif (val2 === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tresult.push(formatter(key, val2, result.length));\n\t\t\t});\n\n\t\t\treturn result.join('&');\n\t\t}\n\n\t\treturn encode(key, opts) + '=' + encode(val, opts);\n\t}).filter(function (x) {\n\t\treturn x.length > 0;\n\t}).join('&') : '';\n};\n\nexports.parseUrl = function (str, opts) {\n\treturn {\n\t\turl: str.split('?')[0] || '',\n\t\tquery: parse(extract(str), opts)\n\t};\n};\n","export default function isPromise(promise: any): promise is PromiseLike<any> {\n    return !!promise &&\n        (typeof promise === 'object' || typeof promise === 'function') &&\n        typeof promise.then === 'function';\n}\n","import Timeout from './timeout';\n\nexport default function createTimeout(delay?: number): Timeout {\n    return new Timeout(delay);\n}\n","import createScriptLoader from './create-script-loader';\nimport ScriptLoader from './script-loader';\n\nlet instance: ScriptLoader;\n\nexport default function getScriptLoader(): ScriptLoader {\n    if (!instance) {\n        instance = createScriptLoader();\n    }\n\n    return instance;\n}\n","import createStylesheetLoader from './create-stylesheet-loader';\nimport StylesheetLoader from './stylesheet-loader';\n\nlet instance: StylesheetLoader;\n\nexport default function getStylesheetLoader(): StylesheetLoader {\n    if (!instance) {\n        instance = createStylesheetLoader();\n    }\n\n    return instance;\n}\n"],"sourceRoot":""}