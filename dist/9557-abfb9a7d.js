"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[9557],{12929:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(70355),a=n(49655),i=n(88186),o=n(30680);const d=({appearFocused:e,id:t,name:n})=>{const d=(0,r.useCallback)((()=>r.createElement(i.A,{appearFocused:e,id:t})),[t,e]);return r.createElement(o.A,{additionalClassName:"form-field--ccExpiry",input:d,labelContent:r.createElement(a.A,{id:"payment.credit_card_expiration_label"}),name:n})}},29557:(e,t,n)=>{n.d(t,{StripeLinkV2Button:()=>P,StripeOCSPaymentMethod:()=>g,StripeUPEPaymentMethod:()=>v,StripeV3PaymentMethod:()=>x});var r=n(31635),a=n(60269),i=n(69440),o=n(70355),d=n(89799),c=n(48407),l=n(31448),s=n(19285),m=n(32312),u=n(17080),p=n(59713);const b=(e,t,n)=>{const r=document.querySelector(e);return r?(0,p.A)(r,t,n):{}},h=(e=0)=>"number"!=typeof e?parseInt(e,10):e,f=(e='link[href*="font"]')=>{const t=document.querySelectorAll(e),n=[];return t.forEach((e=>{const t=null==e?void 0:e.getAttribute("href");t&&n.push({cssSrc:t})})),n},y=e=>{const t="18px",n="13px",r=b(`#${e}--input`,["color","background-color","border-color","box-shadow","font-family"]),a=b(`#${e}--label`,["color"]),o=b(`#${e}--error`,["color"]),d=b(`#${e}--accordion-header .form-label`,["color","font-size","font-family","font-weight","padding-top","padding-right","padding-bottom"]),c=b(`#${e}--accordion-header-selected`,["background-color"]),l=b(`#${e}--accordion-header.optimizedCheckout-form-checklist-item`,["border-bottom","border-color"]),{color:s,"font-size":m,"font-family":u,"font-weight":p,"padding-top":f=n,"padding-right":y=t,"padding-bottom":g=n}=d,v=(0,i.isEmpty)(d)?void 0:`${f} ${y} ${g} ${t}`,C=b(`#${e}--accordion-header .form-label`,["border-color","border-width","width","background-color"],"::before"),E=b(`#${e}--accordion-header .form-label`,["border-color","border-width","width","background-color"],"::after"),I=b(`#${e}--accordion-header-selected .form-label`,["border-color","background-color"],"::before");let k=b(".form-checklist-header--selected .form-label",["border-color","background-color","width","transform"],"::after");(0,i.isEmpty)(k)&&(k=b(`#${e}--accordion-header-selected .form-label`,["border-color","background-color","width","transform"],"::after"));const S=k.width||C.width,A=((e="")=>{const t=/matrix\(([^)]+)\)/.exec(e);if(!t)return;return t[1].split(",").map((e=>parseFloat(e.trim())))[0]})(k.transform)||.66,_=(e=>{const{radioIconOuterWidth:t=26,radioIconOuterStrokeWidth:n=1,radioIconInnerWidth:r=17}=e||{},a=h(t),i=h(n),o=h(r);return{outerWidth:`${(a/.88).toFixed(2)}px`,outerStrokeWidth:`${(i/a*88).toFixed(2)}px`,innerRadius:(o/a*88/2).toFixed(2)}})({radioIconOuterWidth:C.width,radioIconOuterStrokeWidth:C["border-width"],radioIconInnerWidth:S&&h(S)*A});return{variables:{colorPrimary:r["box-shadow"],colorBackground:r["background-color"],colorText:a.color,colorDanger:o.color,colorTextSecondary:a.color,colorTextPlaceholder:r.color,colorIcon:r.color,fontFamily:u||r["font-family"]},rules:{".Input":{borderColor:r["border-color"],color:r.color,boxShadow:r["box-shadow"]},".AccordionItem":{borderRadius:0,borderWidth:0,borderBottom:l["border-bottom"],borderColor:l["border-color"],boxShadow:"none",fontSize:m,fontWeight:p,color:s,padding:v},".AccordionItem:hover":{backgroundColor:c["background-color"],color:s},".AccordionItem--selected":{fontWeight:"bold",color:s,backgroundColor:c["background-color"]},".TabLabel":{color:s},".RadioIcon":{width:_.outerWidth},".RadioIconInner":{r:_.innerRadius,fill:E["background-color"]},".RadioIconOuter":{strokeWidth:_.outerStrokeWidth,stroke:C["border-color"],fill:C["background-color"]},".RadioIconInner--checked":{r:_.innerRadius,fill:k["background-color"]},".RadioIconOuter--checked":{stroke:I["border-color"],fill:I["background-color"]}}}},g=(0,s.A)((e=>{var{paymentForm:t,checkoutState:n,checkoutService:s,method:p,onUnhandledError:b=i.noop}=e,h=(0,r.__rest)(e,["paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const g=(0,o.useRef)(),v=(0,o.useRef)(),{onToggle:C,selectedItemId:E}=(0,o.useContext)(m.A),[I,k]=(0,o.useState)(E),[S,A]=(0,o.useState)(!1),_=`${p.gateway}-${p.id}`,w=`${_}-component-field`,F=t;(0,o.useEffect)((()=>{v.current&&(clearTimeout(v.current),v.current=void 0),I&&E!==I&&(v.current=setTimeout((()=>{C(I)}),100))}),[C]),(0,o.useEffect)((()=>{var e;E!==_&&(k(E),null===(e=g.current)||void 0===e||e.call(g))}),[E,_]),(0,o.useEffect)((()=>{I===_&&C(I)}),[I,_]);const N=(0,o.useCallback)((()=>{F.hidePaymentSubmitButton(p,!1)}),[F,p]),{hidePaymentSubmitButton:x,disableSubmit:O,setFieldValue:z,setSubmit:P,setValidationSchema:$}=t,R=n.data.getInstruments(p)||[],{data:{getCheckout:B,isPaymentDataRequired:T},statuses:{isLoadingInstruments:V}}=n,j=B(),{initializationData:{isCustomChecklistItem:W}}=p,D=(0,o.useCallback)((e=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){return A(!0),s.initializePayment(Object.assign(Object.assign({},e),{integrations:[a.S1],stripeocs:{containerId:w,layout:{type:W?"accordion":"auto",defaultCollapsed:E!==_,radios:!0,linkInAccordion:!0,spacedAccordionItems:!1,visibleAccordionItemsCount:0},appearance:y(w),fonts:f(),onError:b,render:N,paymentMethodSelect:k,handleClosePaymentMethod:e=>{g.current=e},togglePreloader:A}}))}))),[w,E,_,W,s,b,N,k,A]),q=(0,o.useCallback)((e=>s.initializeCustomer(Object.assign(Object.assign({},e),{integrations:[a.BK]}))),[s]);return o.createElement(o.Fragment,null,S?o.createElement("div",{"data-test":"stripe-accordion-skeleton",style:{padding:"10px 18px"}},o.createElement(u.A,null)):o.createElement("style",null,`\n                .custom-checklist-item#radio-${_} {\n                    border-bottom: none;\n                }\n                .custom-checklist-item#radio-${_}:last-of-type {\n                    margin-bottom: -1px;\n                }\n            `),o.createElement(d.A,Object.assign({},h,{containerId:w,deinitializePayment:s.deinitializePayment,disableSubmit:O,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:x,initializeCustomer:q,initializePayment:D,instruments:R,isInstrumentCardCodeRequired:(0,c.A)(n),isInstrumentCardNumberRequired:(0,l.A)(n),isInstrumentFeatureAvailable:!1,isLoadingInstruments:V(),isPaymentDataRequired:T(),isSignedIn:(0,i.some)(null==j?void 0:j.payments,{providerId:p.id}),loadInstruments:s.loadInstruments,method:p,setFieldValue:z,setSubmit:P,setValidationSchema:$,signOut:s.signOutCustomer})),o.createElement("div",{style:{display:"none"}},o.createElement("div",{className:"form-checklist-item optimizedCheckout-form-checklist-item",id:`${w}--accordion-header`},o.createElement("input",{className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",id:`${w}-radio-input`,type:"radio"}),o.createElement("div",{className:"form-label optimizedCheckout-form-label"})),o.createElement("div",{className:"form-checklist-header--selected",id:`${w}--accordion-header-selected`},o.createElement("input",{className:"form-checklist-checkbox optimizedCheckout-form-checklist-checkbox",defaultChecked:!0,id:`${w}-radio-input-selected`,type:"radio"}),o.createElement("div",{className:"form-label optimizedCheckout-form-label"})),o.createElement("div",{className:"optimizedCheckout-form-input",id:`${w}--input`},o.createElement("div",{className:"form-field--error"},o.createElement("div",{className:"optimizedCheckout-form-label",id:`${w}--error`})),o.createElement("div",{className:"optimizedCheckout-form-label",id:`${w}--label`}))))}),[{gateway:"stripeocs",id:"optimized_checkout"}]),v=(0,s.A)((e=>{var{paymentForm:t,checkoutState:n,checkoutService:s,method:m,onUnhandledError:u=i.noop}=e,b=(0,r.__rest)(e,["paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const h=`stripe-${m.id}-component-field`,f=t,y=(0,o.useCallback)((()=>{f.hidePaymentSubmitButton(m,!1)}),[f,m]),{hidePaymentSubmitButton:g,disableSubmit:v,setFieldValue:C,setSubmit:E,setValidationSchema:I}=t,k=n.data.getInstruments(m)||[],{data:{getCheckout:S,isPaymentDataRequired:A,getPaymentProviderCustomer:_},statuses:{isLoadingInstruments:w}}=n,F=S(),N=n.data.getCustomer(),x=_(),O=null==x?void 0:x.stripeLinkAuthenticationState,z=null==N?void 0:N.isGuest,P=(0,o.useMemo)((()=>!(!z&&O)),[z,O])&&!z&&Boolean(m.config.isVaultingEnabled),$=(e,t)=>{const n=document.getElementById(e);if(!n)throw new Error("Unable to retrieve input styles as the provided container ID is not valid.");return(0,p.A)(n,t)},R=(0,o.useCallback)((e=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){const t=$(`${h}--input`,["color","background-color","border-color","box-shadow"]),n=$(`${h}--label`,["color"]),r=$(`${h}--error`,["color"]);return f.hidePaymentSubmitButton(m,!0),s.initializePayment(Object.assign(Object.assign({},e),{integrations:[a.Bf],stripeupe:{containerId:h,style:{labelText:n.color,fieldText:t.color,fieldPlaceholderText:t.color,fieldErrorText:r.color,fieldBackground:t["background-color"],fieldInnerShadow:t["box-shadow"],fieldBorder:t["border-color"]},onError:u,render:y}}))}))),[s,h,u,m,f,y]),B=(0,o.useCallback)((e=>s.initializeCustomer(Object.assign(Object.assign({},e),{integrations:[a.Tv]}))),[s]);return o.createElement(o.Fragment,null,o.createElement(d.A,Object.assign({},b,{containerId:h,deinitializePayment:s.deinitializePayment,disableSubmit:v,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:g,initializeCustomer:B,initializePayment:R,instruments:k,isInstrumentCardCodeRequired:(0,c.A)(n),isInstrumentCardNumberRequired:(0,l.A)(n),isInstrumentFeatureAvailable:P,isLoadingInstruments:w(),isPaymentDataRequired:A(),isSignedIn:(0,i.some)(null==F?void 0:F.payments,{providerId:m.id}),loadInstruments:s.loadInstruments,method:m,setFieldValue:C,setSubmit:E,setValidationSchema:I,signOut:s.signOutCustomer})),o.createElement("div",{className:"optimizedCheckout-form-input",id:`${h}--input`},o.createElement("div",{className:"form-field--error"},o.createElement("div",{className:"optimizedCheckout-form-label",id:`${h}--error`})),o.createElement("div",{className:"optimizedCheckout-form-label",id:`${h}--label`})))}),[{gateway:"stripeupe"},{gateway:"stripeupe",id:"klarna"}]);var C=n(39527),E=n(49655),I=n(3375),k=n.n(I),S=n(90767),A=n(14456),_=n(97429),w=n(2224);const F=({options:e})=>o.createElement("div",{className:"form-ccFields"},o.createElement("div",{className:k()("form-field","form-field--stripe-ccNumber")},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardNumberElementOptions.containerId},o.createElement(E.A,{id:"payment.credit_card_number_label"})),o.createElement("div",{className:k()("form-input","optimizedCheckout-form-input","has-icon","widget-input--stripev3"),"data-cse":"CardNumber",id:e.cardNumberElementOptions.containerId}),o.createElement(A.A,null)),o.createElement("div",{className:"form-field form-field--ccExpiry"},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardExpiryElementOptions.containerId},o.createElement(E.A,{id:"payment.credit_card_expiration_label"})),o.createElement("div",{className:k()("form-input","optimizedCheckout-form-input","widget-input--stripev3"),"data-cse":"ExpiryDate",id:e.cardExpiryElementOptions.containerId})),o.createElement("div",{className:"form-field form-ccFields-field--ccCvv"},o.createElement("label",{className:"form-label optimizedCheckout-form-label",htmlFor:e.cardCvcElementOptions.containerId},o.createElement(E.A,{id:"payment.credit_card_cvv_label"}),o.createElement(_.A,{placement:"top-start",tooltip:o.createElement(S.A,null)},o.createElement("span",{className:"has-tip"},o.createElement(w.A,null)))),o.createElement("div",{className:k()("form-input","optimizedCheckout-form-input","has-icon","widget-input--stripev3"),"data-cse":"SecurityCode",id:e.cardCvcElementOptions.containerId}),o.createElement(A.A,null)));var N;!function(e){e.Alipay="alipay",e.Card="card",e.CardCvc="cardCvc",e.CardExpiry="cardExpiry",e.CardNumber="cardNumber",e.Iban="iban",e.IdealBank="idealBank"}(N||(N={}));const x=(0,s.A)((e=>{var{language:t,paymentForm:n,checkoutState:s,checkoutService:m,method:u,onUnhandledError:p=i.noop}=e,b=(0,r.__rest)(e,["language","paymentForm","checkoutState","checkoutService","method","onUnhandledError"]);const{useIndividualCardFields:h}=u.initializationData,f=u.id,y=f!==N.Alipay?"optimizedCheckout-form-input widget--stripev3":"",g=`stripe-${f}-component-field`,v=(0,o.useMemo)((()=>{const e={base:"form-input optimizedCheckout-form-input"};return{[N.Card]:{classes:e},[N.CardCvc]:{classes:e,placeholder:""},[N.CardExpiry]:{classes:e},[N.CardNumber]:{classes:e,showIcon:!0,placeholder:""},[N.Iban]:{classes:e,supportedCountries:["SEPA"]},[N.IdealBank]:{classes:e}}}),[]),{hidePaymentSubmitButton:I,disableSubmit:k,setFieldValue:S,setSubmit:A,setValidationSchema:_}=n,{data:{getCheckout:w,isPaymentDataRequired:x,getCustomer:O,getConfig:z},statuses:{isLoadingInstruments:P}}=s,$=w(),R=O(),B=z(),T=s.data.getInstruments(u)||[],V=!(null==R?void 0:R.isGuest)&&Boolean(u.config.isVaultingEnabled),j=(0,o.useMemo)((()=>B?B.links.siteLink:null),[B]),W=(0,o.useCallback)((e=>{"stripev3_error"===e.type&&"auth_failure"===e.subtype&&(e.message=t.translate("payment.stripev3_auth_3ds_fail")),p(e)}),[t,p]),D=(0,o.useCallback)((e=>({cardNumberElementOptions:Object.assign(Object.assign({},e[N.CardNumber]),{containerId:"stripe-card-number-component-field"}),cardExpiryElementOptions:Object.assign(Object.assign({},e[N.CardExpiry]),{containerId:"stripe-expiry-component-field"}),cardCvcElementOptions:Object.assign(Object.assign({},e[N.CardCvc]),{containerId:"stripe-cvc-component-field"})})),[]),q=(0,o.useCallback)((e=>h?D(e):e[f]),[f,D,h]),{getHostedStoredCardValidationFieldset:L,getHostedFormOptions:U}=(0,C.i)({checkoutState:s,method:u,language:t,paymentForm:n}),M=(0,o.useCallback)(((e,t)=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){return m.initializePayment(Object.assign(Object.assign({},e),{integrations:[a.Us],stripev3:Object.assign({containerId:g,options:q(v)},t&&{form:yield U(t)})}))}))),[g,q,v,m,U]);return o.createElement(o.Fragment,null,o.createElement(d.A,Object.assign({},b,{additionalContainerClassName:y,containerId:g,deinitializePayment:m.deinitializePayment,disableSubmit:k,hideContentWhenSignedOut:!0,hidePaymentSubmitButton:I,initializePayment:M,instruments:T,isInstrumentCardCodeRequired:(0,c.A)(s),isInstrumentCardNumberRequired:(0,l.A)(s),isInstrumentFeatureAvailable:V,isLoadingInstruments:P(),isPaymentDataRequired:x(),isSignedIn:(0,i.some)(null==$?void 0:$.payments,{providerId:u.id}),loadInstruments:m.loadInstruments,method:u,onUnhandledError:W,renderCustomPaymentForm:()=>{const e=D(v);return o.createElement(F,{options:e})},setFieldValue:S,setSubmit:A,setValidationSchema:_,shouldRenderCustomInstrument:h,signOut:m.signOutCustomer,validateInstrument:(e,t)=>L(t)})),"iban"===u.id&&o.createElement("p",{className:"stripe-sepa-mandate-disclaimer"},o.createElement(E.A,{data:{storeUrl:j},id:"payment.stripe_sepa_mandate_disclaimer"})))}),[{gateway:"stripev3"}]);var O=n(63582),z=n(4907);const P=(0,s.A)((e=>{const t={onComplete:z.A,loadingContainerId:"checkout-app",methodId:"optimized_checkout",gatewayId:"stripeocs"};return o.createElement(O.A,Object.assign({additionalInitializationOptions:t,integrations:[a.BK]},e))}),[{id:"stripeocs"}])},36659:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(70355),a=n(49655),i=n(88186),o=n(30680),d=n(14456);const c=({appearFocused:e,id:t,name:n})=>{const c=(0,r.useCallback)((()=>r.createElement(r.Fragment,null,r.createElement(i.A,{additionalClassName:"has-icon",appearFocused:e,id:t}),r.createElement(d.A,null))),[t,e]);return r.createElement(o.A,{additionalClassName:"form-field--ccNumber",input:c,labelContent:r.createElement(a.A,{id:"payment.credit_card_number_label"}),name:n})}},39527:(e,t,n)=>{n.d(t,{i:()=>s});var r=n(31635),a=n(69440),i=n(70355),o=n(82804),d=n(48407),c=n(31448),l=n(98363);const s=({checkoutState:e,method:t,language:n,paymentForm:s})=>{const{setFieldTouched:m,setFieldValue:u,setSubmitted:p,submitForm:b}=s,{config:h}=t,{cardCode:f}=h,y=f||null===f,g=(0,d.A)(e),v=(0,c.A)(e),C=(0,i.useCallback)((e=>`${(0,a.compact)([t.gateway,t.id]).join("-")}-${e}`),[t]),[E,I]=(0,i.useState)();return{getHostedStoredCardValidationFieldset:(0,i.useCallback)((e=>{const n=!!e&&v(e,t),r=!!e&&g(e,t);return i.createElement(l.A,{cardCodeId:r?C("ccCvv"):void 0,cardNumberId:n?C("ccNumber"):void 0,focusedFieldType:E})}),[E,C,g,v,t]),getHostedFormOptions:(0,i.useCallback)((e=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){const r=["color","fontFamily","fontSize","fontWeight"],i=!!e&&v(e,t),d=!!e&&g(e,t);let c;return e?d?c=C("ccCvv"):i&&(c=C("ccNumber")):c=C("ccNumber"),{fields:e?{cardCodeVerification:d&&e?{accessibilityLabel:n.translate("payment.credit_card_cvv_label"),containerId:C("ccCvv"),instrumentId:e.bigpayToken}:void 0,cardNumberVerification:i&&e?{accessibilityLabel:n.translate("payment.credit_card_number_label"),containerId:C("ccNumber"),instrumentId:e.bigpayToken}:void 0}:{cardCode:y?{accessibilityLabel:n.translate("payment.credit_card_cvv_label"),containerId:C("ccCvv")}:void 0,cardExpiry:{accessibilityLabel:n.translate("payment.credit_card_expiration_label"),containerId:C("ccExpiry"),placeholder:n.translate("payment.credit_card_expiration_placeholder_text")},cardName:{accessibilityLabel:n.translate("payment.credit_card_name_label"),containerId:C("ccName")},cardNumber:{accessibilityLabel:n.translate("payment.credit_card_number_label"),containerId:C("ccNumber")}},styles:c?{default:yield(0,o.A)(c,r),error:yield(0,o.A)(c,r,o.S.Error),focus:yield(0,o.A)(c,r,o.S.Focus)}:{},onBlur:({fieldType:e})=>{E===e&&I(void 0)},onCardTypeChange:({cardType:e})=>{u("hostedForm.cardType",e)},onEnter:()=>{p(!0),b()},onFocus:({fieldType:e})=>{I(e)},onValidate:({errors:e={}})=>{(0,a.forIn)(e,((e=[],t)=>{var n,r;const a=`hostedForm.errors.${t}`;u(a,null!==(r=null===(n=e[0])||void 0===n?void 0:n.type)&&void 0!==r?r:""),e[0]&&m(a)}))}}}))),[E,C,y,g,v,n,t,m,u,p,b])}}},47459:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(70355),a=n(90767),i=n(49655),o=n(88186),d=n(30680),c=n(97429),l=n(2224),s=n(14456);const m=({appearFocused:e,id:t,name:n})=>{const m=(0,r.useCallback)((()=>r.createElement(r.Fragment,null,r.createElement(o.A,{additionalClassName:"has-icon",appearFocused:e,id:t}),r.createElement(s.A,null))),[t,e]),u=(0,r.useMemo)((()=>r.createElement(r.Fragment,null,r.createElement(i.A,{id:"payment.credit_card_cvv_label"}),r.createElement(c.A,{placement:"top-start",tooltip:r.createElement(a.A,null)},r.createElement("span",{className:"has-tip"},r.createElement(l.A,null))))),[]);return r.createElement(d.A,{additionalClassName:"form-ccFields-field--ccCvv",input:m,labelContent:u,name:n})}},59713:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(69440);function a(e,t,n){const a=window.getComputedStyle(e,n);return t.reduce(((e,t)=>Object.assign(Object.assign({},e),{[t]:a.getPropertyValue((0,r.kebabCase)(t))})),{})}},63582:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(31635),a=n(70355);const i=(0,n(19285).A)((({checkoutService:{deinitializeCustomer:e,initializeCustomer:t},checkoutButtonContainerClass:n,containerId:i,methodId:o,onUnhandledError:d,onWalletButtonClick:c,additionalInitializationOptions:l,integrations:s})=>((0,a.useEffect)((()=>((0,r.__awaiter)(void 0,void 0,void 0,(function*(){try{yield t({methodId:o,integrations:s,[o]:Object.assign({container:i,onUnhandledError:d,onClick:()=>c(o)},l)})}catch(e){"function"==typeof d&&e instanceof Error&&d(e)}})),()=>{(0,r.__awaiter)(void 0,void 0,void 0,(function*(){try{yield e({methodId:o})}catch(e){"function"==typeof d&&e instanceof Error&&d(e)}}))})),[]),a.createElement("div",{className:n,"data-test":i,id:i}))),[])},82804:(e,t,n)=>{n.d(t,{A:()=>m,S:()=>r});var r,a=n(69440),i=n(70355),o=n(54622),d=n(59713),c=n(9343),l=n(85216),s=n(10156);function m(e,t,n=r.Default){const m=document.createElement("div"),u=document.getElementById(e);if(!u)throw new Error("Unable to retrieve input styles as the provided container ID is not valid.");return u.appendChild(m),new Promise((e=>{o.render(i.createElement(c.Ay.Provider,{value:{isSubmitted:!0,setSubmitted:a.noop}},i.createElement(l.A,{hasError:n===r.Error},i.createElement(s.A,{appearFocused:n===r.Focus,ref:n=>{n&&(e((0,d.A)(n,t)),o.unmountComponentAtNode(m),m.parentElement&&m.parentElement.removeChild(m))}}))),m)}))}!function(e){e.Default="default",e.Error="error",e.Focus="focus"}(r||(r={}))},88186:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(31635),a=n(3375),i=n.n(a),o=n(70355);const d=e=>{var{additionalClassName:t,appearFocused:n,testId:a}=e,d=(0,r.__rest)(e,["additionalClassName","appearFocused","testId"]);return o.createElement("div",Object.assign({},d,{className:i()("form-input","optimizedCheckout-form-input",{"form-input--focus":n},{"optimizedCheckout-form-input--focus":n},t),"data-test":a}))}},89799:(e,t,n)=>{n.d(t,{A:()=>v});var r=n(31635),a=n(69440),i=n(70355),o=n(52137),d=n(43125),c=n(11474),l=n(62677),s=n(40646),m=n(91182),u=n(3375),p=n.n(u),b=n(72769),h=n(49655);const f=({buttonId:e,shouldShowEditButton:t})=>{if(t){const t=i.createElement(h.A,{id:"remote.select_different_card_action"});return i.createElement("p",null,i.createElement("button",{className:p()("stepHeader","widget-link-amazonpay"),id:e,onClick:(0,b.A)(),type:"button"},t))}return null},y=({shouldShowDescriptor:e,paymentDescriptor:t})=>e&&t?i.createElement("div",{className:"payment-descriptor"},t):null,g=({additionalContainerClassName:e,containerId:t,hideContentWhenSignedOut:n,hideWidget:r,isSignInRequired:a,isSignedIn:o,method:d,renderCustomPaymentForm:c,shouldRenderCustomInstrument:l,shouldShowCreditCardFieldset:s})=>i.createElement("div",{className:p()("widget",`widget--${d.id}`,"payment-widget",l?"":e),id:t,style:{display:n&&a&&!o||!s||r?"none":void 0},tabIndex:-1},l&&c&&c()),v=({instruments:e,hideWidget:t=!1,isInitializing:n=!1,isAccountInstrument:u,isInstrumentFeatureAvailable:p,isLoadingInstruments:b,shouldHideInstrumentExpiryDate:h=!1,shouldShow:v=!0,hideVerificationFields:C,method:E,storedCardValidationSchema:I,isPaymentDataRequired:k,setValidationSchema:S,loadInstruments:A,onUnhandledError:_=a.noop,deinitializeCustomer:w,deinitializePayment:F,setSubmit:N,initializeCustomer:x,initializePayment:O,signInCustomer:z,isSignedIn:P,isSignInRequired:$,isInstrumentCardNumberRequired:R,validateInstrument:B,containerId:T,hideContentWhenSignedOut:V=!1,renderCustomPaymentForm:j,additionalContainerClassName:W,shouldRenderCustomInstrument:D=!1,paymentDescriptor:q,shouldShowDescriptor:L,shouldShowEditButton:U,buttonId:M,setFieldValue:H})=>{const[G,J]=(0,i.useState)(!1),[K,Q]=(0,i.useState)(void 0),X=(0,i.useRef)(e);(0,i.useEffect)((()=>{X.current=e}),[e]);const Y=(0,i.useCallback)((()=>{if(G)return;const e=X.current.find((e=>e.defaultInstrument))||X.current[0];return e?e.bigpayToken:void 0}),[G]),Z=(0,i.useCallback)((()=>{const e=K||Y();return(0,a.find)(X.current,{bigpayToken:e})}),[K,Y]),ee=(0,i.useCallback)((()=>{if(!k)return null;const e=Z();return p&&e&&I||null}),[Z,p,k,I]),te=(0,i.useCallback)(((e,t)=>!e&&(0,o.T)(t)?t:void 0),[]),ne=(0,i.useCallback)((t=>{if(0===e.length)return J(!0),Q(void 0),void H("instrumentId","");if(K===t){const e=Y();Q(e),H("instrumentId",e)}}),[e,K,Y]),re=(0,i.useCallback)((()=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){J(!0),Q(void 0),F&&(yield F({gatewayId:E.gateway,methodId:E.id})),O&&(yield O({gatewayId:E.gateway,methodId:E.id}))}))),[E,F,O]),ae=(0,i.useCallback)((e=>{J(!1),Q(e)}),[]),ie=(0,i.useCallback)((()=>{const t=K||Y(),n=(0,a.find)(e,{bigpayToken:t});if(n){(0,d.A)(n);const e=R(n,E);if(C)return;if(B)return B(e,n)}}),[K,Y,e,E,C,B]),oe=()=>(0,r.__awaiter)(void 0,void 0,void 0,(function*(){const e=X.current;if(!k)return void N(E,null);if($&&!P)return N(E,z||null),x?x({methodId:E.id}):void 0;let t;if(N(E,null),!G){const n=K||Y(),r=e.find((e=>e.bigpayToken===n))||e[0];r&&(0,d.a)(r)&&(t=r)}return O?O({gatewayId:E.gateway,methodId:E.id},t):void 0})),de=K||Y(),ce=de&&e.find((e=>e.bigpayToken===de))||e[0],le=e.filter((e=>!(0,o.T)(e))),se=e.filter((e=>(0,o.T)(e))),me=p&&e.length>0,ue=!me||G,pe=(n||b)&&!t,be=ce?te(G,ce):void 0,he=e[0]&&(0,o.T)(e[0]);(0,i.useEffect)((()=>((0,r.__awaiter)(void 0,void 0,void 0,(function*(){S(E,ee());try{p&&(yield null==A?void 0:A()),yield oe()}catch(e){e instanceof Error&&_(e)}})),()=>{(0,r.__awaiter)(void 0,void 0,void 0,(function*(){S(E,null),N(E,null);try{F&&(yield F({gatewayId:E.gateway,methodId:E.id})),w&&(yield w({methodId:E.id}))}catch(e){e instanceof Error&&_(e)}}))})),[]);const fe=(0,i.useRef)(!0),ye=(0,i.useRef)(e.length),ge=(0,i.useRef)(k),ve=(0,i.useRef)(K);return(0,i.useEffect)((()=>{if(fe.current)return void(fe.current=!1);S(E,ee());(ve.current!==K||Number(ye.current)>0&&0===e.length||ge.current!==k)&&(ve.current=K,ye.current=e.length,ge.current=k,(0,r.__awaiter)(void 0,void 0,void 0,(function*(){try{F&&(yield F({gatewayId:E.gateway,methodId:E.id})),yield oe()}catch(e){e instanceof Error&&_(e)}})))}),[K,e,k]),v?i.createElement(m.A,{hideContentWhenLoading:!0,isLoading:pe},i.createElement("div",{className:"paymentMethod--hosted"},he&&me&&i.createElement(c.A,{instruments:se,onSelectInstrument:ae,onUseNewInstrument:re,selectedInstrument:be}),!he&&me&&i.createElement(l.A,{instruments:le,onDeleteInstrument:ne,onSelectInstrument:ae,onUseNewInstrument:re,selectedInstrumentId:de,shouldHideExpiryDate:h,validateInstrument:ie()}),i.createElement(y,{paymentDescriptor:q,shouldShowDescriptor:L}),i.createElement(g,{additionalContainerClassName:W,containerId:T,hideContentWhenSignedOut:V,hideWidget:t,isSignInRequired:$,isSignedIn:P,method:E,renderCustomPaymentForm:j,shouldRenderCustomInstrument:D,shouldShowCreditCardFieldset:ue}),p&&i.createElement(s.A,{instrumentId:de,instruments:e,isAccountInstrument:Boolean(u||he)}),i.createElement(f,{buttonId:M,shouldShowEditButton:U}))):i.createElement("div",{style:{display:"none"}})}},98363:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(70355),a=n(49655),i=n(36659),o=n(47459),d=n(12929);const c=({cardCodeId:e,cardNumberId:t,cardExpiryId:n,focusedFieldType:c})=>r.createElement(r.Fragment,null,t&&r.createElement("p",null,r.createElement("strong",null,r.createElement(a.A,{id:"payment.instrument_trusted_shipping_address_title_text"})),r.createElement("br",null),r.createElement(a.A,{id:"payment.instrument_trusted_shipping_address_text"})),r.createElement("div",{className:"form-ccFields"},t&&r.createElement(i.A,{appearFocused:"cardNumber"===c,id:t,name:"hostedForm.errors.cardNumberVerification"}),e&&r.createElement(o.A,{appearFocused:"cardCode"===c,id:e,name:"hostedForm.errors.cardCodeVerification"}),n&&r.createElement(d.A,{appearFocused:"cardExpiry"===c,id:n,name:"hostedForm.errors.cardExpiryVerification"})))}}]);
//# sourceMappingURL=9557-abfb9a7d.js.map