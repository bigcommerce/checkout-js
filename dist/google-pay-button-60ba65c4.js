"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[2004,4748],{17486:(t,e,a)=>{a.d(e,{A:()=>_});var n,o=a(31635),i=a(69440),r=a(70355),l=a(72769),d=a(76049),c=a(49655),m=a(28058);!function(t){t.ApplePay="applepay",t.Barclaycard="barclaycard",t.CreditCard="credit-card",t.GooglePay="googlepay",t.PayWithGoogle="paywithgoogle",t.Masterpass="masterpass",t.MultiOption="multi-option",t.Paypal="paypal",t.PaypalCredit="paypal-credit",t.PaypalVenmo="paypal-venmo",t.VisaCheckout="visa-checkout"}(n||(n={}));const s=n;function y(t){return e=>{let a=function(t){return e=>{const a={[m.A.Affirm]:t.translate("payment.affirm_name_text"),[m.A.Afterpay]:t.translate("payment.afterpay_name_text"),[m.A.AmazonPay]:t.translate("payment.amazon_name_text"),[m.A.Bolt]:t.translate("payment.bolt_name_text"),[m.A.Clearpay]:t.translate("payment.clearpay_name_text"),[s.GooglePay]:t.translate("payment.google_pay_name_text"),[m.A.Klarna]:t.translate("payment.klarna_name_text"),[s.Paypal]:t.translate("payment.paypal_name_text"),[s.PaypalCredit]:t.translate("payment.paypal_credit_name_text"),[s.VisaCheckout]:t.translate("payment.vco_name_text")};return a[e.id]||a[e.method]}}(t)(e);return a&&e.method!==s.MultiOption||(a=e.config.displayName),a||(a=(0,i.capitalize)((0,i.get)(e,"initializationData.paymentData.cardData.digital_wallet_type")||e.method||e.id)),a}}const u=({method:t,onSignOut:e})=>{const{language:a}=(0,d.Y)();return r.createElement("div",{className:"signout-link"},r.createElement(c.A,{id:"remote.sign_out_before_action"})," ",r.createElement("a",{href:"#",onClick:(0,l.A)(e)},r.createElement(c.A,{data:{providerName:y(a)(t)},id:"remote.sign_out_action"}))," ",r.createElement(c.A,{id:"remote.sign_out_after_action"}))};var p=a(91182),g=a(22437);const h=(t="",e="****")=>t.includes("*")?t:`${e} ${t}`,P=t=>{if((t=>{if("object"==typeof t&&null!==t){if("card_information"in t&&"object"==typeof t.card_information&&null!==t.card_information&&"number"in t.card_information&&"type"in t.card_information)return!0;if("cardData"in t&&"object"==typeof t.cardData&&null!==t.cardData&&"accountMask"in t.cardData&&"cardType"in t.cardData&&"expMonth"in t.cardData&&"expYear"in t.cardData)return!0;if("accountNum"in t&&"accountMask"in t&&"expDate"in t)return!0}return!1})(t)){if(t.card_information)return{accountMask:h(t.card_information.number),cardType:t.card_information.type};if(t.cardData)return{accountMask:h(t.cardData.accountMask),cardType:t.cardData.cardType,expiryMonth:t.cardData.expMonth,expiryYear:t.cardData.expYear};if(t.accountNum){const{card:e}=(0,g.number)(t.accountNum);return{accountMask:h(t.accountMask),expiryMonth:t.expDate&&t.expDate.substr(0,2),expiryYear:t.expDate&&t.expDate.substr(2,2),cardType:e?e.niceType:""}}}};class A extends r.Component{constructor(){super(...arguments),this.handleSignOut=()=>(0,o.__awaiter)(this,void 0,void 0,function*(){const{signOutCustomer:t,method:e,onSignOut:a=i.noop,onSignOutError:n=i.noop}=this.props;try{yield t({methodId:e.id}),a(),window.location.reload()}catch(t){n(t)}})}componentDidMount(){return(0,o.__awaiter)(this,void 0,void 0,function*(){const{initializePayment:t,method:e,onUnhandledError:a=i.noop}=this.props;this.toggleSubmit();try{yield t({gatewayId:e.gateway,methodId:e.id})}catch(t){a(t)}})}componentWillUnmount(){return(0,o.__awaiter)(this,void 0,void 0,function*(){const{deinitializePayment:t,paymentForm:{disableSubmit:e},method:a,onUnhandledError:n=i.noop}=this.props;e(a,!1);try{yield t({gatewayId:a.gateway,methodId:a.id})}catch(t){n(t)}})}componentDidUpdate(t){const{method:e}=this.props,{isPaymentDataRequired:a}=this.getWalletButtonPaymentMethodDerivedProps(),{method:n,isPaymentDataRequired:o}=t;e.initializationData===n.initializationData&&a===o||this.toggleSubmit()}render(){const{isInitializing:t=!1}=this.props,{isPaymentSelected:e}=this.getWalletButtonPaymentMethodDerivedProps();return r.createElement(p.A,{hideContentWhenLoading:!0,isLoading:t},r.createElement("div",{className:"paymentMethod paymentMethod--walletButton"},e?this.renderPaymentView():this.renderSignInView()))}renderSignInView(){const{buttonId:t,signInButtonClassName:e,signInButtonLabel:a,method:n,language:o}=this.props;return r.createElement("a",{className:e,href:"#",id:t,onClick:(0,l.A)()},a||r.createElement(c.A,{data:{providerName:y(o)(n)},id:"remote.sign_in_action"}))}renderPaymentView(){const{buttonId:t,editButtonClassName:e,editButtonLabel:a,shouldShowEditButton:n,method:o}=this.props,{accountMask:i,cardName:d,cardType:m,expiryMonth:s,expiryYear:y}=this.getWalletButtonPaymentMethodDerivedProps();return r.createElement(r.Fragment,null,!!d&&r.createElement("p",{"data-test":"payment-method-wallet-card-name"},r.createElement("strong",null,r.createElement(c.A,{id:"payment.credit_card_name_label"}),":")," ",d),!!i&&!!m&&r.createElement("p",{"data-test":"payment-method-wallet-card-type"},r.createElement("strong",null,`${m}:`)," ",i),!!s&&!!y&&r.createElement("p",{"data-test":"payment-method-wallet-card-expiry"},r.createElement("strong",null,r.createElement(c.A,{id:"payment.credit_card_expiration_date_label"}),":")," ",`${s}/${y}`),!!n&&r.createElement("p",null,r.createElement("a",{className:e,href:"#",id:t,onClick:(0,l.A)()},a||r.createElement(c.A,{id:"remote.select_different_card_action"}))),r.createElement(u,{method:o,onSignOut:this.handleSignOut}))}toggleSubmit(){const{paymentForm:{disableSubmit:t},method:e}=this.props,{isPaymentDataRequired:a}=this.getWalletButtonPaymentMethodDerivedProps();P(e.initializationData)||!a?t(e,!1):t(e,!0)}getWalletButtonPaymentMethodDerivedProps(){const{checkoutState:t,method:e}=this.props,{data:{getBillingAddress:a,getCheckout:n,isPaymentDataRequired:o}}=t,r=a(),l=n();if(!r||!l)throw new Error("Unable to get checkout");const d=P(e.initializationData);return Object.assign(Object.assign({},d),{cardName:d&&[r.firstName,r.lastName].join(" "),isPaymentDataRequired:o(),isPaymentSelected:(0,i.some)(l.payments,{providerId:e.id})})}}const _=A},34593:(t,e,a)=>{a.d(e,{A:()=>d});var n=a(31635),o=a(70355),i=a(28058),r=a(19285),l=a(17486);const d=(0,r.A)(t=>{var{checkoutService:e,method:a,onUnhandledError:r}=t,d=(0,n.__rest)(t,["checkoutService","method","onUnhandledError"]);const c=(0,o.useCallback)(t=>{const o=t=>(0,n.__awaiter)(void 0,void 0,void 0,function*(){try{yield e.deinitializePayment({gatewayId:a.gateway,methodId:a.id}),yield e.initializePayment(Object.assign(Object.assign({},t),{gatewayId:a.gateway,methodId:a.id}))}catch(t){t instanceof Error&&r(t)}}),l="checkout-app",d=Object.assign(Object.assign({},t),{[i.A.AdyenV2GooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.AdyenV3GooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.AuthorizeNetGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.BNZGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.BigCommercePaymentsGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.BraintreeGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.PayPalCommerceGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.StripeGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.StripeUPEGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.CybersourceV2GooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.OrbitalGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.CheckoutcomGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.WorldpayAccessGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.TdOnlineMartGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)},[i.A.StripeOCSGooglePay]:{loadingContainerId:l,walletButton:"walletButton",onError:r,onPaymentSelect:()=>o(d)}});return e.initializePayment(d)},[e,a,r]);return o.createElement(l.A,Object.assign({},d,{buttonId:"walletButton",deinitializePayment:e.deinitializePayment,initializePayment:c,method:a,shouldShowEditButton:!0,signOutCustomer:e.signOutCustomer}))},[{id:i.A.AdyenV2GooglePay},{id:i.A.AdyenV3GooglePay},{id:i.A.AuthorizeNetGooglePay},{id:i.A.BNZGooglePay},{id:i.A.BraintreeGooglePay},{id:i.A.PayPalCommerceGooglePay},{id:i.A.BigCommercePaymentsGooglePay},{id:i.A.CheckoutcomGooglePay},{id:i.A.CybersourceV2GooglePay},{id:i.A.OrbitalGooglePay},{id:i.A.StripeGooglePay},{id:i.A.StripeUPEGooglePay},{id:i.A.WorldpayAccessGooglePay},{id:i.A.TdOnlineMartGooglePay},{id:i.A.StripeOCSGooglePay}])},72181:(t,e,a)=>{a.r(e),a.d(e,{GooglePayButton:()=>n.A,GooglePayPaymentMethod:()=>o.A});var n=a(48734),o=a(34593)}}]);
//# sourceMappingURL=google-pay-button-60ba65c4.js.map