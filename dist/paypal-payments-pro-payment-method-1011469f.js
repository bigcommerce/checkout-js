"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[9941],{26341:(e,t,n)=>{n.r(t),n.d(t,{default:()=>d});var s=n(31635),a=n(70355),i=n(28887),r=n(3875);const d=(0,i.A)(e=>{var{getHostedFormOptions:t,getHostedStoredCardValidationFieldset:n,hostedFieldset:i,hostedStoredCardValidationSchema:d,hostedValidationSchema:l,initializePayment:o}=e,m=(0,s.__rest)(e,["getHostedFormOptions","getHostedStoredCardValidationFieldset","hostedFieldset","hostedStoredCardValidationSchema","hostedValidationSchema","initializePayment"]);const c=(0,a.useCallback)((e,n)=>(0,s.__awaiter)(void 0,void 0,void 0,function*(){return o(Object.assign(Object.assign({},e),{creditCard:t&&{form:yield t(n)}}))}),[t,o]);return a.createElement(r.A,Object.assign({},m,{cardFieldset:i,cardValidationSchema:l,getStoredCardValidationFieldset:n,initializePayment:c,storedCardValidationSchema:d}))})},42518:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var s=n(31635),a=n(44218),i=n(69440),r=n(70355),d=n(68512),l=n(91182),o=n(45293),m=n(83742),c=n(49655),u=n(48447),p=n(60833),h=n(43586),I=n(29853),g=n(91589),E=n(3375),C=n.n(E),y=n(67113),v=n(97712),w=n(45080);const N=(0,w.A)(()=>r.createElement("svg",{height:"25",viewBox:"0 0 35 25",width:"35",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{clipRule:"evenodd",d:"M33 2H2L2 23H33V2ZM2 0C0.895431 0 0 0.89543 0 2V23C0 24.1046 0.89543 25 2 25H33C34.1046 25 35 24.1046 35 23V2C35 0.89543 34.1046 0 33 0H2Z",fill:"#D1D7E0",fillRule:"evenodd"}),r.createElement("path",{clipRule:"evenodd",d:"M11 12C11 11.4477 11.4477 11 12 11H24C24.5523 11 25 11.4477 25 12V14C25 14.5523 24.5523 15 24 15H12C11.4477 15 11 14.5523 11 14V12Z",fill:"#D1D7E0",fillRule:"evenodd"}),r.createElement("path",{clipRule:"evenodd",d:"M19 6C19.5523 6 20 6.44772 20 7V19C20 19.5523 19.5523 20 19 20H17C16.4477 20 16 19.5523 16 19V7C16 6.44772 16.4477 6 17 6H19Z",fill:"#D1D7E0",fillRule:"evenodd"})));var S=n(96131);class b extends r.PureComponent{componentDidMount(){const{selectedInstrumentId:e}=this.props;setTimeout(()=>this.updateFieldValue(e))}componentDidUpdate(e){const{selectedInstrumentId:t}=e,{selectedInstrumentId:n}=this.props;t!==n&&this.updateFieldValue(n)}componentWillUnmount(){const{selectedInstrumentId:e,field:t}=this.props;""===t.value&&void 0!==e&&this.updateFieldValue()}render(){const{field:e,instruments:t,onSelectInstrument:n,onUseNewInstrument:a,selectedInstrumentId:d}=this.props,l=(0,i.find)(t,{bigpayToken:d}),{value:o}=e,m=(0,s.__rest)(e,["value"]);return r.createElement("div",{className:"instrumentSelect"},r.createElement(y.A,{dropdown:r.createElement(f,{instruments:t,onSelectInstrument:n,onUseNewInstrument:a,selectedInstrumentId:d})},r.createElement(k,{instrument:l,testId:"instrument-select"}),r.createElement("input",Object.assign({type:"hidden",value:o||""},m))))}updateFieldValue(e=""){const{form:t,field:n}=this.props;t.setFieldValue(n.name,e)}}const f=({instruments:e,selectedInstrumentId:t,onSelectInstrument:n,onUseNewInstrument:s})=>r.createElement("ul",{className:"instrumentSelect-dropdownMenu instrumentSelect-dropdownMenuNext dropdown-menu","data-test":"instrument-select-menu"},e.map(e=>r.createElement("li",{className:C()("instrumentSelect-option dropdown-menu-item",{"instrumentSelect-option--selected":e.bigpayToken===t}),key:e.bigpayToken},r.createElement(A,{instrument:e,onClick:n,testId:"instrument-select-option"}))),r.createElement("li",{className:"instrumentSelect-option instrumentSelect-option--addNew dropdown-menu-item"},r.createElement(F,{onClick:s,testId:"instrument-select-option-use-new"}))),k=({instrument:e,testId:t,onClick:n})=>e?(0,S.A)(e)?r.createElement(V,{className:"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input",instrument:e,onClick:n,testId:t}):r.createElement(_,{className:"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input",instrument:e,onClick:n,testId:t}):r.createElement(F,{className:"instrumentSelect-button optimizedCheckout-form-select dropdown-button form-input",testId:t}),A=({instrument:e,onClick:t=i.noop})=>{const n=(0,r.useCallback)(()=>{t(e.bigpayToken)},[t,e]);return(0,S.A)(e)?r.createElement(V,{instrument:e,onClick:n,testId:"instrument-select-option"}):r.createElement(_,{instrument:e,onClick:n,testId:"instrument-select-option"})},_=({className:e,instrument:{externalId:t},testId:n,onClick:s})=>r.createElement("button",{className:e,"data-test":n,onClick:s,type:"button"},r.createElement("div",{className:"instrumentSelect-details"},r.createElement(v.A,{additionalClassName:"accountIcon-icon",size:w.l.Medium}),r.createElement("div",{className:"instrumentSelect-account","data-test":`${n}-externalId`},t))),V=({className:e,instrument:t,testId:n,onClick:s})=>r.createElement("button",{className:e,"data-test":n,onClick:s,type:"button"},r.createElement("div",{className:"instrumentSelect-details"},r.createElement("div",{className:"instrumentSelect-card"},r.createElement(c.A,{data:{accountNumber:t.accountNumber},id:"payment.instrument_account_number_ending"})),r.createElement("div",{className:"instrumentSelect-issuer"},r.createElement(c.A,{id:"payment.instrument_issuer"}),": ",t.issuer))),F=({className:e,testId:t,onClick:n=i.noop})=>r.createElement("button",{className:e,"data-test":t,onClick:n,type:"button"},r.createElement("div",{className:"instrumentSelect-details instrumentSelect-details--addNew"},r.createElement(N,{additionalClassName:"accountIcon-icon",size:w.l.Medium}),r.createElement("div",{className:"instrumentSelect-account"},r.createElement(c.A,{id:"payment.account_instrument_add_action"})))),H=b;var M=n(42291);const D=(0,r.memo)(({instruments:e,onSelectInstrument:t,onUseNewInstrument:n,selectedInstrument:s})=>{const a=(0,r.useCallback)(a=>r.createElement(H,Object.assign({},a,{instruments:e,onSelectInstrument:t,onUseNewInstrument:n,selectedInstrumentId:s&&s.bigpayToken})),[e,t,n,s]),i=(0,r.useCallback)(t=>r.createElement(M.A,Object.assign({instruments:e},t)),[e]);return r.createElement(p.A,{additionalClassName:"instrumentFieldset",legend:r.createElement(h.A,{hidden:!0},r.createElement(c.A,{id:"payment.account_instrument_text"}))},r.createElement(g.A,{modal:i},({onClick:e})=>r.createElement("button",{className:"instrumentModal-trigger",onClick:e,type:"button"},r.createElement(c.A,{id:"payment.instrument_manage_button"}))),r.createElement(I.A,{name:"instrumentId",render:a}),0===e.length&&r.createElement("div",{className:"instrumentSelect-note"},r.createElement(u.A,{id:"payment.account_instrument_new_shipping_address"})))});var U=n(77269),P=n(13363),z=n(98873),O=n(67874);class T extends r.Component{constructor(){super(...arguments),this.state={isAddingNewInstrument:!1},this.handleUseNewInstrument=()=>{this.setState({isAddingNewInstrument:!0,selectedInstrument:void 0})},this.handleSelectInstrument=e=>{const{instruments:t}=this.props;this.setState({isAddingNewInstrument:!1,selectedInstrument:(0,i.find)(t,{bigpayToken:e})})}}componentDidMount(){return(0,s.__awaiter)(this,void 0,void 0,function*(){const{initializePayment:e,isInstrumentFeatureAvailable:t,loadInstruments:n,method:s,onUnhandledError:a=i.noop}=this.props;try{yield e({gatewayId:s.gateway,methodId:s.id}),t&&(yield n())}catch(e){a(e)}})}componentWillUnmount(){return(0,s.__awaiter)(this,void 0,void 0,function*(){const{deinitializePayment:e,method:t,onUnhandledError:n=i.noop}=this.props;try{yield e({gatewayId:t.gateway,methodId:t.id})}catch(e){n(e)}})}render(){const{description:e,isInitializing:t=!1,isLoadingInstruments:n,instruments:s,isNewAddress:a,isInstrumentFeatureAvailable:i}=this.props,{selectedInstrument:d=this.getDefaultInstrument()}=this.state,o=t||n,m=i&&(s.length>0||a);return e||i?r.createElement(l.A,{hideContentWhenLoading:!0,isLoading:o},r.createElement("div",{className:"paymentMethod paymentMethod--hosted"},e,m&&r.createElement(D,{instruments:s,onSelectInstrument:this.handleSelectInstrument,onUseNewInstrument:this.handleUseNewInstrument,selectedInstrument:d}),i&&r.createElement(z.A,{instrumentId:d&&d.bigpayToken,isAccountInstrument:!0}))):null}getDefaultInstrument(){const{isAddingNewInstrument:e}=this.state,{instruments:t}=this.props;if(!e&&t.length)return(0,i.find)(t,{defaultInstrument:!0})||t[0]}}const j=(0,m.A)((0,d.A)((0,O.A)((0,o.A)(()=>{const e=(0,a.B4)((e=[])=>e.filter(U.A)),t=(0,a.B4)((e=[])=>e.filter(({trustedShippingAddress:e})=>e));return(n,s)=>{const{method:a}=s,{checkoutService:i,checkoutState:r}=n,{data:{getCart:d,getConfig:l,getCustomer:o,getInstruments:m,isPaymentDataRequired:c,isPaymentDataSubmitted:u},statuses:{isLoadingInstruments:p}}=r,h=d(),I=l(),g=o();if(!(I&&h&&g&&a))return null;const E=e(m(a)),C=t(E);return{instruments:C,isNewAddress:0===C.length&&E.length>0,isInstrumentFeatureAvailable:!u(a.id,a.gateway)&&(0,P.A)({config:I,customer:g,paymentMethod:a}),isLoadingInstruments:p(),isPaymentDataRequired:c(),loadInstruments:i.loadInstruments}}})(T))))},88744:(e,t,n)=>{n.r(t),n.d(t,{default:()=>m});var s=n(31635),a=n(70355),i=n(45293),r=n(79001),d=n(26341),l=n(42518),o=n(43570);const m=(0,i.A)(function({checkoutState:e},{method:t}){const{data:{getCheckout:n}}=e,{payments:s=r.M}=n()||{},a=s.find(({providerType:e})=>e===o.A.Hosted);return{isHostedPayment:!!a&&(a.providerId===t.id&&a.gatewayId===t.gateway)}})(e=>{var{isHostedPayment:t}=e,n=(0,s.__rest)(e,["isHostedPayment"]);return t?a.createElement(l.default,Object.assign({},n)):a.createElement(d.default,Object.assign({},n))})}}]);
//# sourceMappingURL=paypal-payments-pro-payment-method-1011469f.js.map