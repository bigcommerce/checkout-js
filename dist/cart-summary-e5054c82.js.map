{"version":3,"file":"cart-summary-e5054c82.js","mappings":"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","sources":["webpack://checkout/./packages/core/src/app/cart/CartSummary.tsx","webpack://checkout/./packages/ui/src/modal/ConfirmationModal.tsx","webpack://checkout/./packages/core/src/app/cart/EditLink.tsx","webpack://checkout/./packages/core/src/app/cart/mapToCartSummaryProps.ts","webpack://checkout/./packages/core/src/app/cart/withRedeemable.tsx","webpack://checkout/./packages/core/src/app/cart/mapToOrderSummarySubtotalsProps.ts","webpack://checkout/./packages/core/src/app/order/OrderSummaryHeader.tsx","webpack://checkout/./packages/core/src/app/order/OrderSummary.tsx"],"sourcesContent":["import { Checkout, ShopperCurrency, StoreCurrency } from '@bigcommerce/checkout-sdk';\nimport React, { FunctionComponent } from 'react';\n\nimport { withCheckout } from '../checkout';\nimport { isBuyNowCart } from '../common/utility';\nimport OrderSummary from '../order/OrderSummary';\n\nimport EditLink from './EditLink';\nimport mapToCartSummaryProps from './mapToCartSummaryProps';\nimport { RedeemableProps } from './Redeemable';\nimport withRedeemable from './withRedeemable';\n\nexport type WithCheckoutCartSummaryProps = {\n    checkout: Checkout;\n    cartUrl: string;\n    storeCurrency: StoreCurrency;\n    shopperCurrency: ShopperCurrency;\n    storeCreditAmount?: number;\n    isNewMultiShippingUIEnabled: boolean;\n} & RedeemableProps;\n\nconst CartSummary: FunctionComponent<\n    WithCheckoutCartSummaryProps & {\n        isMultiShippingMode: boolean;\n    }\n> = ({ cartUrl, isMultiShippingMode, isNewMultiShippingUIEnabled, ...props }) => {\n    const headerLink = isBuyNowCart() ? null : (\n        <EditLink\n            isMultiShippingMode={isNewMultiShippingUIEnabled && isMultiShippingMode}\n            url={cartUrl}\n        />\n    );\n\n    return withRedeemable(OrderSummary)({\n        ...props,\n        cartUrl,\n        headerLink,\n        isNewMultiShippingUIEnabled,\n    });\n};\n\nexport default withCheckout(mapToCartSummaryProps)(CartSummary);\n","import React from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport { Button, ButtonSize, ButtonVariant } from '../button';\n\nimport Modal from './Modal';\nimport ModalHeader from './ModalHeader';\n\ninterface ConfirmationModalProps {\n    headerId: string;\n    messageId: string;\n    isModalOpen: boolean;\n    onRequestClose: () => void;\n    action: () => void;\n}\n\nconst ConfirmationModal = ({\n    headerId,\n    messageId,\n    isModalOpen,\n    action,\n    onRequestClose,\n}: ConfirmationModalProps) => {\n    return (\n        <Modal\n            additionalModalClassName=\"modal--confirm\"\n            footer={\n                <Button onClick={action} size={ButtonSize.Small} variant={ButtonVariant.Primary}>\n                    <TranslatedString id=\"common.confirm_action\" />\n                </Button>\n            }\n            header={\n                <ModalHeader>\n                    <span aria-live=\"assertive\" role=\"alert\">\n                        <TranslatedString id={headerId} />\n                    </span>\n                </ModalHeader>\n            }\n            isOpen={isModalOpen}\n            onRequestClose={onRequestClose}\n            shouldShowCloseButton={true}\n        >\n            <p aria-live=\"assertive\" role=\"alert\">\n                <TranslatedString id={messageId} />\n            </p>\n        </Modal>\n    );\n};\n\nexport default ConfirmationModal;\n","import React, { FunctionComponent, memo, useState } from 'react';\n\nimport { preventDefault } from '@bigcommerce/checkout/dom-utils';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\nimport { ConfirmationModal } from '@bigcommerce/checkout/ui';\n\nexport interface EditLinkProps {\n    className?: string;\n    isMultiShippingMode: boolean;\n    url: string;\n}\n\nconst EditLink: FunctionComponent<EditLinkProps> = ({ className, url, isMultiShippingMode }) => {\n    const [isModalOpen, setIsModalOpen] = useState(false);\n\n    const gotoCartPage = () => {\n        window.location.assign(url);\n    };\n\n    if (isMultiShippingMode) {\n        return (\n            <>\n                <ConfirmationModal\n                    action={gotoCartPage}\n                    headerId=\"cart.edit_cart_action\"\n                    isModalOpen={isModalOpen}\n                    messageId=\"cart.edit_multi_shipping_cart_message\"\n                    onRequestClose={() => setIsModalOpen(false)}\n                />\n                <a\n                    className={className || 'cart-header-link'}\n                    data-test=\"cart-edit-link\"\n                    href=\"#\"\n                    id=\"cart-edit-link\"\n                    onClick={preventDefault(() => setIsModalOpen(true))}\n                >\n                    <TranslatedString id=\"cart.edit_cart_action\" />\n                </a>\n            </>\n        );\n    }\n\n    return (\n        <a\n            className={className || 'cart-header-link'}\n            data-test=\"cart-edit-link\"\n            href={url}\n            id=\"cart-edit-link\"\n            target=\"_top\"\n        >\n            <TranslatedString id=\"cart.edit_cart_action\" />\n        </a>\n    );\n};\n\nexport default memo(EditLink);\n","import { CheckoutContextProps } from '@bigcommerce/checkout/payment-integration-api';\n\nimport { isExperimentEnabled } from '../common/utility';\n\nimport { WithCheckoutCartSummaryProps } from './CartSummary';\nimport mapToRedeemableProps from './mapToRedeemableProps';\n\nexport default function mapToCartSummaryProps(\n    context: CheckoutContextProps,\n): WithCheckoutCartSummaryProps | null {\n    const {\n        checkoutState: {\n            data: { getConfig, getCustomer, getCheckout },\n        },\n    } = context;\n\n    const checkout = getCheckout();\n    const config = getConfig();\n    const customer = getCustomer();\n    const redeemableProps = mapToRedeemableProps(context);\n\n    if (!checkout || !config || !redeemableProps || !customer) {\n        return null;\n    }\n\n    const { isStoreCreditApplied, grandTotal } = checkout;\n    const { storeCredit } = customer;\n    const isNewMultiShippingUIEnabled = isExperimentEnabled(\n        config.checkoutSettings,\n        'PROJECT-4159.improve_multi_address_shipping_ui',\n    );\n\n    return {\n        isNewMultiShippingUIEnabled,\n        checkout,\n        shopperCurrency: config.shopperCurrency,\n        cartUrl: config.links.cartLink,\n        storeCurrency: config.currency,\n        storeCreditAmount: isStoreCreditApplied ? Math.min(grandTotal, storeCredit) : undefined,\n        ...redeemableProps,\n    };\n}\n","import React, { ComponentType, FunctionComponent } from 'react';\n\nimport { OrderSummaryProps, OrderSummarySubtotalsProps } from '../order';\n\nimport { WithCheckoutCartSummaryProps } from './CartSummary';\nimport mapToOrderSummarySubtotalsProps from './mapToOrderSummarySubtotalsProps';\nimport Redeemable from './Redeemable';\n\nexport default function withRedeemable(\n    OriginalComponent: ComponentType<OrderSummaryProps & OrderSummarySubtotalsProps>,\n): FunctionComponent<WithCheckoutCartSummaryProps & { headerLink?: any }> {\n    return (props) => {\n        const {\n            checkout,\n            storeCurrency,\n            shopperCurrency,\n            headerLink,\n            onRemovedCoupon,\n            onRemovedGiftCertificate,\n            storeCreditAmount,\n            ...redeemableProps\n        } = props;\n\n        return (\n            <OriginalComponent\n                {...mapToOrderSummarySubtotalsProps(checkout)}\n                additionalLineItems={\n                    <Redeemable\n                        {...{\n                            ...redeemableProps,\n                            onRemovedCoupon,\n                            onRemovedGiftCertificate,\n                        }}\n                    />\n                }\n                headerLink={headerLink}\n                lineItems={checkout.cart.lineItems}\n                onRemovedCoupon={onRemovedCoupon}\n                onRemovedGiftCertificate={onRemovedGiftCertificate}\n                shopperCurrency={shopperCurrency}\n                storeCreditAmount={storeCreditAmount}\n                storeCurrency={storeCurrency}\n                total={checkout.outstandingBalance}\n            />\n        );\n    };\n}\n","import { Checkout } from '@bigcommerce/checkout-sdk';\n\nimport { OrderSummarySubtotalsProps } from '../order';\nimport { hasSelectedShippingOptions } from '../shipping';\n\nexport default function mapToOrderSummarySubtotalsProps({\n    subtotal,\n    cart: { discountAmount, isTaxIncluded },\n    giftCertificates,\n    consignments,\n    handlingCostTotal,\n    shippingCostBeforeDiscount,\n    giftWrappingCostTotal,\n    coupons,\n    taxes,\n    fees,\n}: Checkout): OrderSummarySubtotalsProps {\n    return {\n        subtotalAmount: subtotal,\n        discountAmount,\n        giftCertificates,\n        giftWrappingAmount: giftWrappingCostTotal,\n        shippingAmount: hasSelectedShippingOptions(consignments)\n            ? shippingCostBeforeDiscount\n            : undefined,\n        handlingAmount: handlingCostTotal,\n        coupons,\n        taxes,\n        fees,\n        isTaxIncluded,\n    };\n}\n","import React, { FunctionComponent } from 'react';\n\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nconst OrderSummaryHeader: FunctionComponent = ({ children }) => (\n    <header className=\"cart-header\">\n        <h3 className=\"cart-title optimizedCheckout-headingSecondary\">\n            <TranslatedString id=\"cart.cart_heading\" />\n        </h3>\n        {children}\n    </header>\n);\n\nexport default OrderSummaryHeader;\n","import {\n    ExtensionRegion,\n    LineItemMap,\n    ShopperCurrency,\n    StoreCurrency,\n} from '@bigcommerce/checkout-sdk';\nimport React, { FunctionComponent, ReactNode, useMemo } from 'react';\n\nimport { Extension } from '@bigcommerce/checkout/checkout-extension';\nimport { TranslatedString } from '@bigcommerce/checkout/locale';\n\nimport OrderSummaryHeader from './OrderSummaryHeader';\nimport OrderSummaryItems from './OrderSummaryItems';\nimport OrderSummaryPrice from './OrderSummaryPrice';\nimport OrderSummarySection from './OrderSummarySection';\nimport OrderSummarySubtotals, { OrderSummarySubtotalsProps } from './OrderSummarySubtotals';\nimport OrderSummaryTotal from './OrderSummaryTotal';\nimport removeBundledItems from './removeBundledItems';\n\nexport interface OrderSummaryProps {\n    lineItems: LineItemMap;\n    total: number;\n    headerLink: ReactNode;\n    storeCurrency: StoreCurrency;\n    shopperCurrency: ShopperCurrency;\n    additionalLineItems?: ReactNode;\n}\n\nconst OrderSummary: FunctionComponent<OrderSummaryProps & OrderSummarySubtotalsProps> = ({\n    isTaxIncluded,\n    taxes,\n    storeCurrency,\n    shopperCurrency,\n    headerLink,\n    additionalLineItems,\n    lineItems,\n    total,\n    ...orderSummarySubtotalsProps\n}) => {\n    const nonBundledLineItems = useMemo(() => removeBundledItems(lineItems), [lineItems]);\n    const displayInclusiveTax = isTaxIncluded && taxes && taxes.length > 0;\n\n    return (\n        <article className=\"cart optimizedCheckout-orderSummary\" data-test=\"cart\">\n            <OrderSummaryHeader>{headerLink}</OrderSummaryHeader>\n\n            <OrderSummarySection>\n                <OrderSummaryItems displayLineItemsCount items={nonBundledLineItems} />\n            </OrderSummarySection>\n\n            <Extension region={ExtensionRegion.SummaryLastItemAfter} />\n\n            <OrderSummarySection>\n                <OrderSummarySubtotals isTaxIncluded={isTaxIncluded} taxes={taxes} {...orderSummarySubtotalsProps} />\n                {additionalLineItems}\n            </OrderSummarySection>\n\n            <OrderSummarySection>\n                <OrderSummaryTotal\n                    orderAmount={total}\n                    shopperCurrencyCode={shopperCurrency.code}\n                    storeCurrencyCode={storeCurrency.code}\n                />\n            </OrderSummarySection>\n\n            {displayInclusiveTax && <OrderSummarySection>\n                <h5\n                    className=\"cart-taxItem cart-taxItem--subtotal optimizedCheckout-contentPrimary\"\n                    data-test=\"tax-text\"\n                >\n                    <TranslatedString\n                        id=\"tax.inclusive_label\"\n                    />\n                </h5>\n                {(taxes || []).map((tax, index) => (\n                    <OrderSummaryPrice\n                        amount={tax.amount}\n                        key={index}\n                        label={tax.name}\n                        testId=\"cart-taxes\"\n                    />\n                ))}\n            </OrderSummarySection>}\n        </article>\n    );\n};\n\nexport default OrderSummary;\n"],"names":["cartUrl","isMultiShippingMode","isNewMultiShippingUIEnabled","props","headerLink","url","headerId","messageId","isModalOpen","action","onRequestClose","Modal","additionalModalClassName","footer","Button","onClick","size","Small","variant","Primary","TranslatedString","id","header","ModalHeader","role","isOpen","shouldShowCloseButton","memo","className","useState","setIsModalOpen","window","location","assign","href","preventDefault","target","mapToCartSummaryProps","context","getConfig","getCustomer","checkout","getCheckout","config","customer","redeemableProps","isStoreCreditApplied","grandTotal","storeCredit","checkoutSettings","shopperCurrency","links","cartLink","storeCurrency","currency","storeCreditAmount","Math","min","undefined","withRedeemable","OriginalComponent","subtotal","discountAmount","isTaxIncluded","giftCertificates","consignments","handlingCostTotal","shippingCostBeforeDiscount","giftWrappingCostTotal","coupons","taxes","fees","onRemovedCoupon","onRemovedGiftCertificate","cart","subtotalAmount","giftWrappingAmount","shippingAmount","hasSelectedShippingOptions","handlingAmount","additionalLineItems","Redeemable","lineItems","total","outstandingBalance","children","orderSummarySubtotalsProps","nonBundledLineItems","useMemo","removeBundledItems","displayInclusiveTax","length","OrderSummarySection","OrderSummaryItems","displayLineItemsCount","items","Extension","region","OrderSummarySubtotals","OrderSummaryTotal","orderAmount","shopperCurrencyCode","code","storeCurrencyCode","map","tax","index","OrderSummaryPrice","amount","key","label","name","testId"],"sourceRoot":""}