"use strict";(self.webpackJsonpCheckout=self.webpackJsonpCheckout||[]).push([[3450],{31698:(e,t,n)=>{n.d(t,{A:()=>m});var i=n(31635),s=n(44218),a=n(69440),r=n(70355),d=n(65685),o=n(94611),u=n(11474),c=n(40646),l=n(68801);const m=e=>{const{description:t,isInitializing:n=!1,initializePayment:m,method:g,onUnhandledError:h=a.noop,deinitializePayment:p}=e,[y,I]=(0,r.useState)(!1),[b,f]=(0,r.useState)(),k=function(e){const t=(0,s.B4)(((e=[])=>e.filter(d.A))),n=(0,s.B4)(((e=[])=>e.filter((({trustedShippingAddress:e})=>e)))),{checkoutService:i,checkoutState:a,isUsingMultiShipping:r=!1,method:u}=e,{data:{getCart:c,getConfig:l,getCustomer:m,getInstruments:g,isPaymentDataRequired:h,isPaymentDataSubmitted:p},statuses:{isLoadingInstruments:y}}=a,I=c(),b=l(),f=m();if(!b||!I||!f)throw new Error("Unable to get checkout");const k=t(g(u)),v=n(k);return{instruments:v,isNewAddress:0===v.length&&k.length>0,isInstrumentFeatureAvailable:!p(u.id,u.gateway)&&(0,o.A)({config:b,customer:f,isUsingMultiShipping:r,paymentMethod:u}),isLoadingInstruments:y(),isPaymentDataRequired:h(),loadInstruments:i.loadInstruments}}(e),{isLoadingInstruments:v,instruments:w,isNewAddress:A,isInstrumentFeatureAvailable:S,loadInstruments:E}=k,C=(0,r.useCallback)((()=>{if(!y&&w.length)return(0,a.find)(w,{defaultInstrument:!0})||w[0]}),[y,w]),P=(0,r.useCallback)((()=>{I(!0),f(void 0)}),[]),M=(0,r.useCallback)((e=>{I(!1),f((0,a.find)(w,{bigpayToken:e}))}),[w]);(0,r.useEffect)((()=>((0,i.__awaiter)(void 0,void 0,void 0,(function*(){try{yield m({gatewayId:g.gateway,methodId:g.id}),S&&(yield E())}catch(e){h(e)}})),()=>{(0,i.__awaiter)(void 0,void 0,void 0,(function*(){try{yield p({gatewayId:g.gateway,methodId:g.id})}catch(e){h(e)}}))})),[]);const z=b||C(),_=n||v,U=S&&(w.length>0||A);return t||S?r.createElement(l.A,{hideContentWhenLoading:!0,isLoading:_},r.createElement("div",{className:"paymentMethod paymentMethod--hosted"},t,U&&r.createElement(u.A,{instruments:w,onSelectInstrument:M,onUseNewInstrument:P,selectedInstrument:z}),S&&r.createElement(c.A,{instrumentId:z&&z.bigpayToken,instruments:w,isAccountInstrument:!0}))):null}},79517:(e,t,n)=>{n.d(t,{PaypalExpressPaymentMethod:()=>d});var i=n(31635),s=n(40222),a=n(70355),r=n(31698);const d=(0,n(19285).A)((e=>{var{checkoutService:t,isEmbedded:n=!1}=e,d=(0,i.__rest)(e,["checkoutService","isEmbedded"]);const o=(0,a.useCallback)((e=>t.initializePayment(Object.assign(Object.assign({},e),{integrations:[s._],paypalexpress:{useRedirectFlow:n}}))),[t,n]);return a.createElement(r.A,Object.assign({},d,{checkoutService:t,deinitializePayment:t.deinitializePayment,initializePayment:o}))}),[{id:"paypalexpress"},{id:"paypalexpresscredit"}])},94611:(e,t,n)=>{function i({config:e,customer:t,isUsingMultiShipping:n,paymentMethod:i}){return!(!e.checkoutSettings.isCardVaultingEnabled||!i.config.isVaultingEnabled||t.isGuest||n)}n.d(t,{A:()=>i})}}]);
//# sourceMappingURL=paypal-express-payment-method-c9d64b8b.js.map